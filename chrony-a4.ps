%!PS-Adobe-2.0
%%Creator: dvips(k) 5.78 Copyright 1998 Radical Eye Software (www.radicaleye.com)
%%Title: chrony.dvi
%%Pages: 50
%%PageOrder: Ascend
%%BoundingBox: 0 0 596 842
%%DocumentFonts: Palatino-Bold Palatino-Roman Courier Helvetica
%%+ Palatino-BoldItalic Palatino-Italic
%%EndComments
%DVIPSCommandLine: dvips chrony.dvi -o chrony-a4.ps
%DVIPSParameters: dpi=600, compressed
%DVIPSSource:  TeX output 1999.05.05:2056
%%BeginProcSet: texc.pro
%!
/TeXDict 300 dict def TeXDict begin /N{def}def /B{bind def}N /S{exch}N
/X{S N}B /TR{translate}N /isls false N /vsize 11 72 mul N /hsize 8.5 72
mul N /landplus90{false}def /@rigin{isls{[0 landplus90{1 -1}{-1 1}
ifelse 0 0 0]concat}if 72 Resolution div 72 VResolution div neg scale
isls{landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div
hsize mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul
TR[matrix currentmatrix{dup dup round sub abs 0.00001 lt{round}if}
forall round exch round exch]setmatrix}N /@landscape{/isls true N}B
/@manualfeed{statusdict /manualfeed true put}B /@copies{/#copies X}B
/FMat[1 0 0 -1 0 0]N /FBB[0 0 0 0]N /nn 0 N /IE 0 N /ctr 0 N /df-tail{
/nn 8 dict N nn begin /FontType 3 N /FontMatrix fntrx N /FontBBox FBB N
string /base X array /BitMaps X /BuildChar{CharBuilder}N /Encoding IE N
end dup{/foo setfont}2 array copy cvx N load 0 nn put /ctr 0 N[}B /df{
/sf 1 N /fntrx FMat N df-tail}B /dfs{div /sf X /fntrx[sf 0 0 sf neg 0 0]
N df-tail}B /E{pop nn dup definefont setfont}B /ch-width{ch-data dup
length 5 sub get}B /ch-height{ch-data dup length 4 sub get}B /ch-xoff{
128 ch-data dup length 3 sub get sub}B /ch-yoff{ch-data dup length 2 sub
get 127 sub}B /ch-dx{ch-data dup length 1 sub get}B /ch-image{ch-data
dup type /stringtype ne{ctr get /ctr ctr 1 add N}if}B /id 0 N /rw 0 N
/rc 0 N /gp 0 N /cp 0 N /G 0 N /sf 0 N /CharBuilder{save 3 1 roll S dup
/base get 2 index get S /BitMaps get S get /ch-data X pop /ctr 0 N ch-dx
0 ch-xoff ch-yoff ch-height sub ch-xoff ch-width add ch-yoff
setcachedevice ch-width ch-height true[1 0 0 -1 -.1 ch-xoff sub ch-yoff
.1 sub]/id ch-image N /rw ch-width 7 add 8 idiv string N /rc 0 N /gp 0 N
/cp 0 N{rc 0 ne{rc 1 sub /rc X rw}{G}ifelse}imagemask restore}B /G{{id
gp get /gp gp 1 add N dup 18 mod S 18 idiv pl S get exec}loop}B /adv{cp
add /cp X}B /chg{rw cp id gp 4 index getinterval putinterval dup gp add
/gp X adv}B /nd{/cp 0 N rw exit}B /lsh{rw cp 2 copy get dup 0 eq{pop 1}{
dup 255 eq{pop 254}{dup dup add 255 and S 1 and or}ifelse}ifelse put 1
adv}B /rsh{rw cp 2 copy get dup 0 eq{pop 128}{dup 255 eq{pop 127}{dup 2
idiv S 128 and or}ifelse}ifelse put 1 adv}B /clr{rw cp 2 index string
putinterval adv}B /set{rw cp fillstr 0 4 index getinterval putinterval
adv}B /fillstr 18 string 0 1 17{2 copy 255 put pop}for N /pl[{adv 1 chg}
{adv 1 chg nd}{1 add chg}{1 add chg nd}{adv lsh}{adv lsh nd}{adv rsh}{
adv rsh nd}{1 add adv}{/rc X nd}{1 add set}{1 add clr}{adv 2 chg}{adv 2
chg nd}{pop nd}]dup{bind pop}forall N /D{/cc X dup type /stringtype ne{]
}if nn /base get cc ctr put nn /BitMaps get S ctr S sf 1 ne{dup dup
length 1 sub dup 2 index S get sf div put}if put /ctr ctr 1 add N}B /I{
cc 1 add D}B /bop{userdict /bop-hook known{bop-hook}if /SI save N @rigin
0 0 moveto /V matrix currentmatrix dup 1 get dup mul exch 0 get dup mul
add .99 lt{/QV}{/RV}ifelse load def pop pop}N /eop{SI restore userdict
/eop-hook known{eop-hook}if showpage}N /@start{userdict /start-hook
known{start-hook}if pop /VResolution X /Resolution X 1000 div /DVImag X
/IE 256 array N 2 string 0 1 255{IE S dup 360 add 36 4 index cvrs cvn
put}for pop 65781.76 div /vsize X 65781.76 div /hsize X}N /p{show}N
/RMat[1 0 0 -1 0 0]N /BDot 260 string N /rulex 0 N /ruley 0 N /v{/ruley
X /rulex X V}B /V{}B /RV statusdict begin /product where{pop false[
(Display)(NeXT)(LaserWriter 16/600)]{dup length product length le{dup
length product exch 0 exch getinterval eq{pop true exit}if}{pop}ifelse}
forall}{false}ifelse end{{gsave TR -.1 .1 TR 1 1 scale rulex ruley false
RMat{BDot}imagemask grestore}}{{gsave TR -.1 .1 TR rulex ruley scale 1 1
false RMat{BDot}imagemask grestore}}ifelse B /QV{gsave newpath transform
round exch round exch itransform moveto rulex 0 rlineto 0 ruley neg
rlineto rulex neg 0 rlineto fill grestore}B /a{moveto}B /delta 0 N /tail
{dup /delta X 0 rmoveto}B /M{S p delta add tail}B /b{S p tail}B /c{-4 M}
B /d{-3 M}B /e{-2 M}B /f{-1 M}B /g{0 M}B /h{1 M}B /i{2 M}B /j{3 M}B /k{
4 M}B /w{0 rmoveto}B /l{p -4 w}B /m{p -3 w}B /n{p -2 w}B /o{p -1 w}B /q{
p 1 w}B /r{p 2 w}B /s{p 3 w}B /t{p 4 w}B /x{0 S rmoveto}B /y{3 2 roll p
a}B /bos{/SS save N}B /eos{SS restore}B end

%%EndProcSet
%%BeginProcSet: 8r.enc
% @@psencodingfile@{
%   author = "S. Rahtz, P. MacKay, Alan Jeffrey, B. Horn, K. Berry",
%   version = "0.6",
%   date = "22 June 1996",
%   filename = "8r.enc",
%   email = "kb@@mail.tug.org",
%   address = "135 Center Hill Rd. // Plymouth, MA 02360",
%   codetable = "ISO/ASCII",
%   checksum = "119     662    4424",
%   docstring = "Encoding for TrueType or Type 1 fonts to be used with TeX."
% @}
% 
% Idea is to have all the characters normally included in Type 1 fonts
% available for typesetting. This is effectively the characters in Adobe
% Standard Encoding + ISO Latin 1 + extra characters from Lucida.
% 
% Character code assignments were made as follows:
% 
% (1) the Windows ANSI characters are almost all in their Windows ANSI
% positions, because some Windows users cannot easily reencode the
% fonts, and it makes no difference on other systems. The only Windows
% ANSI characters not available are those that make no sense for
% typesetting -- rubout (127 decimal), nobreakspace (160), softhyphen
% (173). quotesingle and grave are moved just because it's such an
% irritation not having them in TeX positions.
% 
% (2) Remaining characters are assigned arbitrarily to the lower part
% of the range, avoiding 0, 10 and 13 in case we meet dumb software.
% 
% (3) Y&Y Lucida Bright includes some extra text characters; in the
% hopes that other PostScript fonts, perhaps created for public
% consumption, will include them, they are included starting at 0x12.
% 
% (4) Remaining positions left undefined are for use in (hopefully)
% upward-compatible revisions, if someday more characters are generally
% available.
% 
% (5) hyphen appears twice for compatibility with both ASCII and Windows.
% 
/TeXBase1Encoding [
% 0x00 (encoded characters from Adobe Standard not in Windows 3.1)
  /.notdef /dotaccent /fi /fl
  /fraction /hungarumlaut /Lslash /lslash
  /ogonek /ring /.notdef
  /breve /minus /.notdef 
% These are the only two remaining unencoded characters, so may as
% well include them.
  /Zcaron /zcaron 
% 0x10
 /caron /dotlessi 
% (unusual TeX characters available in, e.g., Lucida Bright)
 /dotlessj /ff /ffi /ffl 
 /.notdef /.notdef /.notdef /.notdef
 /.notdef /.notdef /.notdef /.notdef
 % very contentious; it's so painful not having quoteleft and quoteright
 % at 96 and 145 that we move the things normally found there down to here.
 /grave /quotesingle 
% 0x20 (ASCII begins)
 /space /exclam /quotedbl /numbersign
 /dollar /percent /ampersand /quoteright
 /parenleft /parenright /asterisk /plus /comma /hyphen /period /slash
% 0x30
 /zero /one /two /three /four /five /six /seven
 /eight /nine /colon /semicolon /less /equal /greater /question
% 0x40
 /at /A /B /C /D /E /F /G /H /I /J /K /L /M /N /O
% 0x50
 /P /Q /R /S /T /U /V /W
 /X /Y /Z /bracketleft /backslash /bracketright /asciicircum /underscore
% 0x60
 /quoteleft /a /b /c /d /e /f /g /h /i /j /k /l /m /n /o
% 0x70
 /p /q /r /s /t /u /v /w
 /x /y /z /braceleft /bar /braceright /asciitilde
 /.notdef % rubout; ASCII ends
% 0x80
 /.notdef /.notdef /quotesinglbase /florin
 /quotedblbase /ellipsis /dagger /daggerdbl
 /circumflex /perthousand /Scaron /guilsinglleft
 /OE /.notdef /.notdef /.notdef
% 0x90
 /.notdef /.notdef /.notdef /quotedblleft
 /quotedblright /bullet /endash /emdash
 /tilde /trademark /scaron /guilsinglright
 /oe /.notdef /.notdef /Ydieresis
% 0xA0
 /.notdef % nobreakspace
 /exclamdown /cent /sterling
 /currency /yen /brokenbar /section
 /dieresis /copyright /ordfeminine /guillemotleft
 /logicalnot
 /hyphen % Y&Y (also at 45); Windows' softhyphen
 /registered
 /macron
% 0xD0
 /degree /plusminus /twosuperior /threesuperior
 /acute /mu /paragraph /periodcentered
 /cedilla /onesuperior /ordmasculine /guillemotright
 /onequarter /onehalf /threequarters /questiondown
% 0xC0
 /Agrave /Aacute /Acircumflex /Atilde /Adieresis /Aring /AE /Ccedilla
 /Egrave /Eacute /Ecircumflex /Edieresis
 /Igrave /Iacute /Icircumflex /Idieresis
% 0xD0
 /Eth /Ntilde /Ograve /Oacute
 /Ocircumflex /Otilde /Odieresis /multiply
 /Oslash /Ugrave /Uacute /Ucircumflex
 /Udieresis /Yacute /Thorn /germandbls
% 0xE0
 /agrave /aacute /acircumflex /atilde
 /adieresis /aring /ae /ccedilla
 /egrave /eacute /ecircumflex /edieresis
 /igrave /iacute /icircumflex /idieresis
% 0xF0
 /eth /ntilde /ograve /oacute
 /ocircumflex /otilde /odieresis /divide
 /oslash /ugrave /uacute /ucircumflex
 /udieresis /yacute /thorn /ydieresis
] def

%%EndProcSet
%%BeginProcSet: texps.pro
%!
TeXDict begin /rf{findfont dup length 1 add dict begin{1 index /FID ne 2
index /UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]/Metrics
exch def dict begin Encoding{exch dup type /integertype ne{pop pop 1 sub
dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get div def}
ifelse}forall Metrics /Metrics currentdict end def[2 index currentdict
end definefont 3 -1 roll makefont /setfont cvx]cvx def}def /ObliqueSlant
{dup sin S cos div neg}B /SlantFont{4 index mul add}def /ExtendFont{3 -1
roll mul exch}def /ReEncodeFont{/Encoding exch def}def end

%%EndProcSet
TeXDict begin 39158280 55380996 1000 600 600 (chrony.dvi)
@start /Fa 209[23 46[{ TeXBase1Encoding ReEncodeFont }1
90.4939 /Palatino-Italic rf /Fb 209[30 46[{
 TeXBase1Encoding ReEncodeFont }1 119.552 /Palatino-BoldItalic
rf
%DVIPSBitmapFont: Fc cmr7 7 1
/Fc 1 50 df<13381378EA01F8121F12FE12E01200B3AB487EB512F8A215267BA521>49
D E
%EndDVIPSBitmapFont
/Fd 139[22 1[26 2[36 39 1[19 39[51 47 21[22 45[{
 TeXBase1Encoding ReEncodeFont }8 66.4176 /Palatino-Roman
rf
%DVIPSBitmapFont: Fe cmsy9 9 2
/Fe 2 106 df<EB0180EB03C01307A21480130FA2EB1F00A2131E133EA25BA2137813F8
A2485AA25B1203A2485AA25B120FA248C7FCA2121E123EA25AA2127812F8A41278127CA2
7EA2121E121FA26C7EA212077FA26C7EA212017FA26C7EA21378137CA27FA2131E131FA2
EB0F80A2130714C0A21303EB0180124A79B71E>104 D<126012F07EA21278127CA27EA2
121E121FA26C7EA212077FA26C7EA212017FA26C7EA21378137CA27FA2131E131FA2EB0F
80A2130714C0A41480130FA2EB1F00A2131E133EA25BA2137813F8A2485AA25B1203A248
5AA25B120FA248C7FCA2121E123EA25AA2127812F8A25A1260124A7CB71E>I
E
%EndDVIPSBitmapFont
/Ff 145[55 9[55 2[45 97[{ TeXBase1Encoding ReEncodeFont }3
90.4939 /Palatino-Bold rf /Fg 134[45 45 65 45 50 25 45
30 50 50 50 50 75 20 45 20 20 50 50 25 50 50 45 50 50
20 6[60 60 85 60 65 55 60 65 70 60 70 65 75 50 60 1[25
65 70 55 60 65 65 60 60 3[53 1[25 25 1[50 50 50 50 50
50 50 50 1[25 25 30 25 2[30 30 20 36[45 2[{
 TeXBase1Encoding ReEncodeFont }69 90.4939 /Helvetica
rf /Fh 134[60 54 90 60 66 36 48 42 66 66 60 66 97 36
66 1[36 66 60 42 54 66 48 66 54 12[72 66 78 1[66 90 1[109
66 3[90 90 3[78 72 84 7[54 54 54 54 54 54 54 54 54 54
32 27 36 41[66 66 2[{ TeXBase1Encoding ReEncodeFont }51
108.593 /Palatino-Bold rf /Fi 134[50 1[75 51 55 29 38
36 51 54 49 53 80 26 2[26 53 50 30 43 55 40 50 45 12[55
48 60 1[55 71 75 86 3[30 3[55 70 2[70 5[23 23 4[45 6[23
30 23 4[25 39[{ .167 SlantFont TeXBase1Encoding ReEncodeFont }40
90.4939 /Palatino-Roman rf /Fj 129[54 54 54 54 54 54
54 54 54 54 54 54 54 54 54 54 54 54 54 54 54 54 54 54
54 54 54 54 54 54 54 54 54 54 54 54 4[54 54 54 54 54
1[54 54 54 54 54 54 54 54 1[54 54 54 54 54 2[54 54 54
54 54 54 54 54 54 54 54 54 54 54 54 54 54 54 54 54 54
54 54 54 54 54 54 54 54 54 54 54 33[{ TeXBase1Encoding ReEncodeFont }86
90.4939 /Courier rf /Fk 134[80 72 2[88 48 64 56 1[88
80 88 1[48 2[48 1[80 56 72 88 64 88 72 11[112 96 3[88
6[56 5[104 1[112 12[72 72 72 72 49[{ TeXBase1Encoding ReEncodeFont }28
143.462 /Palatino-Bold rf
%DVIPSBitmapFont: Fl cmsy10 10.95 2
/Fl 2 16 df<EE7FFE0307B512E0033F14FC92B7FC0203D9C00313C0DA0FFCC7EA3FF0DA
3FE0EC07FCDA7F80EC01FED901FEC9EA7F80D903F8EE1FC0D907E0EE07E04948707E4948
707E49CB7E017E187E498449844848F00F8000031AC04918074848F003E0A24848F001F0
A248CD12F8A2001E1A78003E1A7CA2003C1A3C007C1A3EA200781A1EA300F81A1FA2481A
0FAB6C1A1FA200781A1EA3007C1A3EA2003C1A3C003E1A7CA2001E1A78001F1AF8A26C6C
F001F0A26C6CF003E0A26C6CF007C06D180F00011A806C6CF01F006D60017E187E6D606D
6C4C5A6D6C4C5A6D6C4C5AD903F8EE1FC0D901FEEE7F809026007F80DA01FEC7FCDA3FE0
EC07FCDA0FFCEC3FF0913B03FFC003FFC0020090B6C8FC033F14FC030714E09226007FFE
C9FC50557BC05B>13 D<EB0FFCEB3FFF90B512C0000314F04880488048804880A2481580
A3B712C0AA6C1580A36C1500A26C5C6C5C6C5C6C5CC614C0013F90C7FCEB0FFC22227BA7
2D>15 D E
%EndDVIPSBitmapFont
/Fm 134[66 60 100 66 73 40 53 47 73 73 66 73 106 40 73
1[40 73 66 47 60 73 53 73 60 11[93 80 73 86 100 73 100
100 4[47 4[100 86 1[93 9[60 60 60 60 60 60 60 2[30 40
3[40 40 37[73 2[{ TeXBase1Encoding ReEncodeFont }48 119.552
/Palatino-Bold rf /Fn 104[90 45 27[45 50 47 75 51 55
29 38 36 51 54 49 53 80 26 50 21 26 53 50 30 43 55 40
50 45 25 2[30 1[30 1[60 60 90 65 70 55 48 60 71 55 71
75 86 55 66 30 30 75 69 50 55 70 64 55 70 3[55 1[23 23
45 45 45 45 45 45 45 45 45 45 55 23 30 23 1[35 30 30
25 70 4[25 29[55 55 2[{ TeXBase1Encoding ReEncodeFont }81
90.4939 /Palatino-Roman rf /Fo 134[95 3[105 57 76 67
2[95 105 4[57 105 2[86 1[76 14[114 84[{ TeXBase1Encoding ReEncodeFont }
12 171.357 /Palatino-Bold rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 600dpi
TeXDict begin
%%PaperSize: A4

%%EndSetup
%%Page: 100 1
100 0 bop -150 2254 a Fo(The)43 b(chrony)f(suite)p -150
2366 4050 34 v 2546 2464 a Fn(This)24 b(manual)e(describes)j(how)e(to)h
(use)2489 2572 y(the)f(pr)n(ograms)h(chr)n(onyd)g(and)e(chr)n(onyc)-150
5536 y Fm(Richard)29 b(P)-15 b(.)30 b(Curnow)p -150 5587
4050 17 v eop
%%Page: 101 2
101 1 bop -150 5761 a Fn(Copyright)311 5758 y(c)285 5761
y Fl(\015)23 b Fn(1997-1999)i(Richar)n(d)f(P)-12 b(.)22
b(Curnow)p eop
%%Page: 1 3
1 2 bop -150 -116 a Fn(Chapter)24 b(1:)k(Intr)n(oduction)3059
b(1)-150 236 y Fk(1)71 b(Introduction)-150 698 y Fm(1.1)59
b(Overview)-25 923 y Fn(Chr)n(ony)26 b(is)g(a)g(softwar)n(e)i(package)g
(for)e(maintaining)h(the)f(accuracy)g(of)g(computer)h(system)h(clocks.)
38 b(It)27 b(consists)-150 1023 y(of)c(a)g(pair)g(of)h(pr)n(ograms)g(:)
-75 1247 y Fl(\017)60 b Fj(chronyd)p Fn(.)43 b(This)27
b(is)h(a)f(daemon)h(which)f(r)o(uns)g(in)g(backgr)n(ound)h(on)f(the)g
(system.)43 b(It)28 b(obtains)g(measur)n(ements)30 1347
y(\(e.g.)g(via)c(the)f(network\))h(of)f(the)h(system's)h(of)n(fset)g(r)
n(elative)g(to)e(other)h(systems,)g(and)f(adjusts)h(the)f(system)i
(time)30 1447 y(accor)n(dingly)-10 b(.)34 b(For)24 b(isolated)j
(systems,)f(the)e(user)g(can)g(periodically)j(enter)d(the)h(corr)n(ect)
g(time)g(by)f(hand)g(\(using)30 1546 y Fj(chronyc)p Fn(\).)29
b(In)19 b(either)h(case,)h Fj(chronyd)g Fn(determines)g(the)f(rate)g
(at)g(which)f(the)h(computer)g(gains)g(or)f(loses)i(time,)30
1646 y(and)i(compensates)i(for)e(this.)-75 1771 y Fl(\017)60
b Fj(chronyc)p Fn(.)29 b(This)23 b(is)f(a)f(command-line)i(driven)f
(contr)n(ol)h(and)f(monitoring)g(pr)n(ogram.)29 b(An)21
b(administrator)j(can)30 1871 y(use)j(this)h(to)f(\002ne-tune)g
(various)h(parameters)g(within)g(the)g(daemon,)g(add)f(or)g(delete)i
(servers)f(etc)g(whilst)g(the)30 1970 y(daemon)23 b(is)h(r)o(unning.)
-150 2330 y Fm(1.2)59 b(Acknowledgements)-25 2555 y Fn(The)30
b Fj(chrony)h Fn(suite)g(makes)g(use)f(of)g(the)h(algorithm)g(known)f
(as)h Fi(RSA)f(Data)h(Security)-10 b(,)31 b(Inc.)50 b(MD5)29
b(Message-)-150 2655 y(Digest)c(Algorithm)31 b Fn(for)23
b(authenticating)h(messages)h(between)g(dif)n(fer)n(ent)g(machines)e
(on)g(the)g(network.)-25 2879 y(In)18 b(writing)j(the)e
Fj(chronyd)i Fn(pr)n(ogram,)f(extensive)h(use)e(has)g(been)g(made)h(of)
f(RFC1305,)i(written)f(by)g(David)f(Mills.)-150 2979
y(I)g(have)f(occasionally)j(r)n(eferr)n(ed)f(to)f(the)g
Fj(xntp)g Fn(suite's)h(sour)n(ce)f(code)g(to)h(check)e(details)j(of)e
(the)f(pr)n(otocol)j(that)e(the)g(RFC)-150 3079 y(did)k(not)f(make)h
(absolutely)i(clear)-7 b(.)28 b(The)23 b(cor)n(e)g(algorithms)h(in)e
Fj(chronyd)i Fn(ar)n(e)f(all)f(completely)j(distinct)g(fr)n(om)d
Fj(xntp)p Fn(,)-150 3178 y(however)-7 b(.)-150 3538 y
Fm(1.3)59 b(A)-8 b(vailability)-150 3864 y Fh(1.3.1)55
b(Getting)39 b(the)e(software)-25 4089 y Fn(Links)28
b(on)f(the)h(chr)n(ony)g(home)g(page)h(\()p Fj(http://www.curnow.demon)
q(.co)q(.uk)q(/chr)q(ony)q(/ind)q(ex.)q(htm)q(l)p Fn(\))-150
4188 y(describe)24 b(how)f(to)h(obtain)g(the)f(softwar)n(e.)-150
4514 y Fh(1.3.2)55 b(Platforms)-25 4739 y Fn(Although)33
b(most)h(of)f(the)g(pr)n(ogram)h(is)g(portable)g(between)h(Unix-like)f
(systems,)j(ther)n(e)d(ar)n(e)f(parts)h(that)g(have)-150
4838 y(to)29 b(be)f(tailor)n(ed)j(to)e(each)g(speci\002c)g(vendor)7
b('s)29 b(system.)46 b(These)29 b(ar)n(e)g(the)g(parts)g(that)g
(interface)g(with)g(the)g(operating)-150 4938 y(system's)k(facilities)h
(for)c(adjusting)i(the)f(system)i(clock;)i(dif)n(fer)n(ent)e(operating)
g(systems)f(may)f(pr)n(ovide)i(dif)n(fer)n(ent)-150 5038
y(function)27 b(calls)g(to)h(achieve)f(this,)h(and)e(even)h(wher)n(e)g
(the)g(same)g(function)g(is)g(used)g(it)g(may)g(have)f(dif)n(fer)n(ent)
j(quirks)-150 5137 y(in)23 b(its)g(behaviour)-7 b(.)-25
5362 y(So)22 b(far)-7 b(,)23 b(the)g(softwar)n(e)i(is)e(able)h(to)g(r)o
(un)d(in)i(the)g(following)i(envir)n(onments:)-75 5587
y Fl(\017)60 b Fn(Linux/i386.)40 b(The)27 b(softwar)n(e)i(can)e(be)g
(compiled)h(on)f(Linux)f(v2.0.x)g(kernels.)41 b(Linux)26
b(v2.1.x)g(kernels)h(should)30 5687 y(also)36 b(pr)n(esent)g(no)f(pr)n
(oblem,)j(but)d(the)g Fj(sys_linux.c)j Fn(\002le)d(needs)g(modifying)h
(to)g(de\002ne)f(the)g(patchlevel)30 5786 y(\(value)24
b(of)g('x'\))g(at)g(which)f(the)h(change)g(to)g(the)g(kernel)g
(time-keeping)j(equivalent)d(to)g(that)h(applied)g(in)f(v2.0.32)p
eop
%%Page: 2 4
2 3 bop -150 -116 a Fn(Chapter)24 b(1:)k(Intr)n(oduction)3059
b(2)30 236 y(was)22 b(included.)27 b(Until)22 b(I)f(\002nd)f(out)h
(which)g(version)g(this)g(was,)h(v2.1)f(kernels)g(ar)n(e)g(limited)i
(to)e(patchlevels)i(prior)30 336 y(to)h(51.)-75 459 y
Fl(\017)60 b Fn(Solaris)24 b(2.5/2.5.1)e(on)h(Spar)n(c)g(20)g(and)g
(Ultraspar)n(c.)-75 583 y Fl(\017)60 b Fn(SunOS)21 b(4.1.4)i(on)f(Spar)
n(c)h(2)g(and)g(Spar)n(c20.)-25 831 y(Closely)h(r)n(elated)h(systems)g
(may)e(work)h(too,)f(but)g(they)g(have)g(not)h(been)f(tested.)-25
1055 y(Porting)33 b(the)g(softwar)n(e)i(to)e(other)g(system)i
(\(particularly)f(to)g(those)f(supporting)i(an)d Fj(adjtime)i
Fn(system)h(call\))-150 1155 y(should)23 b(not)g(be)g(dif)n(\002cult,)h
(however)g(it)f(r)n(equir)n(es)h(access)g(to)g(such)e(systems)j(to)e
(test)i(out)e(the)g(driver)-7 b(.)-150 1510 y Fm(1.4)59
b(Relationship)40 b(to)g(other)f(software)g(packages)-150
1831 y Fh(1.4.1)55 b(xntpd)-25 2055 y Fn(The)24 b(`r)n(efer)n(ence')h
(implementation)i(of)d(the)g(Network)i(T)-5 b(ime)24
b(Pr)n(otocol)i(is)e(the)h(pr)n(ogram)f Fj(xntpd)p Fn(,)h(available)h
(via)-150 2155 y(The)d(NTP)g(home)g(page)h(\()p Fj
(http://www.eecis.udel.)q(edu/)q(~nt)q(p)p Fn(\).)-25
2379 y Fj(xntpd)e Fn(is)g(designed)h(to)f(support)g(all)g(the)f
(operating)i(modes)g(de\002ned)e(by)h(RFC1305,)h(and)e(has)g(driver)h
(support)-150 2479 y(for)36 b(a)g(lar)n(ge)g(number)f(of)h(r)n(efer)n
(ence)h(clocks)h(\(such)d(as)h(GPS)f(r)n(eceivers\))i(that)g(can)e(be)h
(connected)h(dir)n(ectly)h(to)f(a)-150 2578 y(computer)-7
b(,)24 b(ther)n(eby)g(pr)n(oviding)g(a)f(so-called)i('stratum)f(1')f
(server)-7 b(.)-25 2803 y(Things)23 b Fj(chronyd)i Fn(can)d(do)i(that)f
Fj(xntpd)h Fn(can't:)-75 3027 y Fl(\017)60 b Fj(chronyd)27
b Fn(can)e(perform)g(usefully)h(in)e(an)h(envir)n(onment)h(wher)n(e)g
(access)g(to)g(the)f(time)h(r)n(efer)n(ence)g(is)g(intermit-)30
3126 y(tent.)34 b Fj(chronyd)27 b Fn(estimates)g Fi(both)37
b Fn(the)25 b(curr)n(ent)f(time)i(of)n(fset)h Fi(and)35
b Fn(the)25 b(rate)h(at)f(which)g(the)g(computer)7 b('s)26
b(clock)30 3226 y(gains)e(or)e(loses)j(time,)e(and)g(can)g(use)g(that)g
(rate)h(estimate)h(to)e(trim)g(the)h(clock)g(after)f(the)g(r)n(efer)n
(ence)i(disappears.)30 3326 y Fj(xntpd)33 b Fn(corr)n(ects)h(any)e
(time)h(of)n(fset)h(by)e(speeding)i(up)e(and)g(slowing)i(down)f(the)f
(computer)h(clock,)i(and)d(so)30 3425 y(could)25 b(be)f(left)h(with)g
(a)f(signi\002cant)h(rate)g(err)n(or)f(if)h(the)f(r)n(efer)n(ence)h
(disappears)i(whilst)f(it)e(is)h(trying)g(to)f(corr)n(ect)i(a)30
3525 y(big)d(of)n(fset.)-75 3648 y Fl(\017)60 b Fj(chronyd)36
b Fn(pr)n(ovides)h(support)e(for)g(isolated)i(networks)f(whether)f(the)
g(only)g(method)g(of)g(time)g(corr)n(ection)30 3748 y(is)c(manual)g
(entry)g(\(e.g.)52 b(by)31 b(the)g(administrator)h(looking)h(at)e(a)g
(clock\).)53 b Fj(chronyd)32 b Fn(can)f(look)h(at)f(the)g(err)n(ors)30
3848 y(corr)n(ected)24 b(at)f(dif)n(fer)n(ent)h(updates)g(to)f(work)g
(out)f(the)h(rate)f(at)h(which)g(the)f(computer)h(gains)g(or)f(loses)i
(time,)f(and)30 3947 y(use)g(this)g(estimate)j(to)d(trim)g(the)g
(computer)h(clock)g(subsequently)-10 b(.)-75 4071 y Fl(\017)60
b Fj(chronyd)26 b Fn(pr)n(ovides)g(support)g(to)f(work)g(out)f(the)h
(gain)f(or)g(loss)i(rate)f(of)f(the)h(`r)n(eal-time)h(clock',)g(i.e.)32
b(the)25 b(clock)30 4170 y(that)31 b(maintains)f(the)h(time)f(when)g
(the)g(computer)h(is)f(turned)g(of)n(f.)50 b(It)30 b(can)g(use)g(this)g
(data)h(when)f(the)g(system)30 4270 y(boots)25 b(to)f(set)h(the)f
(system)h(time)g(fr)n(om)f(a)f(corr)n(ected)j(version)e(of)g(the)g(r)n
(eal-time)i(clock.)31 b(These)25 b(r)n(eal-time)h(clock)30
4370 y(facilities)g(ar)n(e)d(only)g(available)i(on)e(certain)h(r)n
(eleases)h(of)e(Linux,)f(so)h(far)-7 b(.)-75 4493 y Fl(\017)60
b Fn(The)27 b Fj(xntpd)h Fn(pr)n(ogram)g(is)f(supported)i(by)e(other)g
(pr)n(ograms)h(to)g(carry)e(out)i(certain)f(functions.)41
b Fj(ntpdate)28 b Fn(is)30 4593 y(used)f(to)h(pr)n(ovide)g(an)e
(initial)j(corr)n(ection)f(to)g(the)f(system)h(clock)g(based)g(on)e(a)h
(`one-shot')h(sampling)g(of)f(other)30 4692 y(NTP)33
b(servers.)61 b Fj(tickadj)35 b Fn(is)f(used)f(to)h(adjust)h(certain)f
(operating)h(system)g(parameters)g(to)f(make)g Fj(xntpd)30
4792 y Fn(work)24 b(better)-7 b(.)29 b(All)24 b(this)f(functionality)i
(is)e(integrated)i(into)f Fj(chronyd)p Fn(.)-25 5040
y(Things)f Fj(xntpd)h Fn(can)f(do)g(that)h Fj(chronyd)g
Fn(can't:)-75 5264 y Fl(\017)60 b Fj(xntpd)25 b Fn(supports)h(a)d
(range)h(of)h(dif)n(fer)n(ent)h(har)n(dwar)n(e)f(r)n(efer)n(ence)g
(clocks)g(\(GPS,)e(atomic)i(etc\))g(that)g(can)f(be)g(con-)30
5364 y(nected)j(to)f(a)f(computer)h(to)g(pr)n(ovide)i(a)d(`stratum-1')i
(server)-7 b(.)36 b Fj(chronyd)27 b Fn(does)g(not)f(support)g(any)g
(such)f(har)n(d-)30 5463 y(war)n(e)i Fi(yet)9 b Fn(;)28
b(I)e(don't)h(have)f(access)i(to)e(any)g(to)h(do)f(any)g(development)j
(work.)38 b(However)-7 b(,)28 b(the)e(softwar)n(e)i(ar)n(chi-)30
5563 y(tectur)n(e)c(should)f(allow)i(such)d(equipment)i(to)f(be)g
(interfaced)i(at)e(a)g(later)h(date.)-75 5687 y Fl(\017)60
b Fj(xntpd)26 b Fn(supports)f(ef)n(fectively)j(all)d(of)f(RFC1305,)i
(including)f(br)n(oadcast)i(/)d(multicast)i(clients,)f(leap)h(seconds,)
30 5786 y(and)d(extra)g(encryption)h(schemes)g(for)f(authenticating)i
(data)e(packets.)p eop
%%Page: 3 5
3 4 bop -150 -116 a Fn(Chapter)24 b(1:)k(Intr)n(oduction)3059
b(3)-75 236 y Fl(\017)60 b Fj(xntpd)24 b Fn(has)f(been)g(ported)h(to)g
(mor)n(e)f(types)i(of)e(computer)h(/)e(operating)j(system)f(\(so)g
(far\).)-75 364 y Fl(\017)60 b Fn(xntpd)36 b(is)h(designed)h(to)e(work)
h(solely)h(with)f(integer)g(arithmetic)h(\(i.e.)67 b(does)38
b(not)e(r)n(equir)n(e)g(\003oating)i(point)30 463 y(support)24
b(fr)n(om)f(its)h(host\).)-150 797 y Fh(1.4.2)55 b(timed)-25
1024 y Fj(timed)34 b Fn(is)f(a)h(pr)n(ogram)g(that)f(is)h(part)g(of)f
(the)h(BSD)e(networking)j(suite.)60 b(It)33 b(uses)h(br)n(oadcast)h
(packets)g(to)f(\002nd)-150 1124 y(all)d(machines)g(r)o(unning)e(the)i
(daemon)g(within)g(a)f(subnet.)51 b(The)30 b(machines)h(elect)h(a)e
(master)h(which)g(periodically)-150 1223 y(measur)n(es)i(the)f(system)h
(clock)g(of)n(fsets)h(of)e(the)g(other)g(computers)h(using)e(ICMP)h
(timestamps.)57 b(Corr)n(ections)33 b(ar)n(e)-150 1323
y(sent)24 b(to)f(each)g(member)g(as)g(a)g(r)n(esult)h(of)f(this)h(pr)n
(ocess.)-25 1550 y(Pr)n(oblems)f(that)h(may)f(arise)h(with)f
Fj(timed)h Fn(ar)n(e)g(:)-75 1777 y Fl(\017)60 b Fn(Because)33
b(it)f(uses)h(br)n(oadcasts,)j(it)c(is)g(not)h(possible)h(to)e(isolate)
i(its)f(functionality)h(to)e(a)g(particular)h(gr)n(oup)f(of)30
1877 y(computers;)25 b(ther)n(e)f(is)g(a)g(risk)g(of)g(upsetting)i
(other)e(computers)h(on)e(the)h(same)g(network)h(\(e.g.)31
b(wher)n(e)24 b(a)g(whole)30 1977 y(company)e(is)f(on)f(the)h(same)h
(subnet)e(but)h(dif)n(fer)n(ent)i(departments)g(ar)n(e)e(independent)h
(fr)n(om)f(the)g(point)h(of)f(view)30 2076 y(of)i(administering)i
(their)e(computers.\))-75 2204 y Fl(\017)60 b Fn(The)26
b(update)g(period)h(appears)g(to)f(be)f(10)h(minutes.)36
b(Computers)26 b(can)g(build)f(up)g(signi\002cant)i(of)n(fsets)h(r)n
(elative)30 2303 y(to)23 b(each)g(other)g(in)f(that)h(time.)29
b(If)23 b(a)f(computer)i(can)e(estimate)j(its)e(rate)g(of)g(drift)g(it)
g(can)g(keep)g(itself)i(closer)e(to)g(the)30 2403 y(other)e(computers)h
(between)g(updates)g(by)f(adjusting)h(its)g(clock)g(every)f(few)h
(seconds.)28 b Fj(timed)22 b Fn(does)g(not)f(seem)30
2503 y(to)j(do)f(this.)-75 2630 y Fl(\017)60 b Fj(timed)38
b Fn(does)f(not)g(have)g(any)f(integrated)j(capability)g(for)d(feeding)
i(r)n(eal-time)h(into)e(its)g(estimates,)42 b(or)37 b(for)30
2730 y(estimating)f(the)d(average)i(rate)f(of)g(time)g(loss/gain)h(of)f
(the)g(machines)f(r)n(elative)j(to)e(r)n(eal-time)i(\(unless)e(one)30
2830 y(of)26 b(the)f(computers)i(in)e(the)h(gr)n(oup)g(has)f(access)i
(to)f(an)f(external)h(r)n(efer)n(ence)h(and)e(is)h(always)h(appointed)h
(as)d(the)30 2929 y(`master)7 b('\).)-25 3185 y Fj(timed)36
b Fn(does)h(have)f(the)g(bene\002t)g(over)g Fj(chronyd)h
Fn(that)f(for)g(isolated)i(networks)f(of)f(computers,)j(they)e(will)
-150 3284 y(track)26 b(the)g(`majority)h(vote')g(time.)38
b(For)25 b(such)h(isolated)i(networks,)f Fj(chronyd)h
Fn(r)n(equir)n(es)e(one)g(computer)g(to)h(be)e(the)-150
3384 y(`master)7 b(')31 b(with)g(the)f(others)h(slaved)g(to)g(it.)50
b(If)30 b(the)g(master)h(has)f(a)g(particular)h(defective)i(clock,)f
(the)f(whole)f(set)h(of)-150 3483 y(computers)24 b(will)g(tend)g(to)f
(slip)h(r)n(elative)h(to)f(r)n(eal)f(time)h(\(but)f(they)g
Fi(will)35 b Fn(stay)24 b(accurate)g(r)n(elative)h(to)f(one)f
(another\).)-150 3853 y Fm(1.5)59 b(Distribution)39 b(rights)g(and)h
(\(lack)g(of\))f(warranty)-150 4080 y Fg(This)22 b(is)f(the)h(licence)g
(f)m(or)g(the)g(prog)o(r)o(ams)h Fj(")p Fg(chron)o(yd)p
Fj(")g Fg(and)f Fj(")p Fg(chron)o(yc)p Fj(")p Fg(.)32
b(Their)22 b(source)g(code)g(\002les)g(which)g(ref)m(erence)-150
4180 y(this)39 b(licence)o(,)j(object)e(\002les)e(/)h(prog)o(r)o(ams)h
(\(binar)s(y)f(f)m(or)r(m\))h(b)n(uilt)f(from)g(such)g(source)g(code)o
(,)j(and)d(the)g(suppor)t(ting)-150 4279 y(documentation)29
b(are)d(collectiv)n(ely)h(ref)m(erred)g(to)f(in)f(this)h(licence)h(as)f
Fj(")p Fg(the)g(Softw)o(are)p Fj(")p Fg(.)-150 4507 y(Cer)t(tain)f
(source)h(code)f(\002les)f(required)i(f)m(or)f(the)g(constr)q(uction)i
(of)d(the)h(Softw)o(are)g(ma)m(y)g(be)g(included)h(under)f(diff)m
(erent)-150 4606 y(licensing)h(arr)o(angements;)i(y)n(ou)d(should)h
(ref)m(er)f(to)g(such)g(source)h(code)f(\002les)g(directly)h(f)m(or)f
(fur)t(ther)g(inf)m(or)r(mation.)34 b(An)o(y)-150 4706
y(such)26 b(\002les)g(are)g(outside)h(the)f(scope)h(of)e(this)h
(licence)o(.)-150 4933 y(P)-5 b(erson\(s\))38 b(and/or)f
(organisation\(s\))h(holding)f(the)f(cop)m(yr)q(ight)i(to)e(an)o(y)g
(par)t(t)f(of)h(the)g(source)h(code)f(to)g(which)g(this)-150
5033 y(licence)27 b(applies)g(are)f(ref)m(erred)h(to)e(in)h(this)g
(licence)h(as)e Fj(")p Fg(the)i(Cop)m(yr)q(ight)h(Holder\(s\))p
Fj(")p Fg(.)-150 5260 y(Cop)m(ying)41 b(and)f(use)h(of)e(this)h
(licence)h(itself)m(,)j(with)c(or)g(without)h(modi\002cation,)k(are)40
b(per)r(mitted)i(f)m(or)e(an)o(y)f(pur)s(pose)-150 5360
y(subject)27 b(only)f(to)g(condition)h(6)e(belo)o(w)-5
b(.)-150 5587 y(Cop)m(ying,)32 b(use)d(and)g(redistr)q(ib)n(ution)j(of)
d(the)g(Softw)o(are)h(in)f(source)h(and/or)g(binar)s(y)g(f)m(or)r(ms)o
(,)g(with)g(or)e(without)j(modi\002-)-150 5687 y(cation,)g(and)e(use)g
(of)g(an)o(y)g(par)t(t)g(of)g(the)g(Softw)o(are)h(in)f(the)g(creation)i
(of)e(another)h(w)o(or)q(k,)h(are)e(per)r(mitted)i(without)f(f)m(ee)
-150 5786 y(subject)d(to)e(the)h(f)m(ollo)o(wing)i(conditions)f(1)f
(through)h(8)e(and)h(the)g(disclaimer)h(belo)o(w)g(:)p
eop
%%Page: 4 6
4 5 bop -150 -116 a Fn(Chapter)24 b(1:)k(Intr)n(oduction)3059
b(4)-105 236 y Fg(1.)60 b(Redistr)q(ib)n(utions)34 b(of)c(the)h(Softw)o
(are)g(as)g(source)g(code)o(,)h(in)e(whole)h(or)g(in)f(par)t(t,)i(with)
e(or)h(without)g(modi\002cation,)30 336 y(m)o(ust)24
b(retain)g(all)f(e)m(xisting)i(cop)m(yr)q(ight)h(notices)e(and)g(ref)m
(erences)h(to)f(this)f(licence)o(,)i(and)e(m)o(ust)h(be)g(accompanied)
30 435 y(b)n(y)d(a)g(cop)m(y)g(of)g(this)g(licence)o(.)31
b(Y)-13 b(ou)21 b(ma)m(y)h(rename)g(the)f(\002le)g(containing)h(this)f
(licence)h(and)f(change)i(all)d(ref)m(erences)30 535
y(to)30 b(it)g(accordingly)i(if)e(y)n(ou)h(need)g(to)l(.)46
b(Such)31 b(redistr)q(ib)n(utions)i(m)o(ust)e(be)g(under)g(ter)r(ms)g
(that)f(require)i(this)e(list)h(of)30 635 y(conditions)d(and)e(the)g
(disclaimer)h(belo)o(w)f(to)g(be)g(carr)q(ied)h(on)e(an)o(y)h
(subsequent)i(redistr)q(ib)n(ution.)-105 757 y(2.)60
b(Redistr)q(ib)n(utions)37 b(in)c(binar)s(y)h(f)m(or)r(m)g(\(of)g(the)f
(or)q(iginal)i(v)n(ersion)g(of)e(the)g(Softw)o(are)o(,)k(a)c
(modi\002ed)i(v)n(ersion)f(of)f(the)30 857 y(Softw)o(are)o(,)25
b(or)f(an)o(y)g(other)h(w)o(or)q(k)g(which)g(incor)s(por)o(ates)h(an)o
(y)e(par)t(t)g(of)h(the)f(Softw)o(are\),)i(m)o(ust)e(carr)s(y)h(in)f
(accompa-)30 956 y(n)o(ying)i(documentation)j(and/or)d(other)h(mater)q
(ials)g(a)f(notice)g(to)g(the)g(eff)m(ect)h(of)e(either)i(\(A\))f(or)f
(\(B\))h(belo)o(w)-5 b(.)64 1079 y(A.)61 b(This)27 b(or)q(iginal)i(v)n
(ersion)e(of)g(this)g(softw)o(are)h(w)o(as)f(wr)q(itten)h(b)n(y)f
Fj(<)p Fg(name\(s\))i(of)e(Cop)m(yr)q(ight)i(Holder\(s\))p
Fj(>)f Fg(and)g(is)210 1179 y(used)e(subject)h(to)f(the)g(disclaimer)h
(in)f(the)g(\002le)f Fj(<)p Fg(name)i(of)f(\002le)g(containing)h(the)f
(disclaimer)p Fj(>)p Fg(.)66 1301 y(B)n(.)61 b(The)26
b(par)t(ts)h(of)e(this)i(softw)o(are)g(which)f Fj(<)p
Fg(descr)q(ibe)i(their)f(role)f(in)g(y)n(our)g(softw)o(are)p
Fj(>)i Fg(w)o(ere)e(or)q(iginally)i(wr)q(itten)210 1401
y(b)n(y)d Fj(<)p Fg(name\(s\))g(of)g(Cop)m(yr)q(ight)h(Holder\(s\))p
Fj(>)h Fg(and)d(are)h(used)g(subject)g(to)g(the)f(disclaimer)i(in)e
(the)h(\002le)f Fj(<)p Fg(name)210 1500 y(of)i(\002le)f(containing)j
(the)e(disclaimer)p Fj(>)p Fg(.)30 1646 y(\(Y)-13 b(ou)27
b(m)o(ust)f(replace)h(each)f Fj(<)p Fg(...)p Fj(>)g Fg(with)g(the)g
(appropr)q(iate)j(inf)m(or)r(mation.\))30 1768 y(A)f(cop)m(y)h(of)g
(the)f(disclaimer)i(belo)o(w)f(m)o(ust)g(also)g(be)g(included.)41
b(Such)29 b(redistr)q(ib)n(utions)j(m)o(ust)d(be)f(under)i(ter)r(ms)30
1868 y(that)21 b(require)h(the)f(rele)m(v)n(ant)i(notice)e(\(A\))g(or)g
(\(B\))g(and)g(the)g(disclaimer)i(belo)o(w)e(to)g(be)g(carr)q(ied)h(on)
f(an)o(y)g(subsequent)30 1967 y(redistr)q(ib)n(ution.)30
2090 y(As)34 b(an)h(e)m(xception,)k(if)34 b(all)g(recipients)i(of)e(y)n
(our)i(distr)q(ib)n(ution)g(receiv)n(e)g(additional)g(r)q(ights)f
(under)h(condition)g(5,)30 2189 y(and)25 b(those)g(r)q(ights)h
(supersede)g(the)f(disclaimer)h(in)e(its)g(entirety)-9
b(,)26 b(then)f(y)n(ou)g(need)g(not)g(include)g(the)g(disclaimer)-5
b(,)30 2289 y(an)o(y)26 b(ref)m(erence)h(to)f(it,)g(or)f(the)h
(requirement)i(f)m(or)e(fur)t(ther)g(redistr)q(ib)n(utions)j(to)d(carr)
s(y)g(it.)-105 2411 y(3.)60 b(Unless)35 b(modi\002cations)h(to)e(the)g
(or)q(iginal)i(Softw)o(are)f(are)f(retained)i(f)m(or)e(the)g(e)m
(xclusiv)n(e)i(personal)f(use)f(of)g(the)30 2511 y(modi\002er)-5
b(,)23 b(each)e(source)g(code)g(\002le)f(that)h(has)f(been)h
(modi\002ed)h(m)o(ust)f(identify)g(the)f(or)q(iginal)i(source)f(v)n
(ersion)g(and)30 2611 y(carr)s(y)29 b(a)f(notice)h(descr)q(ibing)i(the)
d(nature)i(and)e(pur)s(pose)i(of)e(all)g(modi\002cations)j(and)e(the)g
(person)g(responsib)n(le)30 2710 y(f)m(or)36 b(them.)62
b(Where)36 b(modi\002ed)h(source)g(code)f(is)f(widely)i(redistr)q(ib)n
(uted)h(\(e)o(.g.)61 b(outside)37 b(the)f(modi\002er')-5
b(s)37 b(o)o(wn)30 2810 y(organisation\),)30 b(it)d(should)h(pref)m(er)
o(ab)n(ly)h(be)e(supplied)i(as)e(the)g(or)q(iginal)h(v)n(ersion)g(plus)
g(`patches')g(which)g(can)f(be)30 2910 y(applied)g(to)f(the)f(or)q
(iginal)j(v)n(ersion)e(to)g(obtain)g(the)g(modi\002ed)i(v)n(ersion.)
-105 3032 y(4.)60 b(If)37 b(a)g(modi\002ed)h(v)n(ersion)g(of)f(the)h
(Softw)o(are)g(is)f(distr)q(ib)n(uted)i(in)e(an)o(y)g(f)m(or)r(m,)k(it)
c(m)o(ust)h(not)f(be)g(misrepresented)30 3132 y(\(whether)23
b(b)n(y)f(the)g(method)i(of)d(distr)q(ib)n(ution)k(or)c(b)n(y)h(an)o(y)
g(related)h(adv)n(er)t(tisement)h(or)e(documentation\))j(as)d(being)30
3231 y(the)29 b(or)q(iginal)g(v)n(ersion.)41 b(Both)29
b(the)g(documentation)i(accompan)o(ying)g(the)e(softw)o(are)g(and)g(an)
o(y)f(adv)n(er)t(tisement)30 3331 y(related)23 b(to)f(the)h(distr)q(ib)
n(ution)h(m)o(ust)f(e)m(xpressly)h(state)f(that)f(the)h(distr)q(ib)n
(uted)h(softw)o(are)f(is)f(not)g(the)h(or)q(iginal)g(w)o(or)q(k,)30
3430 y(and)k(m)o(ust)h(identify)g(both)g(the)f(or)q(iginal)i(w)o(or)q
(k)f(\(b)n(y)f(name)h(and)f(v)n(ersion\))h(and)g(the)f(nature)h(and)f
(pur)s(pose)i(of)e(all)30 3530 y(modi\002cations)h(made)o(.)-105
3653 y(5.)60 b(Y)-13 b(ou)33 b(ma)m(y)g(off)m(er)g(to)g(an)o(y)f(par)t
(ty)h(\(and)g(charge)g(a)f(f)m(ee)h(f)m(or\))g(additional)h(w)o(arr)o
(anty)-9 b(,)36 b(liability)d(r)q(ights)h(and/or)f(sup-)30
3752 y(por)t(t)f(f)m(or)g(the)g(Softw)o(are)i(\(or)e(a)f(w)o(or)q(k)i
(der)q(iv)n(ed)g(from)g(it\).)50 b(An)o(y)32 b(such)h(off)m(er)f(made)h
(m)o(ust)g(be)f(entirely)h(on)f(y)n(our)30 3852 y(o)o(wn)c(behalf)m(,)i
(and)e(y)n(ou)h(m)o(ust)f(indemnify)i(the)e(Cop)m(yr)q(ight)i
(Holder\(s\))g(and)e(all)g(other)h(par)t(ties)f(through)h(whose)30
3951 y(redistr)q(ib)n(utions)g(y)n(ou)d(ha)n(v)n(e)g(receiv)n(ed)h(the)
f(Softw)o(are)h(f)m(or)f(an)o(y)g(liability)g(ar)q(ising)h(out)f(of)g
(such)g(an)g(off)m(er)-5 b(.)-105 4074 y(6.)60 b(This)32
b(list)f(of)g(conditions)i(and)f(the)g(disclaimer)h(belo)o(w)-5
b(,)32 b(when)g(applied)h(either)f(to)f(the)h(Softw)o(are)g(as)g(a)f
(whole)30 4174 y(or)36 b(to)f(an)o(y)h(par)t(t)g(of)g(the)g(Softw)o
(are)o(,)j(ma)m(y)d(only)g(be)g(modi\002ed)i(b)n(y)d(or)h(with)g(the)g
(e)m(xpress)i(per)r(mission)g(of)d(the)30 4273 y(Cop)m(yr)q(ight)28
b(Holder\(s\).)-105 4396 y(7.)60 b(The)30 b(Cop)m(yr)q(ight)i
(Holder\(s\))g(retain)e(all)g(r)q(ights)h(to)f(the)g(Softw)o(are)o(,)i
(including)f(without)g(limitation)h(the)e(r)q(ights)h(to)30
4495 y(use)f(the)f(Softw)o(are)i(f)m(or)e(an)o(y)h(pur)s(pose)o(,)h(to)
e(create)h(modi\002ed)h(and/or)f(enhanced)h(v)n(ersions)g(of)e(the)g
(Softw)o(are)o(,)30 4595 y(and)d(to)g(distib)n(ute)h(such)f(v)n
(ersions)h(under)g(ter)r(ms)f(diff)m(erent)i(to)d(those)i(in)e(this)h
(licence)o(.)-105 4717 y(8.)60 b(Except)35 b(as)g(required)h(b)n(y)e
(this)h(licence)o(,)i(the)e(name\(s\))g(of)f(the)h(Cop)m(yr)q(ight)i
(Holder\(s\))f(ma)m(y)f(not)f(be)h(used)g(to)30 4817
y(endorse)24 b(or)e(promote)i(products)g(der)q(iv)n(ed)f(from)g(the)g
(Softw)o(are)g(without)h(their)e(e)m(xpress)i(per)r(mission)h(obtained)
30 4917 y(in)h(adv)n(ance)o(.)-150 5164 y(==)f(Star)t(t)h(of)f
(disclaimer)j(==)-150 5388 y(BECA)-5 b(USE)24 b(THE)e(SOFTW)-5
b(ARE)25 b(IS)c(PR)n(O)-5 b(VIDED)25 b(FREE)d(OF)g(CHARGE,)h(THERE)g
(IS)f(NO)g(W)-5 b(ARRANTY)24 b(FOR)e(IT)-11 b(,)-150
5487 y(T)l(O)24 b(THE)g(MAXIMUM)i(EXTENT)f(THA)-11 b(T)25
b(APPLICABLE)h(LA)-5 b(W)25 b(ALLO)m(WS)n(.)h(UNLESS)f(O)l(THER)m(WISE)
i(ST)-11 b(A)g(TED)26 b(IN)-150 5587 y(WRITING)k(OR)f(REQ)o(UIRED)i(BY)
d(APPLICABLE)k(LA)-5 b(W)e(,)29 b(THE)g(COPYRIGHT)i(HOLDER\(S\))g
(AND/OR)f(O)l(THER)-150 5687 y(P)-11 b(AR)m(TIES)44 b(PR)n(O)-5
b(VIDE)44 b(THE)f(SOFTW)-5 b(ARE)45 b(`AS)d(IS')g(AND)g(DISCLAIM)i(ALL)
e(W)-5 b(ARRANTIES)n(,)46 b(EITHER)d(EX-)-150 5786 y(PRESSED)23
b(OR)e(IMPLIED)-6 b(,)22 b(INCLUDING)g(WITHOUT)h(LIMIT)-11
b(A)g(TION)23 b(W)-5 b(ARRANTIES)24 b(THA)-11 b(T)22
b(THE)f(SOFTW)-5 b(ARE)p eop
%%Page: 5 7
5 6 bop -150 -116 a Fn(Chapter)24 b(1:)k(Intr)n(oduction)3059
b(5)-150 236 y Fg(IS)37 b(FREE)h(OF)f(DEFECTS)n(,)i(MERCHANT)-11
b(ABLE)40 b(OR)d(FIT)g(FOR)h(A)e(P)-11 b(AR)m(TICULAR)40
b(PURPOSE.)f(THE)f(USER)-150 336 y(BEARS)43 b(THE)f(ENTIRE)i(RISK)e(AS)
g(T)l(O)h(THE)f(Q)o(U)l(ALITY)-13 b(,)45 b(A)m(CCURA)m(CY)f(AND)f
(PERFORMANCE)i(OF)d(THE)-150 435 y(SOFTW)-5 b(ARE)37
b(AND)e(THE)g(COST)h(OF)e(ANY)h(NECESSAR)-5 b(Y)38 b(SER)-5
b(VICING,)37 b(REP)-11 b(AIR)36 b(OR)f(CORRECTION)j(IN)-150
535 y(THE)26 b(EVENT)h(THA)-11 b(T)27 b(THE)f(SOFTW)-5
b(ARE)28 b(SHOULD)f(PR)n(O)-5 b(VE)28 b(DEFECTIVE.)-150
759 y(IN)22 b(NO)g(EVENT)h(UNLESS)h(REQ)o(UIRED)g(BY)e(APPLICABLE)j(LA)
-5 b(W)23 b(OR)f(A)m(GREED)i(T)l(O)f(IN)f(WRITING)h(WILL)g(ANY)-150
859 y(COPYRIGHT)h(HOLDER,)f(OR)f(ANY)g(O)l(THER)h(P)-11
b(AR)m(TY)23 b(WHO)f(MA)-9 b(Y)22 b(MODIFY)h(AND/OR)g(REDISTRIB)o(UTE)i
(THE)-150 959 y(SOFTW)-5 b(ARE,)39 b(BE)d(LIABLE)i(T)l(O)e(Y)-8
b(OU)37 b(OR)g(T)l(O)f(ANY)h(O)l(THER)h(P)-11 b(AR)m(TY)37
b(FOR)g(D)l(AMA)m(GES)i(OF)d(ANY)g(CHAR-)-150 1058 y(A)m(CTER,)30
b(INCLUDING)g(WITHOUT)g(LIMIT)-11 b(A)g(TION)31 b(ANY)e(GENERAL,)h
(SPECIAL,)g(INCIDENT)-11 b(AL)31 b(OR)d(CONSE-)-150 1158
y(Q)o(UENTIAL)22 b(D)l(AMA)m(GES)h(WHICH)f(ARISE)f(FR)n(OM)g(THE)g(USE)
g(OF)f(OR)g(INABILITY)j(T)l(O)d(USE)h(THE)g(SOFTW)-5
b(ARE)-150 1257 y(\(INCLUDING)34 b(WITHOUT)g(LIMIT)-11
b(A)g(TION)35 b(LOSS)e(OF)f(D)l(A)-11 b(T)g(A)33 b(OR)g(D)l(A)-11
b(T)g(A)33 b(BEING)g(RENDERED)h(INA)m(CCURA)-11 b(TE)-150
1357 y(OR)32 b(LOSSES)i(SUST)-11 b(AINED)35 b(BY)d(Y)-8
b(OU)33 b(OR)f(THIRD)h(P)-11 b(AR)m(TIES)34 b(OR)f(A)f(F)-7
b(AILURE)33 b(OF)f(THE)h(SOFTW)-5 b(ARE)35 b(T)l(O)-150
1457 y(OPERA)-11 b(TE)38 b(WITH)e(ANY)g(O)l(THER)i(SOFTW)-5
b(ARE\),)39 b(EVEN)d(IF)g(SUCH)g(COPYRIGHT)j(HOLDER)e(OR)f(O)l(THER)
-150 1556 y(P)-11 b(AR)m(TY)27 b(HAS)f(BEEN)h(AD)-6 b(VISED)27
b(OF)f(THE)g(POSSIBILITY)j(OF)c(SUCH)i(D)l(AMA)m(GES)n(.)-150
1780 y(==)e(End)h(of)g(disclaimer)h(==)p eop
%%Page: 6 8
6 7 bop -150 -116 a Fn(Chapter)24 b(2:)k(Installation)3112
b(6)-150 236 y Fk(2)71 b(Installation)-25 560 y Fn(The)25
b(softwar)n(e)j(is)e(distributed)i(as)e(sour)n(ce)g(code)h(which)f(has)
f(to)h(be)g(compiled.)38 b(The)26 b(sour)n(ce)g(code)h(is)f(supplied)
-150 660 y(in)c(the)h(form)g(of)g(a)g(gzipped)i(tar)e(\002le,)f(which)h
(unpacks)g(to)h(a)e(subdir)n(ectory)j(identifying)g(the)e(name)f(and)h
(version)g(of)-150 759 y(the)g(pr)n(ogram.)-25 983 y(After)g(unpacking)
h(the)f(sour)n(ce)g(code,)h(change)f(dir)n(ectory)i(into)e(it,)g(and)g
(type)90 1212 y Fj(./configure)-25 1436 y Fn(This)36
b(is)g(a)g(shell)g(script)h(that)g(automatically)h(determines)g(the)e
(system)h(type.)68 b(Ther)n(e)36 b(is)g(a)g(single)h(optional)-150
1536 y(parameter)-7 b(,)28 b Fj(--prefix)h Fn(which)d(indicates)i(the)f
(dir)n(ectory)h(tr)n(ee)f(wher)n(e)g(the)g(softwar)n(e)h(should)f(be)f
(installed.)41 b(For)-150 1635 y(example,)90 1863 y Fj(./configure)58
b(--prefix=/opt/free)-25 2088 y Fn(will)45 b(install)i(the)e
Fj(chronyd)h Fn(daemon)g(into)f(/opt/fr)n(ee/sbin)i(and)d(the)h(chr)n
(onyc)g(contr)n(ol)h(pr)n(ogram)g(into)-150 2187 y(/opt/fr)n(ee/bin.)29
b(The)24 b(default)g(value)f(for)g(the)g(pr)n(e\002x)g(is)g
(/usr/local.)-25 2411 y(If)k(the)h(softwar)n(e)i(cannot)e(\(yet\))h(be)
f(built)g(on)f(your)h(system,)h(an)f(err)n(or)f(message)j(will)e(be)g
(shown.)42 b(Otherwise,)-150 2511 y(the)23 b(\002les)h(`)p
Fj(options.h)p Fn(')h(and)e(`)p Fj(Makefile)p Fn(')i(will)f(be)f
(generated.)-25 2735 y(Now)g(type)90 2963 y Fj(make)-25
3188 y Fn(to)g(build)g(the)g(pr)n(ograms.)-25 3412 y(Once)h(the)h(pr)n
(ograms)h(have)f(been)g(successfully)i(compiled,)g(they)e(need)g(to)h
(be)f(installed)i(in)d(their)h(tar)n(get)i(loca-)-150
3511 y(tions.)50 b(This)30 b(step)h(normally)g(needs)g(to)f(be)g
(performed)h(by)f(the)g(super)o(user)-7 b(,)32 b(and)e(r)n(equir)n(es)g
(the)g(following)i(com-)-150 3611 y(mand)23 b(to)g(be)g(enter)n(ed.)90
3839 y Fj(make)55 b(install)-25 4064 y Fn(Now)28 b(that)f(the)h
(softwar)n(e)i(is)d(successfully)i(installed,)h(the)e(next)f(step)i(is)
e(to)h(set)g(up)f(a)h(con\002guration)f(\002le.)42 b(The)-150
4163 y(contents)25 b(of)e(this)h(depend)h(on)e(the)g(network)i(envir)n
(onment)f(in)f(which)h(the)f(computer)h(operates.)32
b(T)-8 b(ypical)25 b(scenar)n(-)-150 4263 y(ios)f(ar)n(e)f(described)i
(in)d(the)h(following)i(section)g(of)e(the)g(document.)p
eop
%%Page: 7 9
7 8 bop -150 -116 a Fn(Chapter)24 b(3:)k(T)-8 b(ypical)24
b(operating)h(scenarios)2471 b(7)-150 236 y Fk(3)71 b(T)-13
b(ypical)46 b(operating)g(scenarios)-150 749 y Fm(3.1)59
b(Computers)40 b(connected)g(to)g(the)g(internet)-25
981 y Fn(In)20 b(this)i(section)g(we)g(discuss)g(how)f(to)g(con\002gur)
n(e)g(chr)n(ony)g(for)g(computers)h(that)g(have)f(permanent)g
(connections)-150 1080 y(to)g(the)f(internet)i(\(or)e(to)h(any)f
(network)i(containing)f(tr)o(ue)f(NTP)h(servers)g(which)f(ultimately)j
(derive)e(their)f(time)h(fr)n(om)-150 1180 y(a)i(r)n(efer)n(ence)h
(clock\).)-25 1411 y(T)-8 b(o)22 b(operate)i(in)d(this)i(mode,)f(you)g
(will)i(need)e(to)h(know)f(the)h(names)f(of)g(the)g(NTP)h(server)f
(machines)g(you)g(wish)h(to)-150 1511 y(use.)28 b(Y)-8
b(ou)23 b(may)g(be)g(able)g(to)h(\002nd)e(names)h(of)g(suitable)i
(servers)f(by)e(one)i(of)f(the)g(following)i(methods:)-75
1742 y Fl(\017)60 b Fn(Y)-8 b(our)25 b(institution)j(may)e(alr)n(eady)h
(operate)g(servers)g(on)e(its)i(network.)37 b(Contact)27
b(your)f(system)h(administrator)30 1842 y(to)d(\002nd)e(out.)-75
1973 y Fl(\017)60 b Fn(Y)-8 b(our)22 b(ISP)h(pr)n(obably)h(has)f(one)g
(or)g(mor)n(e)g(NTP)g(servers)h(available)h(for)e(its)h(customers.)-75
2105 y Fl(\017)60 b Fn(Somewher)n(e)32 b(under)e(the)h(NTP)f(homepage)i
(ther)n(e)g(is)f(a)g(list)h(of)f(public)g(stratum)g(1)g(and)f(stratum)i
(2)e(servers.)30 2204 y(Y)-8 b(ou)25 b(should)g(\002nd)g(one)g(or)g
(mor)n(e)g(servers)h(that)g(ar)n(e)f(near)g(to)h(you)f(\227)g(check)h
(that)f(their)h(access)g(policy)h(allows)30 2304 y(you)c(to)g(use)g
(their)h(facilities.)-25 2567 y(Assuming)f(that)g(you)f(have)h(found)f
(some)h(servers,)g(you)g(need)g(to)g(set)g(up)f(a)h(con\002guration)g
(\002le)f(to)i(r)o(un)d(chr)n(ony)-10 b(.)-150 2667 y(The)36
b(\(compiled-in\))j(default)e(location)h(for)e(this)h(\002le)g(is)f(`)p
Fj(/etc/chrony.conf)p Fn('.)73 b(Assuming)37 b(that)f(your)g(ntp)-150
2767 y(servers)24 b(ar)n(e)f(called)h Fj(a.b.c)g Fn(and)f
Fj(d.e.f)p Fn(,)h(your)f(`)p Fj(chrony.conf)p Fn(')j(\002le)d(could)g
(contain)h(as)f(a)g(minimum)90 3002 y Fj(server)56 b(a.b.c)90
3106 y(server)g(d.e.f)90 3209 y(server)g(g.h.i)-25 3441
y Fn(However)-7 b(,)40 b(you)c(will)i(pr)n(obably)f(want)g(to)g
(include)f(some)h(of)g(the)f(other)g(dir)n(ectives)j(described)f(later)
-7 b(.)69 b(The)-150 3540 y(following)30 b(dir)n(ectives)g(will)f(be)f
(particularly)h(useful)f(:)37 b Fj(driftfile)p Fn(,)31
b Fj(commandkey)p Fn(,)g Fj(keyfile)p Fn(.)45 b(The)28
b(smallest)-150 3640 y(useful)23 b(con\002guration)g(\002le)g(would)h
(look)g(something)g(like)90 3875 y Fj(server)56 b(a.b.c)90
3979 y(server)g(d.e.f)90 4083 y(server)g(g.h.i)90 4187
y(keyfile)g(/etc/chrony.keys)90 4290 y(commandkey)h(1)90
4394 y(driftfile)g(/etc/chrony.drift)-150 4780 y Fm(3.2)i(Infrequent)38
b(connection)j(to)f(true)f(NTP)g(servers)-25 5011 y Fn(In)22
b(this)h(section)h(we)f(discuss)h(how)f(to)g(con\002gur)n(e)g(chr)n
(ony)f(for)h(computers)h(that)f(have)g(occasional)h(connections)-150
5110 y(to)g(the)f(internet.)-150 5455 y Fh(3.2.1)55 b(Setting)39
b(up)d(the)h(con\002guration)j(\002le)d(for)g(infrequent)i(connections)
-25 5687 y Fn(As)24 b(in)g(the)g(pr)n(evious)h(section,)g(you)f(will)i
(need)e(access)h(to)g(NTP)f(servers)g(on)g(the)g(internet.)32
b(The)24 b(same)h(r)n(emarks)-150 5786 y(apply)f(for)f(how)g(to)h
(\002nd)e(them.)p eop
%%Page: 8 10
8 9 bop -150 -116 a Fn(Chapter)24 b(3:)k(T)-8 b(ypical)24
b(operating)h(scenarios)2471 b(8)-25 236 y(In)26 b(this)g(case,)i(you)e
(will)h(need)g(some)g(additional)h(con\002guration)f(to)g(tell)g
Fj(chronyd)h Fn(when)e(the)h(connection)g(to)-150 336
y(the)g(internet)h(goes)g(up)e(and)h(down.)41 b(This)27
b(saves)h(the)f(pr)n(ogram)h(fr)n(om)f(continuously)h(trying)f(to)h
(poll)g(the)f(servers)-150 435 y(when)c(they)g(ar)n(e)h(inaccessible.)
-25 667 y(Again,)38 b(assuming)e(that)g(your)f(ntp)h(servers)g(ar)n(e)g
(called)h Fj(a.b.c)f Fn(and)g Fj(d.e.f)p Fn(,)j(your)c(`)p
Fj(chrony.conf)p Fn(')k(\002le)-150 766 y(would)24 b(need)f(to)h
(contain)f(something)h(like)90 1002 y Fj(server)56 b(a.b.c)90
1105 y(server)g(d.e.f)90 1209 y(server)g(g.h.i)-25 1440
y Fn(However)-7 b(,)24 b(the)f(following)i(issues)f(need)f(to)h(be)f
(addr)n(essed:)-98 1671 y(1.)60 b(Y)-8 b(our)26 b(computer)h(pr)n
(obably)i(doesn't)f(have)e(DNS)g(access)i(whilst)g(of)n(\003ine)g(to)f
(turn)f(the)h(machine)f(names)h(into)30 1771 y(IP)c(addr)n(esses.)-98
1903 y(2.)60 b(Y)-8 b(our)21 b(computer)h(will)h(keep)g(trying)f(to)g
(contact)h(the)f(servers)g(to)h(obtain)f(timestamps,)i(even)e(whilst)h
(of)n(\003ine.)28 b(If)30 2002 y(you)22 b(operate)h(a)f(dial-on-demand)
i(system,)f(things)g(ar)n(e)f(even)g(worse,)h(because)f(the)g(link)g
(to)h(the)f(internet)h(will)30 2102 y(keep)h(getting)h(established.)-25
2365 y(For)30 b(this)h(r)n(eason,)i(it)e(would)h(be)e(better)i(to)f
(specify)i(this)e(part)g(of)g(your)f(con\002guration)h(\002le)g(in)f
(the)h(following)-150 2465 y(way:)90 2700 y Fj(server)56
b(1.2.3.4)g(offline)90 2804 y(server)g(5.6.7.8)g(offline)90
2907 y(server)g(9.10.11.12)h(offline)-25 3139 y Fn(Because)28
b(numeric)f(IP)g(addr)n(esses)j(have)d(been)h(used,)g(the)g(\002rst)f
(pr)n(oblem)i(is)e(over)n(come.)43 b(The)28 b Fj(offline)h
Fn(key-)-150 3238 y(wor)n(d)j(indicates)h(that)f(the)g(servers)g(start)
g(in)f(an)g(of)n(\003ine)h(state,)j(and)c(that)h(they)g(should)f(not)h
(be)f(contacted)j(until)-150 3338 y Fj(chronyd)25 b Fn(r)n(eceives)f
(noti\002cation)h(that)f(the)f(link)g(to)h(the)f(internet)g(is)h(pr)n
(esent.)-25 3569 y(In)g(or)n(der)i(to)g(notify)g Fj(chronyd)h
Fn(of)e(the)g(pr)n(esence)i(of)e(the)h(link,)f(you)g(will)h(need)g(to)g
(be)f(able)g(to)h(log)g(in)f(to)g(it)h(with)-150 3669
y(the)i(pr)n(ogram)g(chr)n(onyc.)42 b(T)-8 b(o)28 b(do)g(this,)h
Fj(chronyd)h Fn(needs)e(to)g(be)g(con\002gur)n(ed)g(with)g(an)f
(administrator)j(passwor)n(d.)-150 3768 y(T)-8 b(o)25
b(set)h(up)f(an)g(administrator)i(passwor)n(d,)h(you)d(can)g(cr)n(eate)
h(a)f(\002le)h(`)p Fj(/etc/chrony.keys)p Fn(')j(containing)e(a)e
(single)-150 3868 y(line)90 4103 y Fj(1)55 b(xyzzy)-25
4334 y Fn(and)22 b(add)i(the)f(following)i(line)e(to)h(`)p
Fj(/etc/chrony.conf)p Fn(')j(\(the)d(or)n(der)f(of)g(the)h(lines)f
(does)h(not)g(matter\))90 4570 y Fj(commandkey)57 b(1)-25
4801 y Fn(The)23 b(smallest)i(useful)e(con\002guration)g(\002le)g
(would)h(look)g(something)g(like)90 5036 y Fj(server)56
b(1.2.3.4)g(offline)90 5140 y(server)g(5.6.7.8)g(offline)90
5244 y(server)g(9.10.11.12)h(offline)90 5348 y(keyfile)f
(/etc/chrony.keys)90 5451 y(commandkey)h(1)90 5555 y(driftfile)g
(/etc/chrony.drift)-25 5786 y Fn(The)23 b(next)f(section)j(describes)g
(how)e(to)g(tell)h Fj(chronyd)h Fn(when)e(the)g(internet)h(link)f(goes)
h(up)f(and)f(down.)p eop
%%Page: 9 11
9 10 bop -150 -116 a Fn(Chapter)24 b(3:)k(T)-8 b(ypical)24
b(operating)h(scenarios)2471 b(9)-150 236 y Fh(3.2.2)55
b(How)38 b(to)f(tell)g(chronyd)h(when)g(the)f(internet)h(link)f(is)g
(available.)-25 463 y Fn(T)-8 b(o)32 b(use)f(this)i(option,)i(you)d
(will)h(need)f(to)g(con\002gur)n(e)g(a)g(command)g(key)h(in)e
Fj(chronyd's)j Fn(con\002guration)f(\002le)-150 562 y(`)p
Fj(/etc/chrony.conf)p Fn(',)27 b(as)d(described)g(in)f(the)g(pr)n
(evious)h(section.)-25 789 y(T)-8 b(o)31 b(tell)i Fj(chronyd)h
Fn(when)d(to)h(start)h(and)f(\002nish)f(sampling)i(the)e(servers,)k
(the)c Fj(online)i Fn(and)f Fj(offline)h Fn(com-)-150
889 y(mands)26 b(of)g(chr)n(onyc)f(need)h(to)g(be)g(used.)36
b(T)-8 b(o)26 b(give)g(an)g(example)g(of)g(their)g(use,)f(we)i(assume)f
(that)g Fj(pppd)g Fn(is)g(the)g(pr)n(o-)-150 988 y(gram)f(being)h(used)
g(to)g(connect)g(to)g(the)f(internet,)h(and)g(that)g(chr)n(onyc)f(has)h
(been)f(installed)i(at)f(its)g(default)h(location)-150
1088 y(`)p Fj(/usr/local/bin/chronyc)q Fn('.)44 b(W)-8
b(e)26 b(also)i(assume)f(that)g(the)f(command)h(key)g(has)g(been)f(set)
h(up)f(as)h(described)-150 1188 y(in)c(the)g(pr)n(evious)h(section.)-25
1414 y(In)e(the)h(\002le)h(`)p Fj(/etc/ppp/ip-up)p Fn(')j(we)c(add)g
(the)h(command)f(sequence)90 1645 y Fj(cat)55 b(<<EOF)h(|)f
(/usr/local/bin/chronyc)90 1749 y(password)i(xyzzy)90
1852 y(online)90 1956 y(EOF)-25 2183 y Fn(and)22 b(in)h(the)g(\002le)g
(`)p Fj(/etc/ppp/ip-down)p Fn(')28 b(we)23 b(add)h(the)f(sequence)90
2414 y Fj(cat)55 b(<<EOF)h(|)f(/usr/local/bin/chronyc)90
2517 y(password)i(xyzzy)90 2621 y(offline)90 2725 y(EOF)-25
2952 y(chronyd's)25 b Fn(polling)g(of)f(the)f(servers)i(will)f(now)g
(only)g(occur)f(whilst)i(the)e(machine)h(is)g(actually)g(connected)h
(to)-150 3051 y(the)e(Internet.)-150 3418 y Fm(3.3)59
b(Isolated)39 b(networks)-25 3645 y Fn(In)25 b(this)h(section)i(we)e
(discuss)h(how)f(to)g(con\002gur)n(e)g(chr)n(ony)g(for)f(computers)i
(that)g(never)e(have)h(network)h(conec-)-150 3744 y(tivity)e(to)e(any)g
(computer)h(which)f(ultimately)i(derives)f(its)g(time)f(fr)n(om)h(a)e
(r)n(efer)n(ence)j(clock.)-25 3971 y(In)30 b(this)i(situation,)i(one)d
(computer)g(is)g(selected)j(to)d(be)g(the)g(master)h(timeserver)-7
b(.)53 b(The)31 b(other)g(computers)h(ar)n(e)-150 4070
y(either)24 b(dir)n(ect)g(clients)g(of)f(the)h(master)-7
b(,)23 b(or)g(clients)h(of)g(clients.)-25 4297 y(The)34
b(rate)g(value)h(in)f(the)g(master)7 b('s)35 b(drift)g(\002le)f(needs)h
(to)g(be)f(set)h(to)g(the)f(average)h(rate)g(at)f(which)h(the)f(master)
-150 4397 y(gains)e(or)f(loses)i(time.)54 b Fj(chronyd)33
b Fn(includes)f(support)g(for)g(this,)h(in)e(the)h(form)f(of)h(the)f
Fj(manual)i Fn(dir)n(ective)g(in)e(the)-150 4496 y(con\002guration)23
b(\002le)g(and)g(the)g Fj(settime)i Fn(command)e(in)g(the)g
Fj(chronyc)i Fn(pr)n(ogram.)-25 4723 y(If)19 b(the)h(master)g(is)g(r)n
(ebooted,)i Fj(chronyd)f Fn(can)f(r)n(e-r)n(ead)g(the)g(drift)g(rate)g
(fr)n(om)g(the)g(drift)g(\002le.)27 b(However)-7 b(,)21
b(the)f(master)-150 4822 y(has)25 b(no)f(accurate)i(estimate)h(of)d
(the)h(curr)n(ent)g(time.)34 b(T)-8 b(o)25 b(get)g(ar)n(ound)g(this,)g
(the)g(system)i(can)d(be)h(con\002gur)n(ed)g(so)g(that)-150
4922 y(the)f(master)g(can)f(initially)j(set)e(itself)h(to)f(a)g
(`majority-vote')i(of)e(selected)i(clients')f(times;)f(this)g(allows)i
(the)d(clients)i(to)-150 5022 y(`\003ywheel')f(the)g(master)f(acr)n
(oss)i(its)e(outage.)-25 5248 y(A)d(typical)j(con\002guration)e(\002le)
g(for)f(the)h(master)g(\(called)h Fj(master)p Fn(\))h(might)e(be)f
(\(assuming)h(the)g(clients)h(ar)n(e)f(in)f(the)-150
5348 y(192.168.165.x)j(subnet)h(and)e(that)i(the)f(master)7
b('s)24 b(addr)n(ess)h(is)e(192.168.169.170\))90 5579
y Fj(driftfile)57 b(/etc/chrony.drift)90 5682 y(commandkey)g(25)90
5786 y(keyfile)f(/etc/chrony.keys)p eop
%%Page: 10 12
10 11 bop -150 -116 a Fn(Chapter)24 b(3:)k(T)-8 b(ypical)24
b(operating)h(scenarios)2426 b(10)90 236 y Fj(initstepslew)58
b(10)d(client1)h(client3)g(client6)90 340 y(local)g(stratum)g(8)90
444 y(manual)90 548 y(allow)g(192.168.165)-25 772 y Fn(For)27
b(the)g(clients)h(that)f(have)g(to)h(r)n(esynchr)n(onise)g(the)g
(master)f(when)g(it)g(r)n(estarts,)j(the)d(con\002guration)g(\002le)g
(might)-150 872 y(be)90 1100 y Fj(server)56 b(master)90
1204 y(driftfile)h(/etc/chrony.drift)90 1308 y(logdir)f
(/var/log/chrony)90 1411 y(log)f(measurements)j(statistics)f(tracking)
90 1515 y(keyfile)f(/etc/chrony.keys)90 1619 y(commandkey)h(24)90
1723 y(local)f(stratum)g(10)90 1827 y(initstepslew)i(20)d(master)90
1930 y(allow)h(192.168.169.170)-25 2155 y Fn(The)34 b(r)n(est)h(of)g
(the)f(clients)i(would)f(be)f(the)g(same,)k(except)d(that)g(the)f
Fj(local)h Fn(and)g Fj(allow)g Fn(dir)n(ectives)i(ar)n(e)d(not)-150
2254 y(r)n(equir)n(ed.)-150 2612 y Fm(3.4)59 b(The)40
b(home)g(PC)g(with)f(a)h(dial-up)f(connection)-150 2937
y Fh(3.4.1)55 b(Assumptions/how)40 b(the)d(software)i(works)-25
3161 y Fn(This)27 b(section)h(considers)g(the)f(home)g(computer)h
(which)f(has)g(a)f(dial-up)i(connection.)41 b(It)27 b(assumes)h(that)f
(Linux)-150 3261 y(is)h(r)o(un)f(exclusively)i(on)f(the)g(computer)-7
b(.)44 b(Dual-boot)29 b(systems)h(may)e(work;)i(it)e(depends)i(what)e
(\(if)g(anything\))g(the)-150 3360 y(other)23 b(system)i(does)f(to)f
(the)g(system's)i(r)n(eal-time)g(clock.)-25 3585 y(Much)c(of)h(the)h
(con\002guration)g(for)f(this)h(case)g(is)g(discussed)h(earlier)f
(\(see)g(Section)g(3.2)f([Infr)n(equent)h(connection],)-150
3684 y(page)29 b(7\).)44 b(This)28 b(section)i(addr)n(esses)g
(speci\002cally)h(the)d(case)h(of)f(a)g(computer)h(which)f(is)g(turned)
g(of)n(f)h(between)h('ses-)-150 3784 y(sions'.)-25 4008
y(In)23 b(this)h(case,)g Fj(chronyd)h Fn(r)n(elies)g(on)f(the)f
(computer)7 b('s)25 b(r)n(eal-time)g(clock)g(\(R)m(TC\))f(to)g
(maintain)g(the)g(time)g(between)-150 4108 y(the)f(periods)i(when)d(it)
i(is)f(power)n(ed)i(up.)j(The)23 b(arrangement)g(is)h(shown)f(in)f(the)
i(\002gur)n(e)e(below)-8 b(.)742 4336 y Fj(trim)55 b(if)g(required)1414
b(PSTN)416 4440 y(+----------------------)q(----)q(-+)821
b(+----------+)416 4544 y(|)1466 b(|)815 b(|)543 b(|)416
4648 y(v)1466 b(|)815 b(|)543 b(|)90 4751 y(+---------+)1089
b(+-------+)383 b(+-----+)273 b(+---+)90 4855 y(|)55
b(System's|)111 b(measure)56 b(error/)219 b(|chronyd|)383
b(|modem|)273 b(|ISP|)90 4959 y(|real-time|-----------)q(----)q(---)q
(->|)387 b(|-------|)274 b(|)d(|)164 b(|)90 5063 y(|)109
b(clock)h(|)163 b(drift)56 b(rate)381 b(+-------+)i(+-----+)273
b(+---+)90 5166 y(+---------+)1252 b(^)1412 b(|)416 5270
y(|)1466 b(|)1412 b(|)416 5374 y(+----------------------)q(----)q(-+)
984 b(--o-----o---)579 5478 y(set)55 b(time)g(at)g(boot)h(up)1466
b(|)2805 5582 y(+----------+)2805 5685 y(|NTP)55 b(server|)2805
5789 y(+----------+)p eop
%%Page: 11 13
11 12 bop -150 -116 a Fn(Chapter)24 b(3:)k(T)-8 b(ypical)24
b(operating)h(scenarios)2430 b(1)-5 b(1)-25 236 y(When)25
b(the)h(computer)g(is)g(connected)g(to)g(the)g(Internet)g(\(via)g(the)g
(modem\),)h Fj(chronyd)g Fn(has)e(access)i(to)f(external)-150
336 y(NTP)20 b(servers)h(which)e(it)i(makes)g(measur)n(ements)g(fr)n
(om.)27 b(These)21 b(measur)n(ements)g(ar)n(e)f(saved,)i(and)d
(straight-line)j(\002ts)-150 435 y(ar)n(e)g(performed)g(on)f(them)h(to)
g(pr)n(ovide)h(an)e(estimate)j(of)d(the)h(computer)7
b('s)22 b(time)h(err)n(or)e(and)g(rate)h(of)g(gaining/losing)-150
535 y(time.)-25 759 y(When)f(the)g(computer)h(is)f(taken)h(of)n
(\003ine)g(fr)n(om)g(the)f(Internet,)h(the)f(best)h(estimate)i(of)d
(the)h(gain/loss)g(rate)g(is)f(used)-150 859 y(to)j(fr)n(ee-r)o(un)e
(the)i(computer)f(until)g(it)h(next)f(goes)h(online.)-25
1083 y(Whilst)29 b(the)f(computer)g(is)g(r)o(unning,)g
Fj(chronyd)h Fn(makes)g(measur)n(ements)g(of)f(the)g(r)n(eal-time)i
(clock)f(\(R)m(TC\))f(\(via)-150 1183 y(the)f(`)p Fj(/dev/rtc)p
Fn(')i(interface,)f(which)f(must)g(be)f(compiled)j(into)e(the)g
(kernel\).)40 b(An)26 b(estimate)j(is)e(made)g(of)g(the)g(R)m(TC)-150
1282 y(err)n(or)20 b(at)g(a)f(particular)i(R)m(TC)f(second,)h(and)f
(the)f(rate)i(at)f(which)f(the)h(R)m(TC)g(gains)g(or)g(loses)h(time)g
(r)n(elative)g(to)g(tr)o(ue)e(time.)-25 1506 y(For)k(kernels)h(in)f
(the)h(2.0)f(series)i(prior)e(to)h(2.0.32,)f(the)h(kernel)g(was)g(set)g
(up)f(to)h(trim)g(the)f(R)m(TC)h(every)g(1)-5 b(1)24
b(minutes.)-150 1606 y(This)d(would)f(be)g(disaster)n(ous)j(for)d
Fj(chronyd)i Fn(\226)e(ther)n(e)g(is)h(no)f(r)n(eliable)h(way)g(of)f
(synchr)n(onising)h(with)g(this)g(trimming.)-150 1706
y(For)27 b(this)g(r)n(eason,)i Fj(chronyd)f Fn(only)g(supports)g(the)f
(R)m(TC)g(in)g(2.0)g(kernels)g(fr)n(om)g(v2.0.32)g(onwar)n(ds.)41
b(\(I)28 b(don't)f(know)-150 1805 y(anything)c(about)h(the)f(kernel's)h
(R)m(TC)f(behaviour)g(in)g(other)g(kernel)h(series\).)-25
2029 y(When)d(the)h(computer)h(is)f(power)n(ed)i(down,)e(the)g(measur)n
(ement)h(histories)g(for)f(all)g(the)g(NTP)g(servers)g(ar)n(e)h(saved)
-150 2129 y(to)g(\002les)g(\(if)f(the)h Fj(dumponexit)i
Fn(dir)n(ective)f(is)f(speci\002ed)h(in)e(the)g(con\002guration)h
(\002le\),)g(and)f(the)g(R)m(TC)h(tracking)g(infor)n(-)-150
2229 y(mation)e(is)g(also)g(saved)h(to)f(a)f(\002le)h(\(if)f(the)h
Fj(rtcfile)h Fn(dir)n(ective)h(has)d(been)h(speci\002ed\).)29
b(These)21 b(pieces)h(of)f(information)-150 2328 y(ar)n(e)i(also)h
(saved)g(if)f(the)h Fj(dump)f Fn(and)g Fj(writertc)i
Fn(commands)f(r)n(espectively)i(ar)n(e)d(issued)h(thr)n(ough)f
Fj(chronyc)p Fn(.)-25 2553 y(When)30 b(the)i(computer)f(is)h(r)n
(ebooted,)i Fj(chronyd)f Fn(r)n(eads)f(the)f(curr)n(ent)g(R)m(TC)g
(time)h(and)f(the)g(R)m(TC)h(information)-150 2652 y(saved)f(at)g(the)f
(last)i(shutdown.)50 b(This)31 b(information)g(is)f(used)h(to)f(set)i
(the)e(system)i(clock)f(to)g(the)f(best)h(estimate)h(of)-150
2752 y(what)21 b(its)h(time)g(would)f(have)g(been)g(now)-8
b(,)21 b(had)f(it)i(been)e(left)i(r)o(unning)e(continuously)-10
b(.)28 b(The)21 b(measur)n(ement)h(histories)-150 2851
y(for)h(the)g(servers)h(ar)n(e)f(then)g(r)n(eloaded.)-25
3076 y(The)e(next)g(time)h(the)f(computer)h(goes)g(online,)g(the)f(pr)n
(evious)h(sessions')h(measur)n(ements)g(can)e(contribute)h(to)f(the)
-150 3175 y(line-\002tting)j(pr)n(ocess,)h(which)e(gives)h(a)f(much)f
(better)i(estimate)h(of)e(the)g(computer)7 b('s)24 b(gain/loss)h(rate.)
-25 3399 y(One)20 b(pr)n(oblem)i(with)g(saving)g(the)f(measur)n(ements)
h(and)f(R)m(TC)g(data)h(when)e(the)i(machine)e(is)i(shut)e(down)i(is)f
(what)-150 3499 y(happens)e(if)g(ther)n(e)g(is)f(a)h(power)g(failur)n
(e;)i(the)d(most)h(r)n(ecent)h(data)f(will)g(not)g(be)g(saved.)27
b(Although)19 b Fj(chronyd)h Fn(is)f(r)n(obust)-150 3599
y(enough)i(to)i(cope)f(with)h(this,)f(some)g(performance)h(may)e(be)h
(lost.)29 b(\(The)22 b(main)f(danger)h(arises)h(if)f(the)g(R)m(TC)g
(has)g(been)-150 3698 y(changed)h(during)g(the)g(session,)h(with)g(the)
f Fj(trimrtc)i Fn(command)e(in)g Fj(chronyc)p Fn(.)29
b(Because)24 b(of)g(this,)f Fj(trimrtc)i Fn(will)-150
3798 y(make)e(sur)n(e)g(that)h(a)f(meaningful)g(R)m(TC)g(\002le)g(is)h
(saved)g(out)f(after)g(the)h(change)f(is)g(completed\).)-25
4022 y(The)29 b(easiest)j(pr)n(otection)g(against)f(power)f(failur)n(e)
g(is)g(to)g(put)g(the)f Fj(dump)h Fn(and)g Fj(writertc)h
Fn(commands)f(in)f(the)-150 4122 y(same)d(place)h(as)g(the)f
Fj(offline)h Fn(command)f(is)g(issued)h(to)g(take)g Fj(chronyd)g
Fn(of)n(\003ine;)h(because)f Fj(chronyd)g Fn(fr)n(ee-r)o(uns)-150
4221 y(between)22 b(online)g(sessions,)g(no)f(parameters)h(will)g
(change)f(signi\002cantly)i(between)f(going)g(of)n(\003ine)g(fr)n(om)f
(the)g(Inter)n(-)-150 4321 y(net)i(and)g(any)g(power)h(failur)n(e.)-25
4545 y(A)29 b(\002nal)h(point)h(r)n(egar)n(ds)g(home)f(computers)h
(which)f(ar)n(e)g(left)h(r)o(unning)e(for)h(extended)h(periods)g(and)f
(wher)n(e)g(it)-150 4645 y(is)f(desir)n(ed)i(to)e(spin)h(down)f(the)g
(har)n(d)g(disc)h(when)f(it)g(is)g(not)g(in)g(use)g(\(e.g.)46
b(when)29 b(not)g(accessed)i(for)d(15)i(minutes\).)-150
4744 y Fj(chronyd)k Fn(has)e(been)g(planned)g(so)h(it)f(supports)h
(such)f(operation;)37 b(this)c(is)f(the)g(r)n(eason)h(why)f(the)g(R)m
(TC)h(tracking)-150 4844 y(parameters)26 b(ar)n(e)g(not)f(saved)h(to)f
(disc)h(after)g(every)f(update,)h(but)f(only)g(when)g(the)g(user)g(r)n
(equests)h(such)e(a)h(write,)h(or)-150 4944 y(during)d(the)g(shutdown)h
(sequence.)29 b(The)24 b(only)f(other)h(facility)h(that)f(will)h
(generate)f(periodic)h(writes)g(to)f(the)f(disc)h(is)-150
5043 y(the)i Fj(log)e(rtc)i Fn(facility)j(in)c(the)h(con\002guration)h
(\002le;)g(this)g(option)g(should)g(not)f(be)g(used)h(if)f(you)g(want)g
(your)g(disc)h(to)-150 5143 y(spin)c(down.)-150 5462
y Fh(3.4.2)55 b(T)-10 b(ypical)39 b(con\002guration)h(\002les.)-25
5687 y Fn(T)-8 b(o)30 b(illustrate)i(how)f(a)f(dial-up)h(home)g
(computer)g(might)f(be)h(con\002gur)n(ed,)h(example)f(con\002guration)g
(\002les)f(ar)n(e)-150 5786 y(shown)23 b(in)g(this)g(section.)p
eop
%%Page: 12 14
12 13 bop -150 -116 a Fn(Chapter)24 b(3:)k(T)-8 b(ypical)24
b(operating)h(scenarios)2426 b(12)-25 236 y(For)24 b(the)g(`)p
Fj(/etc/chrony.conf)p Fn(')29 b(\002le,)24 b(the)g(following)i(can)e
(be)g(used)g(as)g(an)g(example.)32 b Fi(NOTE)25 b(:)e(The)h
Fj(server)-150 336 y Fi(dir)n(ectives)35 b(ar)n(e)d(only)g(applicable)j
(to)d(customers)h(of)f(Demon)g(Internet;)37 b(users)32
b(of)g(other)g(ISPs)g(will)h(need)f(to)h(use)-150 435
y(their)23 b(own)g(ISP's)g(NTP)g(servers)h(or)f(public)g(NTP)g
(servers.)90 685 y Fj(server)56 b(158.152.1.65)i(minpoll)e(5)f(maxpoll)
h(10)f(maxdelay)i(0.4)e(offline)90 789 y(server)h(158.152.1.76)i
(minpoll)e(5)f(maxpoll)h(10)f(maxdelay)i(0.4)e(offline)90
893 y(server)h(194.159.253.2)i(minpoll)f(5)d(maxpoll)j(10)d(maxdelay)j
(0.4)e(offline)90 996 y(logdir)h(/var/log/chrony)90 1100
y(log)f(statistics)i(measurements)h(tracking)90 1204
y(driftfile)f(/etc/chrony.drift)90 1308 y(keyfile)f(/etc/chrony.keys)90
1411 y(commandkey)h(25)90 1515 y(maxupdateskew)h(100.0)90
1619 y(dumponexit)90 1723 y(dumpdir)e(/var/log/chrony)90
1827 y(rtcfile)g(/etc/chrony.rtc)-25 2072 y Fn(I)17 b(use)h
Fj(pppd)g Fn(for)g(connecting)g(to)g(my)g(ISP)-12 b(.)16
b(This)i(r)o(uns)f(two)i(scripts)g(`)p Fj(/etc/ppp/ip-up)p
Fn(')i(and)d(`)p Fj(/etc/ppp/ip-down)p Fn(')p 4153 2097
42 91 v -150 2171 a(when)23 b(the)g(link)g(goes)h(online)g(and)e(of)n
(\003ine)i(r)n(espectively)-10 b(.)-25 2417 y(The)23
b(r)n(elevant)h(part)f(of)h(the)f(`)p Fj(/etc/ppp/ip-up)p
Fn(')k(\002le)c(is)g(\(with)h(a)f(dummy)f(passwor)n(d\))90
2666 y Fj(cat)55 b(<<EOF)h(|)f(/usr/local/bin/chronyc)90
2770 y(password)i(xxxxxxxx)90 2874 y(online)90 2978 y(EOF)-25
3223 y Fn(and)22 b(the)h(r)n(elevant)i(part)e(of)g(the)h(`)p
Fj(/etc/ppp/ip-down)p Fn(')j(script)d(is)90 3472 y Fj(cat)55
b(<<EOF)h(|)f(/usr/local/bin/chronyc)90 3576 y(password)i(xxxxxxxx)90
3680 y(offline)90 3784 y(dump)90 3888 y(writertc)90 3991
y(EOF)-25 4237 y Fn(\(Because)27 b(they)f(have)g(to)g(contain)h(the)f
(administrator)i(passwor)n(d,)g(it)e(would)h(be)f(desirable)h(to)g
(make)f(the)g(\002les)-150 4336 y(r)n(eadable)f(only)e(by)g(r)n(oot)h
(on)f(a)g(multiuser)g(machine\).)-25 4582 y(T)-8 b(o)22
b(start)h Fj(chronyd)h Fn(during)e(the)g(boot)h(sequence,)f(I)h(have)f
(the)g(following)j(in)d(`)p Fj(/etc/rc.d/rc.local)p Fn(')27
b(\(this)-150 4681 y(is)c(a)g(Slackwar)n(e)i(system\))90
4931 y Fj(if)55 b([)f(-f)h(/usr/local/sbin/chron)q(yd)60
b(-a)55 b(-f)g(/etc/chrony.conf)k(];)c(then)199 5034
y(/usr/local/sbin/chronyd)61 b(-r)55 b(-s)199 5138 y(echo)g("Start)h
(chronyd")90 5242 y(fi)-25 5487 y Fn(The)25 b(placement)h(of)g(this)f
(command)h(may)f(be)g(important)h(on)f(some)h(systems.)36
b(In)25 b(particular)-7 b(,)27 b Fj(chronyd)g Fn(may)-150
5587 y(need)f(to)g(be)f(started)i(several)g(seconds)f(\(about)g(10)g
(as)f(a)h(minimum\))e(befor)n(e)j(any)e(softwar)n(e)j(that)e(depends)g
(on)f(the)-150 5687 y(system)f(clock)g(not)f(jumping)g(or)g(moving)g
(backwar)n(ds,)h(depending)g(on)f(the)g(dir)n(ectives)i(in)e
Fj(chronyd's)i Fn(con\002gu-)-150 5786 y(ration)f(\002le.)p
eop
%%Page: 13 15
13 14 bop -150 -116 a Fn(Chapter)24 b(3:)k(T)-8 b(ypical)24
b(operating)h(scenarios)2426 b(13)-25 236 y(For)31 b(the)h(system)i
(shutdown,)g Fj(chronyd)f Fn(should)f(r)n(eceive)h(a)f(SIGTERM)g
(several)h(seconds)g(befor)n(e)g(the)f(\002nal)-150 336
y(SIGKILL;)20 b(the)f(SIGTERM)h(causes)h(the)e(measur)n(ement)i
(histories)g(and)e(R)m(TC)h(information)h(to)f(be)f(saved)i(out.)27
b(Ther)n(e)-150 435 y(should)f(be)g(no)f(need)h(to)g(add)h(anything)f
(to)g(the)g(shutdown)g(sequence,)g(unless)g(\(as)g(my)g(system)h(had\))
f(ther)n(e)g(is)g(no)-150 535 y(pause)e(between)h(the)e(SIGTERM)h(and)f
(SIGKILL)h(being)f(deliver)n(ed)j(to)e(the)f(r)n(emaining)h(pr)n
(ocesses.)32 b(So)23 b(if)g(you)g(\002nd)-150 635 y(something)h(like)90
863 y Fj(killall5)57 b(-15)90 967 y(killall5)g(-9)-25
1191 y Fn(in)22 b(your)h Fj(/etc/rc.d/rc.0)k Fn(script,)c(you)g(will)h
(need)g(to)f(insert)h(a)f(sleep,)h(e.g.)90 1419 y Fj(killall5)57
b(-15)90 1523 y(sleep)f(5)90 1627 y(killall5)h(-9)-25
1851 y Fn(Otherwise,)26 b Fj(chronyd)h Fn(will)f(not)f(always)i(save)f
(information)g(on)e(shutdown,)i(which)f(could)g(be)g(a)g(pr)n(oblem)i
(if)-150 1951 y(you)c(don't)h(use)e Fj(dump)i Fn(and)f
Fj(writertc)i Fn(when)e(you)g(go)g(of)n(\003ine.)-150
2308 y Fm(3.5)59 b(Other)39 b(important)g(con\002guration)i(options)-25
2532 y Fn(The)23 b(most)i(common)f(option)h(to)f(include)g(in)g(the)f
(con\002guration)i(\002le)e(is)i(the)e Fj(driftfile)j
Fn(option.)32 b(One)24 b(of)f(the)-150 2631 y(major)d(tasks)i(of)e
Fj(chronyd)i Fn(is)f(to)g(work)f(out)h(how)f(fast)h(or)f(how)h(slow)g
(the)g(system)g(clock)h(r)o(uns)d(r)n(elative)j(to)f(r)n(eal)g(time)
-150 2731 y(-)e(e.g.)27 b(in)20 b(terms)g(of)f(seconds)i(gained)g(or)e
(lost)i(per)f(day)-10 b(.)27 b(Measur)n(ements)21 b(over)f(a)f(long)h
(period)h(ar)n(e)f(usually)g(r)n(equir)n(ed)-150 2831
y(to)k(r)n(e\002ne)f(this)g(estimate)j(to)d(an)g(acceptable)j(degr)n
(ee)e(of)g(accuracy)-10 b(.)28 b(Ther)n(efor)n(e,)d(it)e(would)h(be)f
(bad)h(if)f Fj(chronyd)i Fn(had)-150 2930 y(to)i(work)f(the)g(value)h
(out)f(each)g(time)g(it)h(is)f(r)n(estarted,)j(because)d(the)h(system)g
(clock)g(would)g(not)f(r)o(un)f(so)h(accurately)-150
3030 y(whilst)e(the)f(determination)i(is)f(taking)g(place.)-25
3254 y(T)-8 b(o)21 b(avoid)h(this)f(pr)n(oblem,)h Fj(chronyd)h
Fn(allows)f(the)f(gain)g(or)g(loss)h(rate)f(to)h(be)f(stor)n(ed)h(in)f
(a)g(\002le,)g(which)f(can)h(be)g(r)n(ead)-150 3354 y(back)i(in)g(when)
f(the)h(pr)n(ogram)h(is)f(r)n(estarted.)30 b(This)24
b(\002le)f(is)g(called)h(the)f(drift)h(\002le,)e(and)h(might)g
(typically)j(be)c(stor)n(ed)j(in)-150 3453 y(`)p Fj(/etc/chrony.drift)p
Fn('.)33 b(By)23 b(specifying)i(an)e(option)h(like)g(the)f(following)90
3682 y Fj(driftfile)57 b(/etc/chrony.drift)-25 3906 y
Fn(in)22 b(the)h(con\002guration)h(\002le)f(\(`)p Fj(/etc/chrony.conf)p
Fn('\),)k(the)c(drift)h(\002le)f(facility)i(will)f(be)f(activated.)p
eop
%%Page: 14 16
14 15 bop -150 -116 a Fn(Chapter)24 b(4:)k(Usage)c(r)n(efer)n(ence)2883
b(14)-150 236 y Fk(4)71 b(Usage)47 b(reference)-150 809
y Fm(4.1)59 b(Starting)39 b(chronyd)-25 1048 y Fn(If)24
b Fj(chronyd)i Fn(has)f(been)f(installed)j(to)e(its)g(default)g
(location)h(`)p Fj(/usr/local/sbin/chro)q(nyd)p Fn(')q(,)k(starting)25
b(it)g(is)-150 1147 y(simply)f(a)f(matter)h(of)f(entering)h(the)f
(command)90 1390 y Fj(/usr/local/sbin/chrony)q(d)-25
1629 y Fn(Information)h(messages)h(and)d(warnings)i(will)g(be)f(logged)
i(to)e(syslog.)-25 1868 y(The)g(command)g(line)g(options)i(supported)f
(ar)n(e)g(as)f(follows:)-150 2146 y Fj(-d)372 b Fn(When)23
b(r)o(un)f(in)h(this)h(mode,)g(the)f(pr)n(ogram)h(will)h(not)e(detach)h
(itself)h(fr)n(om)f(the)f(terminal,)h(and)f(all)h(mes-)330
2245 y(sages)g(will)g(be)f(sent)h(to)f(the)h(terminal)f(instead)i(of)e
(to)g(syslog.)-150 2424 y Fj(-f)g(<conf-file>)330 2523
y Fn(This)k(option)g(can)f(be)g(used)h(to)g(specify)h(an)d(alternate)j
(location)g(for)e(the)h(con\002guration)f(\002le)g(\(default)330
2623 y(`)p Fj(/etc/chrony.conf)p Fn('\).)-150 2802 y
Fj(-r)372 b Fn(This)22 b(option)h(will)f(r)n(eload)h(sample)g
(histories)g(for)e(each)h(of)f(the)h(servers)g(being)g(used.)28
b(These)22 b(histories)330 2901 y(ar)n(e)d(cr)n(eated)h(by)e(using)g
(the)h Fj(dump)g Fn(command)g(in)f Fj(chronyc)p Fn(,)i(or)f(by)f
(setting)i(the)f Fj(dumponexit)i Fn(dir)n(ec-)330 3001
y(tive)g(in)f(the)h(con\002guration)g(\002le.)27 b(This)21
b(option)g(is)g(useful)g(if)f(you)g(want)h(to)g(stop)h(and)e(r)n
(estart)i Fj(chronyd)330 3100 y Fn(brie\003y)34 b(for)g(any)g(r)n
(eason,)j(e.g.)60 b(to)34 b(install)i(a)d(new)h(version.)61
b(However)-7 b(,)38 b(it)d(only)f(makes)g(sense)h(on)330
3200 y(systems)25 b(wher)n(e)f(the)f(kernel)h(can)f(maintain)g(clock)i
(compensation)g(whilst)f(not)g(under)e Fj(chronyd's)330
3300 y Fn(contr)n(ol.)29 b(The)21 b(only)g(version)h(wher)n(e)g(this)g
(happens)f(so)h(far)f(is)g(Linux.)27 b(On)21 b(systems)i(wher)n(e)e
(this)h(is)f(not)330 3399 y(the)i(case,)h(e.g.)j(Solaris)d(and)f(SunOS)
e(the)i(option)h(should)g(not)f(be)g(used.)-150 3578
y Fj(-s)372 b Fn(This)32 b(option)h(will)f(set)g(the)g(system)h(clock)f
(fr)n(om)g(the)g(computer)7 b('s)32 b(r)n(eal-time)h(clock.)55
b(This)32 b(is)f(anal-)330 3677 y(ogous)j(to)g(supplying)h(the)f(`-s')g
(\003ag)f(to)i(the)e(`)p Fj(/sbin/clock)p Fn(')k(pr)n(ogram)d(during)f
(the)h(Linux)f(boot)330 3777 y(sequence.)330 3916 y(Support)25
b(for)g(r)n(eal-time)i(clocks)g(is)e(limited)i(at)e(pr)n(esent)i(-)e
(the)g(criteria)h(ar)n(e)g(described)g(in)f(the)g(section)330
4016 y(on)e(the)g Fj(rtcfile)i Fn(dir)n(ective)g(\(see)f(Section)f
(4.2.21)g([rtc\002le)h(dir)n(ective],)h(page)e(25\).)330
4155 y(If)30 b Fj(chronyd)i Fn(cannot)e(support)h(the)f(r)n(eal)h(time)
g(clock)g(on)e(your)h(computer)-7 b(,)32 b(this)f(option)g(cannot)g(be)
330 4254 y(used)23 b(and)g(a)g(warning)g(message)h(will)h(be)e(logged)h
(to)g(the)f(syslog.)330 4394 y(If)e(used)h(in)f(conjunction)g(with)h
(the)g(`-r)7 b(')20 b(\003ag,)i Fj(chronyd)h Fn(will)f(attempt)h(to)f
(pr)n(eserve)h(the)e(old)h(samples)330 4493 y(after)g(setting)i(the)e
(system)h(clock)g(fr)n(om)f(the)g(r)n(eal)h(time)g(clock.)28
b(This)23 b(can)e(be)h(used)g(to)h(allow)g Fj(chronyd)330
4593 y Fn(to)e(perform)f(long)g(term)h(averaging)g(of)f(the)g(gain)h
(or)e(loss)j(rate)e(acr)n(oss)i(system)f(r)n(eboots,)h(and)e(is)h
(useful)330 4692 y(for)j(dial-up)g(systems)i(that)e(ar)n(e)g(shut)f
(down)i(when)e(not)h(in)f(use.)30 b(For)24 b(this)g(to)h(work)f(well,)h
(it)f(r)n(elies)h(on)330 4792 y Fj(chronyd)h Fn(having)f(been)g(able)g
(to)g(determine)h(accurate)f(statistics)j(for)d(the)g(dif)n(fer)n(ence)
h(between)g(the)330 4892 y(r)n(eal)e(time)f(clock)h(and)f(system)i
(clock)f(last)g(time)f(the)h(computer)f(was)h(on.)-150
5070 y Fj(-v)372 b Fn(This)23 b(option)i(displays)g Fj(chronyd's)g
Fn(version)f(number)e(to)h(the)h(terminal)f(and)g(exits.)-25
5348 y(On)29 b(systems)j(that)e(support)h(an)f(`)p Fj(/etc/rc.local)p
Fn(')j(\002le)d(for)g(starting)i(pr)n(ograms)f(at)f(boot)h(time,)h
Fj(chronyd)-150 5448 y Fn(can)23 b(be)g(started)h(fr)n(om)g(ther)n(e.)
-25 5687 y(On)h(systems)j(with)f(a)f(System)h(V)f(style)i
(initialisation)h(\(e.g.)38 b(Solaris\),)27 b(a)f(suitable)i
(start/stop)h(script)e(might)g(be)-150 5786 y(as)c(shown)g(below)-8
b(.)29 b(This)24 b(might)f(be)g(placed)i(in)d(the)h(\002le)g(`)p
Fj(/etc/rc2.d/S83chrony)q Fn('.)p eop
%%Page: 15 17
15 16 bop -150 -116 a Fn(Chapter)24 b(4:)k(Usage)c(r)n(efer)n(ence)2883
b(15)90 236 y Fj(#!/bin/sh)90 340 y(#)55 b(This)g(file)h(should)g(have)
f(uid)g(root,)h(gid)f(sys)g(and)h(chmod)f(744)90 444
y(#)90 651 y(killproc\(\))i({)652 b(#)55 b(kill)g(the)g(named)h
(process\(es\))524 755 y(pid=`/usr/bin/ps)j(-e)c(|)796
859 y(/usr/bin/grep)j(-w)d($1)g(|)796 963 y(/usr/bin/sed)j(-e)d('s/^)
109 b(*//')56 b(-e)f('s/)g(.*//'`)524 1066 y([)g("$pid")h(!=)f("")g(])f
(&&)h(kill)h($pid)90 1170 y(})90 1378 y(case)f("$1")h(in)90
1585 y('start'\))253 1689 y(if)f([)f(-f)h(/opt/free/sbin/chronyd)61
b(-a)55 b(-f)g(/etc/chrony.conf)k(];)c(then)361 1793
y(/opt/free/sbin/chrony)q(d)253 1897 y(fi)253 2000 y(;;)90
2104 y('stop'\))253 2208 y(killproc)i(chronyd)253 2312
y(;;)90 2416 y(*\))253 2519 y(echo)e("Usage:)i(/etc/rc2.d/S83chrony)j
({)55 b(start)g(|)g(stop)g(}")253 2623 y(;;)90 2727 y(esac)-25
2955 y Fn(\(In)22 b(both)h(cases,)h(you)e(may)h(want)g(to)g(bear)g(in)f
(mind)h(that)g Fj(chronyd)i Fn(can)d(step)i(the)f(time)g(when)g(it)g
(starts.)29 b(Ther)n(e)-150 3054 y(may)c(be)h(other)f(pr)n(ograms)i
(started)g(at)f(boot)g(time)g(that)g(could)g(be)f(upset)h(by)g(this,)g
(so)f(you)h(may)f(need)h(to)g(consider)-150 3154 y(the)f(or)n(dering)i
(car)n(efully)-10 b(.)36 b(However)-7 b(,)27 b Fj(chronyd)g
Fn(will)g(need)e(to)h(start)g(after)g(daemons)h(pr)n(oviding)g
(services)f(that)g(it)-150 3254 y(may)d(r)n(equir)n(e,)g(e.g.)28
b(the)23 b(domain)g(name)g(service.\))-150 3611 y Fm(4.2)59
b(The)40 b(chronyd)g(con\002guration)h(\002le)-25 3835
y Fn(The)35 b(con\002guration)h(\002le)g(is)g(normally)g(called)h(`)p
Fj(/etc/chrony.conf)p Fn(';)46 b(in)35 b(fact,)k(this)d(is)g(the)g
(compiled-in)-150 3935 y(default.)29 b(However)-7 b(,)24
b(other)g(locations)h(can)d(be)h(speci\002ed)i(with)f(a)f(command)g
(line)g(option.)-25 4159 y(Each)c(command)g(in)f(the)i(con\002guration)
f(\002le)g(is)g(placed)i(on)e(a)f(separate)j(line.)27
b(The)19 b(following)j(sections)e(describe)-150 4258
y(each)j(of)g(the)g(commands)h(in)f(turn.)k(The)c(dir)n(ectives)i(can)e
(occur)g(in)f(any)h(or)n(der)h(in)e(the)i(\002le.)-150
4582 y Fh(4.2.1)55 b(allow)-25 4806 y Fn(The)23 b Fj(allow)i
Fn(command)e(is)h(used)g(to)g(designate)h(a)f(particular)g(subnet)g(fr)
n(om)f(which)h(NTP)f(clients)i(ar)n(e)f(allowed)-150
4906 y(to)g(access)g(the)f(computer)h(as)f(an)f(NTP)h(server)-7
b(.)-25 5130 y(The)24 b(default)i(is)f(that)g(no)g(clients)h(ar)n(e)f
(allowed)h(access,)g(i.e.)33 b Fj(chronyd)27 b Fn(operates)f(pur)n(ely)
g(as)f(an)f(NTP)g(client.)34 b(If)-150 5230 y(the)23
b Fj(allow)h Fn(dir)n(ective)h(is)f(used,)f Fj(chronyd)h
Fn(will)g(be)f(both)h(a)e(client)i(of)g(its)f(servers,)h(and)f(a)f
(server)i(to)f(other)h(clients.)-25 5454 y(Examples)g(of)f(use)g(of)g
(the)g(command)g(ar)n(e)h(as)f(follows:)90 5682 y Fj(allow)56
b(foo.bar.com)90 5786 y(allow)g(1.2)p eop
%%Page: 16 18
16 17 bop -150 -116 a Fn(Chapter)24 b(4:)k(Usage)c(r)n(efer)n(ence)2883
b(16)90 236 y Fj(allow)56 b(3.4.5)90 340 y(allow)-25
570 y Fn(The)26 b(\002rst)g(command)g(allows)h(the)g(named)f(host)g(to)
h(be)f(an)f(NTP)h(client)h(of)f(this)h(computer)-7 b(.)37
b(The)27 b(second)f(com-)-150 669 y(mand)k(allows)i(any)f(host)g(with)g
(an)f(IP)g(addr)n(ess)i(of)e(the)h(form)f(1.2.x.y)g(\(with)h(x)f(and)g
(y)g(arbitrary\))h(to)g(be)g(an)f(NTP)-150 769 y(client)c(of)g(this)g
(computer)-7 b(.)37 b(Likewise,)28 b(the)d(thir)n(d)i(command)e(allows)
j(any)d(host)h(with)g(an)f(IP)g(addr)n(ess)j(of)d(the)h(form)-150
868 y(3.4.5.x)c(to)h(have)g(client)h(NTP)f(access.)30
b(The)23 b(fourth)g(form)f(allows)j(access)f(by)f(any)g(node)h(on)e
(the)h(entir)n(e)h(Internet.)-25 1098 y(A)35 b(second)h(form)g(of)f
(the)h(dir)n(ective,)k Fj(allow)24 b(all)p Fn(,)39 b(has)c(a)g(gr)n
(eater)i(ef)n(fect,)j(depending)d(on)e(the)g(or)n(dering)h(of)-150
1198 y(dir)n(ectives)26 b(in)c(the)h(con\002guration)h(\002le.)k(T)-8
b(o)23 b(illustrate)i(the)e(ef)n(fect,)h(consider)g(the)f(two)h
(examples)90 1431 y Fj(allow)56 b(1.2.3.4)90 1535 y(deny)f(1.2.3)90
1639 y(allow)h(1.2)-25 1869 y Fn(and)90 2102 y Fj(allow)g(1.2.3.4)90
2206 y(deny)f(1.2.3)90 2310 y(allow)h(all)f(1.2)-25 2540
y Fn(In)23 b(the)h(\002rst)g(example,)h(the)f(ef)n(fect)h(is)g(the)f
(same)g(r)n(egar)n(dles)i(of)e(what)g(or)n(der)h(the)f(thr)n(ee)g(dir)n
(ectives)j(ar)n(e)d(given)g(in.)-150 2639 y(So)h(the)g(1.2.x.y)g
(subnet)g(is)h(allowed)h(access,)g(except)g(for)e(the)h(1.2.3.x)e
(subnet,)i(which)f(is)h(denied)g(access,)h(however)-150
2739 y(the)c(host)h(1.2.3.4)e(is)i(allowed)h(access.)-25
2968 y(In)k(the)h(second)h(example,)h(the)e Fj(allow)24
b(all)g(1.2)30 b Fn(dir)n(ectives)i(overrides)f(the)f(ef)n(fect)i(of)e
Fi(any)36 b Fn(pr)n(evious)c(dir)n(ec-)-150 3068 y(tive)37
b(r)n(elating)h(to)g(a)e(subnet)h(within)g(the)f(speci\002ed)i(subnet.)
69 b(W)-5 b(ithin)37 b(a)g(con\002guration)g(\002le)f(this)h
(capability)i(is)-150 3168 y(pr)n(obably)29 b(rather)f(moot;)j(however)
-7 b(,)29 b(it)f(is)g(of)g(gr)n(eater)h(use)f(for)g(r)n
(econ\002guration)g(at)g(r)o(un-time)g(via)g Fj(chronyc)i
Fn(\(see)-150 3267 y(Section)24 b(4.3.4.5)e([allow)j(all)e(command],)g
(page)h(30\).)-25 3497 y(Note,)h(if)f(the)g Fj(initstepslew)j
Fn(dir)n(ective)f(\(see)f(Section)g(4.2.9)e([initstepslew)28
b(dir)n(ective],)e(page)f(18\))f(is)h(used)f(in)-150
3597 y(the)31 b(con\002guration)g(\002le,)h(each)e(of)h(the)f
(computers)i(listed)g(in)e(that)h(dir)n(ective)i(must)d(allow)i(client)
g(access)g(by)e(this)-150 3696 y(computer)24 b(for)f(it)g(to)h(work.)
-150 4036 y Fh(4.2.2)55 b(bindaddress)-25 4266 y Fn(The)22
b(bindaddr)n(ess)j(allows)f(you)e(to)i(r)n(estrict)g(the)e(network)i
(interface)g(to)f(which)f(chr)n(onyd)h(will)h(listen)f(for)g(pack-)-150
4366 y(ets.)63 b(This)35 b(pr)n(ovides)h(an)e(additional)j(level)e(of)g
(access)g(r)n(estriction)i(above)e(that)g(available)h(thr)n(ough)f(the)
f('deny')-150 4465 y(mechanism.)-25 4695 y(Suppose)23
b(you)g(have)g(a)g(local)h(ethernet)g(with)g(addr)n(esses)h(in)e(the)g
(192.168.1.0)g(subnet)h(together)g(with)g(a)f(dial-up)-150
4794 y(connection.)34 b(The)25 b(ethernet)h(interface's)g(IP)f(addr)n
(ess)h(is)f(192.168.1.1.)34 b(Suppose)25 b(\(for)g(some)g(r)n(eason\))h
(you)f(want)g(to)-150 4894 y(block)j(all)g(access)h(thr)n(ough)e(the)h
(dialup)g(connection)g(\(note,)h(this)f(will)h(even)e(block)h(r)n
(eplies)i(fr)n(om)d(servers)h(on)f(the)-150 4994 y(dialup)d(side,)f(so)
h(you)f(will)h(not)f(be)g(able)h(to)f(synchr)n(onise)h(to)g(an)e
(external)i(sour)n(ce\).)29 b(Y)-8 b(ou)22 b(could)i(add)f(the)g(line)
90 5227 y Fj(bindaddress)58 b(192.168.1.1)-25 5457 y
Fn(to)23 b(the)g(con\002guration)h(\002le.)-25 5687 y(This)e(dir)n
(ective)j(af)n(fects)f(both)f(NTP)f(\(UDP)h(port)g(123\))g(packets)h
Ff(and)f Fn(chr)n(onyc/chr)n(onyd)g(command)g(and)f(mon-)-150
5786 y(itoring)i(packets)h(\(UDP)e(port)g(323)h(by)f(default\).)p
eop
%%Page: 17 19
17 18 bop -150 -116 a Fn(Chapter)24 b(4:)k(Usage)c(r)n(efer)n(ence)2883
b(17)-150 236 y Fh(4.2.3)55 b(commandkey)-25 462 y Fn(The)21
b(commandkey)i(command)e(is)h(used)g(to)g(set)g(the)g(key)g(number)e
(used)h(for)h(authenticating)h(user)e(commands)-150 562
y(via)d(the)g(chr)n(onyc)g(pr)n(ogram)g(at)g(r)o(un)f(time.)27
b(This)18 b(allows)i(certain)e(actions)h(of)f(the)g(chr)n(onyc)g(pr)n
(ogram)g(to)h(be)e(r)n(estricted)-150 662 y(to)24 b(administrators.)-25
888 y(An)e(example)i(of)f(the)g(commandkey)i(command)e(is)90
1118 y Fj(commandkey)57 b(20)-25 1345 y Fn(In)22 b(the)h(key)h(\002le)f
(\(see)h(the)f(key\002le)h(command\))f(ther)n(e)h(should)f(be)g(a)g
(line)g(of)h(the)f(form)90 1575 y Fj(20)55 b(foobar)-25
1801 y Fn(When)22 b(r)o(unning)g(the)h(chr)n(onyc)g(pr)n(ogram)h(to)g
(perform)f(r)o(un-time)g(con\002guration,)g(the)g(command)90
2032 y Fj(password)57 b(foobar)-25 2258 y Fn(must)22
b(be)i(enter)n(ed)g(befor)n(e)g(any)f(commands)g(af)n(fecting)i(the)e
(operation)i(of)e(the)g(daemon)h(can)e(be)h(enter)n(ed.)-150
2588 y Fh(4.2.4)55 b(cmdport)-25 2814 y Fn(The)21 b Fj(cmdport)j
Fn(dir)n(ective)g(allows)g(the)e(port)g(that)h(is)f(used)g(for)g(r)o
(un-time)g(command)g(and)f(monitoring)i(\(via)f(the)-150
2914 y(pr)n(ogram)i Fj(chronyc)p Fn(\))h(to)e(be)g(alter)n(ed)i(fr)n
(om)e(its)h(default)g(\(323/udp\).)-25 3140 y(An)e(example)i(shows)g
(the)f(syntax)90 3370 y Fj(cmdport)56 b(257)-25 3597
y Fn(This)29 b(would)h(make)g Fj(chronyd)g Fn(use)f(257/udp)h(as)f(its)
h(command)g(port.)47 b(\()p Fj(chronyc)31 b Fn(would)f(need)f(to)h(be)f
(r)o(un)-150 3696 y(with)24 b(the)f Fj(-p)g(257)g Fn(switch)i(to)e
(inter)n(-operate)j(corr)n(ectly\).)-150 4026 y Fh(4.2.5)55
b(deny)-25 4252 y Fn(This)31 b(is)h(similar)g(to)f(the)h
Fj(allow)g Fn(dir)n(ective)h(\(see)f(Section)g(4.2.1)f([allow)i(dir)n
(ective],)i(page)d(15\),)h(except)f(that)g(it)-150 4352
y(denies)24 b(NTP)f(client)h(access)g(to)g(a)f(particular)h(subnet)f
(or)f(host,)i(rather)e(than)h(allowing)i(it.)-25 4578
y(The)e(syntax)g(is)g(identical.)-25 4804 y(Ther)n(e)g(is)g(also)h(a)f
Fj(deny)h(all)g Fn(dir)n(ective)h(with)e(similar)h(behaviour)f(to)h
(the)f Fj(allow)h(all)g Fn(dir)n(ective.)-150 5134 y
Fh(4.2.6)55 b(drift\002le)-25 5361 y Fn(One)31 b(of)h(the)g(main)f
(activities)k(of)d(the)f Fj(chronyd)j Fn(pr)n(ogram)e(is)g(to)h(work)f
(out)g(the)f(rate)i(at)f(which)f(the)h(system)-150 5460
y(clock)24 b(gains)g(or)e(loses)j(time)f(r)n(elative)g(to)g(r)n(eal)g
(time.)-25 5687 y(Whenever)j Fj(chronyd)h Fn(computes)h(a)d(new)h
(value)g(of)h(the)f(gain/loss)h(rate,)g(it)f(is)h(desirable)g(to)g(r)n
(ecor)n(d)f(it)h(some-)-150 5786 y(wher)n(e.)71 b(This)38
b(allows)h Fj(chronyd)f Fn(to)g(begin)f(compensating)j(the)d(system)h
(clock)g(at)g(that)g(rate)f(whenever)h(it)f(is)p eop
%%Page: 18 20
18 19 bop -150 -116 a Fn(Chapter)24 b(4:)k(Usage)c(r)n(efer)n(ence)2883
b(18)-150 236 y(r)n(estarted,)34 b(even)c(befor)n(e)i(it)e(has)h(had)f
(a)g(chance)g(to)h(obtain)g(an)f(equally)h(good)g(estimate)i(of)d(the)h
(rate)g(during)e(the)-150 336 y(new)23 b(r)o(un.)k(\(This)d(pr)n(ocess)
g(may)g(take)g(many)e(minutes,)h(at)h(least\).)-25 566
y(The)f(drift\002le)h(command)f(allows)i(a)e(\002le)g(to)h(be)f
(speci\002ed)i(into)e(which)g Fj(chronyd)i Fn(can)e(stor)n(e)i(the)e
(rate)g(informa-)-150 665 y(tion.)40 b(T)-8 b(wo)28 b(parameters)h(ar)n
(e)e(r)n(ecor)n(ded)h(in)f(the)g(\002le.)40 b(The)27
b(\002rst)g(is)g(the)g(rate)h(at)f(which)g(the)g(system)h(clock)g
(gains)g(or)-150 765 y(loses)21 b(time,)g(expr)n(essed)h(in)d(parts)i
(per)e(million,)i(with)g(gains)f(positive.)29 b(Ther)n(efor)n(e,)22
b(a)e(value)g(of)f(100.0)h(indicates)i(that)-150 864
y(when)29 b(the)g(system)i(clock)f(has)g(advanced)g(by)f(a)g(second,)j
(it)d(has)g(gained)i(100)e(micr)n(oseconds)j(on)d(r)n(eality)i(\(so)e
(the)-150 964 y(tr)o(ue)e(time)h(has)f(only)g(advanced)h(by)f(999900)h
(micr)n(oseconds\).)42 b(The)27 b(second)h(is)f(an)g(estimate)i(of)e
(the)g(err)n(or)g(bound)-150 1064 y(ar)n(ound)c(the)g(\002rst)g(value)g
(in)g(which)g(the)g(tr)o(ue)g(rate)h(actually)g(lies.)-25
1294 y(An)e(example)i(of)f(the)g(drift\002le)h(command)g(is)90
1527 y Fj(driftfile)57 b(/etc/chrony.drift)-150 1868
y Fh(4.2.7)e(dumpdir)-25 2098 y Fn(T)-8 b(o)26 b(compute)h(the)g(rate)f
(of)h(gain)f(or)g(loss)i(of)e(time,)h Fj(chronyd)h Fn(has)e(to)h(stor)n
(e)h(a)e(measur)n(ement)h(history)g(for)g(each)-150 2197
y(of)c(the)g(time)h(sour)n(ces)g(it)f(uses.)-25 2427
y(Certain)29 b(systems)i(\(so)e(far)g(only)g(Linux\))g(have)g
(operating)h(system)h(support)f(for)e(setting)j(the)e(rate)h(of)f(gain)
g(or)-150 2527 y(loss)23 b(to)g(compensate)h(for)d(known)i(err)n(ors.)
28 b(\(On)21 b(other)h(systems,)i Fj(chronyd)g Fn(must)e(simulate)h
(such)e(a)h(capability)j(by)-150 2626 y(periodically)h(slewing)f(the)f
(system)g(clock)h(forwar)n(ds)g(or)e(backwar)n(ds)i(by)e(a)g(suitable)i
(amount)e(to)h(compensate)i(for)-150 2726 y(the)d(err)n(or)g(built)h
(up)e(since)i(the)f(pr)n(evious)h(slew\).)-25 2956 y(For)19
b(such)g(systems,)j(it)e(is)h(possible)g(to)g(save)f(the)g(measur)n
(ement)h(history)f(acr)n(oss)h(r)n(estarts)h(of)e Fj(chronyd)h
Fn(\(assum-)-150 3055 y(ing)i(no)f(changes)h(ar)n(e)g(made)g(to)g(the)f
(system)i(clock)g(behaviour)f(whilst)h(it)f(is)g(not)f(r)o(unning\).)27
b(If)c(this)g(capability)i(is)e(to)-150 3155 y(be)j(used)h(\(via)g(the)
f(dumponexit)h(command)g(in)f(the)h(con\002guration)f(\002le,)h(or)f
(the)h(dump)f(command)h(in)f(chr)n(onyc\),)-150 3255
y(the)j(dumpdir)g(command)g(should)g(be)g(used)g(to)h(de\002ne)f(the)g
(dir)n(ectory)h(wher)n(e)g(the)f(measur)n(ement)h(histories)g(ar)n(e)
-150 3354 y(saved.)-25 3584 y(An)22 b(example)i(of)f(the)g(command)h
(is)90 3818 y Fj(dumpdir)56 b(/var/log/chrony)-25 4048
y Fn(A)46 b(sour)n(ce)h(whose)g(IP)f(addr)n(ess)i(is)f(1.2.3.4)f(would)
h(have)g(its)g(measur)n(ement)g(history)h(saved)f(in)f(the)h(\002le)
-150 4147 y(`)p Fj(/var/log/chrony/1.2.3.)q(4.d)q(at)p
Fn('.)-150 4488 y Fh(4.2.8)55 b(dumponexit)-25 4718 y
Fn(If)33 b(this)g(command)h(is)f(pr)n(esent,)k(it)c(indicates)i(that)f
Fj(chronyd)g Fn(should)g(save)g(the)f(measur)n(ement)h(history)g(for)
-150 4817 y(each)23 b(of)g(its)h(time)g(sour)n(ces)g(r)n(ecor)n(ded)g
(whenever)g(the)f(pr)n(ogram)h(exits.)29 b(\(See)23 b(the)g(dumpdir)g
(command)g(above\).)-150 5158 y Fh(4.2.9)55 b(initstepslew)-25
5388 y Fn(In)21 b(normal)h(operation,)h Fj(chronyd)h
Fn(always)g(slews)f(the)f(time)h(when)e(it)i(needs)f(to)h(adjust)f(the)
g(system)i(clock.)29 b(For)-150 5487 y(example,)c(to)g(corr)n(ect)h(a)e
(system)i(clock)f(which)g(is)f(1)h(second)g(slow)-8 b(,)25
b Fj(chronyd)i Fn(slightly)f(incr)n(eases)g(the)e(amount)h(by)-150
5587 y(which)e(the)h(system)h(clock)f(is)g(advanced)g(on)f(each)h
(clock)g(interr)o(upt,)g(until)f(the)h(err)n(or)f(is)h(r)n(emoved.)30
b(\(Actually)-10 b(,)25 b(this)-150 5687 y(is)30 b(done)g(by)f(calling)
i(the)e Fj(adjtime\(\))j Fn(or)d(similar)i(system)f(function)g(which)f
(does)i(it)f(for)f(us.\))48 b(Note)30 b(that)g(at)g(no)-150
5786 y(time)24 b(does)g(time)f(r)o(un)f(backwar)n(ds)j(with)f(this)f
(method.)p eop
%%Page: 19 21
19 20 bop -150 -116 a Fn(Chapter)24 b(4:)k(Usage)c(r)n(efer)n(ence)2883
b(19)-25 236 y(On)23 b(most)j(Unix)e(systems)i(it)f(is)f(not)h
(desirable)h(to)f(step)g(the)g(system)h(clock,)f(because)g(many)f(pr)n
(ograms)i(r)n(ely)f(on)-150 336 y(time)f(advancing)f(monotonically)j
(forwar)n(ds.)-25 562 y(When)f(the)i Fj(chronyd)h Fn(daemon)e(is)h
(initially)h(started,)g(it)f(is)f(possible)j(that)d(the)g(system)i
(clock)f(is)g(considerably)-150 661 y(in)c(err)n(or)-7
b(.)29 b(Attempting)d(to)e(corr)n(ect)g(such)f(an)g(err)n(or)g(by)g
(slewing)i(may)e(not)h(be)f(sensible,)h(since)g(it)g(may)f(take)h
(several)-150 761 y(hours)e(to)i(corr)n(ect)g(the)f(err)n(or)g(by)g
(this)h(means.)-25 987 y(The)k(purpose)g(of)h(the)f Fj(initstepslew)j
Fn(dir)n(ective)f(is)f(to)f(allow)h Fj(chronyd)h Fn(to)f(make)f(a)g
(rapid)h(measur)n(ement)-150 1087 y(of)36 b(the)f(system)i(clock)g(err)
n(or)e(at)h(boot)g(time,)j(and)d(to)g(corr)n(ect)g(the)g(system)h
(clock)f(by)g(stepping)h(befor)n(e)g(normal)-150 1186
y(operation)25 b(begins.)31 b(Since)23 b(this)h(would)h(normally)f(be)g
(performed)g(only)g(at)g(an)f(appr)n(opriate)k(point)d(in)f(the)h
(system)-150 1286 y(boot)g(sequence,)f(no)f(other)i(softwar)n(e)h
(should)e(be)g(adversely)i(af)n(fected)g(by)e(the)g(step.)-25
1512 y(If)29 b(the)h(corr)n(ection)h(r)n(equir)n(ed)f(is)g(less)g(than)
g(a)f(speci\002ed)i(thr)n(eshold,)h(a)e(slew)g(is)g(used)g(instead.)49
b(This)30 b(makes)g(it)-150 1611 y(easier)24 b(to)g(r)n(estart)g
Fj(chronyd)h Fn(whilst)f(the)f(system)i(is)e(in)f(normal)h(operation.)
-25 1837 y(The)30 b Fj(initstepslew)j Fn(dir)n(ective)f(takes)f(a)f
(thr)n(eshold)h(and)f(a)g(list)h(of)f(NTP)g(servers)g(as)h(ar)n
(guments.)49 b(A)30 b(max-)-150 1937 y(imum)i(of)h(8)f(will)i(be)e
(used.)57 b(Each)32 b(of)h(the)g(servers)g(is)g(rapidly)h(polled)g
(several)g(times,)h(and)d(a)h(majority)h(voting)-150
2036 y(mechanism)28 b(used)h(to)g(\002nd)e(the)h(most)h(likely)h(range)
e(of)h(system)g(clock)g(err)n(or)g(that)f(is)h(pr)n(esent.)45
b(A)28 b(step)h(\(or)f(slew\))-150 2136 y(is)h(applied)i(to)f(the)f
(system)i(clock)f(to)g(corr)n(ect)g(this)f(err)n(or)-7
b(.)47 b Fj(chronyd)31 b Fn(then)e(enters)g(its)h(normal)f(operating)i
(mode)-150 2236 y(\(wher)n(e)24 b(only)f(slews)i(ar)n(e)e(used\).)-25
2462 y(An)f(example)i(of)f(use)g(of)g(the)g(command)h(is)90
2692 y Fj(initstepslew)58 b(30)d(foo.bar.com)i(baz.quz.com)-25
2918 y Fn(wher)n(e)21 b(2)g(NTP)g(servers)h(ar)n(e)f(used)g(to)h(make)f
(the)g(measur)n(ement.)29 b(The)21 b Fj(30)g Fn(indicates)i(that)e(if)h
(the)f(system's)i(err)n(or)-150 3017 y(is)29 b(found)f(to)h(be)f(30)h
(seconds)g(or)g(less,)h(a)e(slew)i(will)f(be)g(used)f(to)h(corr)n(ect)h
(it;)h(if)e(the)f(err)n(or)h(is)f(above)i(30)e(seconds,)j(a)-150
3117 y(step)24 b(will)g(be)f(used.)-25 3343 y(The)h Fj(initstepslew)k
Fn(dir)n(ective)f(can)e(also)h(be)e(used)h(in)g(an)f(isolated)j(LAN)e
(envir)n(onment,)h(wher)n(e)f(the)g(clocks)-150 3442
y(ar)n(e)19 b(set)g(manually)-10 b(.)27 b(The)19 b(most)g(stable)h
(computer)f(is)g(chosen)g(as)g(the)g(master)-7 b(,)20
b(and)e(the)h(other)g(computers)g(ar)n(e)g(slaved)-150
3542 y(to)j(it.)29 b(If)22 b(each)g(of)g(the)g(slaves)h(is)g
(con\002gur)n(ed)f(with)g(the)g(local)h(option)h(\(see)e(below\),)h
(the)g(master)f(can)g(be)g(set)h(up)e(with)-150 3642
y(an)27 b Fj(initstepslew)j Fn(dir)n(ective)f(which)e(r)n(efer)n(ences)
i(some)e(or)g(all)h(of)f(the)g(slaves.)42 b(Then,)27
b(if)h(the)f(master)h(machine)-150 3741 y(has)23 b(to)g(be)g(r)n
(ebooted,)i(the)e(slaves)i(can)d(be)h(r)n(elied)i(on)e(to)g
('\003ywheel')h(the)g(time)f(for)g(the)g(master)-7 b(.)-150
4070 y Fh(4.2.10)56 b(key\002le)-25 4296 y Fn(This)26
b(command)g(is)g(used)g(to)g(specify)h(the)f(location)i(of)e(the)f
(\002le)h(containing)h(ID/key)g(pairs)f(for)g(the)g(following)-150
4396 y(2)d(uses:)-75 4622 y Fl(\017)60 b Fn(Authentication)25
b(of)e(NTP)g(packets.)-75 4748 y Fl(\017)60 b Fn(Authentication)25
b(of)e(administrator)i(commands)f(enter)n(ed)g(via)f(chr)n(onyc.)-25
5001 y(The)g(format)g(of)g(the)h(command)f(is)g(shown)g(in)g(the)g
(example)h(below)90 5231 y Fj(keyfile)56 b(/etc/chrony.keys)-25
5457 y Fn(The)26 b(ar)n(gument)h(is)f(simply)i(the)e(name)g(of)h(the)f
(\002le)h(containing)g(the)g(ID/key)g(pairs.)39 b(The)26
b(format)h(of)f(the)h(\002le)f(is)-150 5556 y(shown)d(below)90
5786 y Fj(10)55 b(tulip)p eop
%%Page: 20 22
20 21 bop -150 -116 a Fn(Chapter)24 b(4:)k(Usage)c(r)n(efer)n(ence)2883
b(20)90 236 y Fj(11)55 b(hyacinth)90 340 y(20)g(crocus)90
444 y(25)g(iris)144 548 y(...)-25 772 y Fn(Each)31 b(line)h(consists)i
(of)d(an)h(ID)f(and)h(a)f(passwor)n(d.)57 b(The)31 b(ID)h(can)g(be)f
(any)h(unsigned)g(integer)g(in)f(the)h(range)g(0)-150
872 y(thr)n(ough)23 b(2**32-1.)29 b(The)23 b(passwor)n(d)i(can)e(be)g
(any)g(string)h(of)f(characters)h(not)f(containing)h(a)f(space.)-25
1096 y(For)37 b(NTP)h(use,)j(the)d(MD5)f(authentication)i(scheme)f(is)g
(always)i(used.)72 b(This)38 b(must)g(be)f(borne)h(in)f(mind)h(if)-150
1195 y Fj(chronyd)25 b Fn(is)e(to)h(inter)n(-operate)h(in)e
(authenticated)i(mode)e(with)h Fj(xntpd)g Fn(r)o(unning)e(on)h(other)g
(computers.)-25 1420 y(The)18 b(ID)g(for)g(the)g(chr)n(onyc)h
(authentication)h(key)e(is)h(speci\002ed)h(with)e(the)h(commandkey)g
(command)f(\(see)h(earlier\).)-150 1744 y Fh(4.2.1)l(1)56
b(local)-25 1969 y Fn(The)26 b(local)i(keywor)n(d)g(is)f(used)f(to)h
(allow)h Fj(chronyd)g Fn(to)f(appear)g(synchr)n(onised)h(to)f(r)n(eal)g
(time)g(\(fr)n(om)g(the)g(view-)-150 2068 y(point)d(of)f(clients)h
(polling)h(it\),)e(even)g(if)g(it)h(has)f(no)f(curr)n(ent)h(synchr)n
(onisation)i(sour)n(ce.)-25 2293 y(This)30 b(option)h(is)e(normally)i
(used)e(on)h(computers)g(in)g(an)f(isolated)j(network,)g(wher)n(e)e
(several)h(computers)f(ar)n(e)-150 2392 y(r)n(equir)n(ed)d(to)h(synchr)
n(onise)g(to)f(one)g(other)-7 b(,)28 b(this)g(being)f(the)g
Fj(")p Fn(master)p Fj(")i Fn(which)d(is)i(kept)g(vaguely)g(in)e(line)h
(with)h(r)n(eal)-150 2492 y(time)c(by)f(manual)f(input.)-25
2716 y(An)g(example)i(of)f(the)g(command)h(is)90 2945
y Fj(local)56 b(stratum)g(10)-25 3169 y Fn(The)26 b(value)h(10)f(may)g
(be)h(substituted)h(with)f(other)g(values)f(in)g(the)h(range)f(1)g(thr)
n(ough)h(15.)38 b(Stratum)26 b(1)g(indicates)-150 3269
y(a)34 b(computer)g(that)h(has)f(a)g(tr)o(ue)g(r)n(eal-time)h(r)n(efer)
n(ence)g(dir)n(ectly)h(connected)g(to)e(it)g(\(e.g.)61
b(GPS,)33 b(atomic)i(clock)g(etc\))-150 3368 y(&ndash;)g(such)30
b(computers)i(ar)n(e)f(expected)i(to)e(be)g(very)g(close)i(to)e(r)n
(eal)h(time.)52 b(Stratum)31 b(2)f(computers)i(ar)n(e)g(those)-150
3468 y(which)23 b(have)g(a)g(stratum)g(1)g(server;)g(stratum)h(3)e
(computers)i(have)f(a)g(stratum)h(2)f(server)g(and)g(so)g(on.)-25
3692 y(A)30 b(lar)n(ge)h(value)f(of)h(10)f(indicates)i(that)f(the)f
(clock)h(is)g(so)f(many)g(hops)h(away)g(fr)n(om)f(a)g(r)n(efer)n(ence)i
(clock)f(that)g(its)-150 3792 y(time)25 b(is)f(fairly)h(unr)n(eliable.)
33 b(Put)24 b(another)g(way)-10 b(,)25 b(if)f(the)h(computer)g(ever)f
(has)g(access)i(to)e(another)h(computer)g(which)-150
3891 y(is)32 b(ultimately)h(synchr)n(onised)g(to)e(a)h(r)n(efer)n(ence)
g(clock,)i(it)e(will)g(almost)h(certainly)g(be)e(at)h(a)f(stratum)h
(less)g(than)f(10.)-150 3991 y(Ther)n(efor)n(e,)d(the)e(choice)h(of)f
(a)g(high)f(value)h(like)h(10)f(for)g(the)g(local)i(command)e(pr)n
(events)h(the)f(machine's)h(own)f(time)-150 4091 y(fr)n(om)h(ever)f
(being)h(confused)g(with)f(r)n(eal)h(time,)h(wer)n(e)f(it)g(ever)f(to)h
(leak)g(out)g(to)g(clients)g(that)g(have)g(visibility)h(of)f(r)n(eal)
-150 4190 y(servers.)-150 4515 y Fh(4.2.12)56 b(log)-25
4739 y Fn(The)23 b(log)g(command)h(indicates)g(that)g(certain)g
(information)g(is)f(to)g(be)g(logged.)-150 4988 y Fj(measurements)330
5088 y Fn(This)h(option)i(logs)f(the)f(raw)g(NTP)f(measur)n(ements)j
(and)d(r)n(elated)j(information)f(to)f(a)g(\002le)g(called)h(mea-)330
5188 y(sur)n(ements.log.)-150 5338 y Fj(statistics)330
5437 y Fn(This)e(option)i(logs)f(information)g(about)f(the)g(r)n(egr)n
(ession)i(pr)n(ocessing)g(to)f(a)f(\002le)g(called)h(statistics.log.)
-150 5587 y Fj(tracking)330 5687 y Fn(This)29 b(option)g(logs)h
(changes)e(to)h(the)g(estimate)h(of)f(the)f(system's)i(gain)f(or)f
(loss)h(rate,)h(and)e(any)g(slews)330 5786 y(made,)23
b(to)h(a)e(\002le)h(called)i(tracking.log.)p eop
%%Page: 21 23
21 22 bop -150 -116 a Fn(Chapter)24 b(4:)k(Usage)c(r)n(efer)n(ence)2883
b(21)-150 236 y Fj(rtc)318 b Fn(This)23 b(option)i(logs)f(information)g
(about)f(the)g(system's)i(r)n(eal-time)g(clock.)-25 479
y(The)e(\002les)g(ar)n(e)g(written)i(to)e(the)g(dir)n(ectory)i
(speci\002ed)g(by)e(the)g(logdir)h(command.)-25 703 y(An)e(example)i
(of)f(the)g(command)h(is)90 931 y Fj(log)55 b(measurements)j
(statistics)f(tracking)-150 1241 y Fh(4.2.12.1)f(Measurements)38
b(log)f(\002le)g(format)-25 1466 y Fn(An)22 b(example)h(line)g(\(which)
g(actually)g(appears)h(as)f(a)f(single)i(line)f(in)f(the)h(\002le\))f
(fr)n(om)h(the)g(measur)n(ements)g(log)h(\002le)-150
1565 y(is)f(shown)h(below)-8 b(.)90 1793 y Fj(22Jul98)56
b(05:40:50)h(158.152.1.76)221 b(N)109 b(8)54 b(1111)i(11)f(1111)g(10)g
(10)109 b(1)55 b(\\)253 1897 y(-4.966e-03)111 b(2.296e-01)h(1.577e-05)f
(1.615e-01)g(7.446e-03)-25 2121 y Fn(The)24 b(columns)h(ar)n(e)g(as)f
(follows)j(\(the)e(quantities)g(in)g(squar)n(e)f(brackets)i(ar)n(e)f
(the)f(values)i(fr)n(om)e(the)h(example)g(line)-150 2221
y(above\))f(:)-98 2445 y(1.)60 b(Date)24 b([22Jul98])-98
2563 y(2.)60 b(Hour:Minute:Second)28 b([05:40:50].)45
b(Note)30 b(that)f(the)f(date/time)j(pair)e(is)g(expr)n(essed)h(in)e
(UTC,)h(not)g(the)f(local)30 2663 y(time)c(zone.)-98
2780 y(3.)60 b(IP)23 b(addr)n(ess)h(of)g(server/peer)g(fr)n(om)f(which)
g(measur)n(ement)h(comes)f([158.152.1.76])-98 2898 y(4.)60
b(Leap)34 b(status)h(\()p Fj(N)f Fn(means)f(normal,)j
Fj(-)d Fn(means)h(that)g(the)g(last)g(minute)g(of)f(today)i(has)e(61)h
(seconds,)j Fj(+)c Fn(means)30 2998 y(that)h(the)g(last)h(minute)f(of)g
(the)f(day)i(has)e(59)h(seconds,)j Fj(?)d Fn(means)g(the)g(r)n(emote)h
(computer)f(is)g(not)g(curr)n(ently)30 3098 y(synchr)n(onised.\))c([N])
-98 3215 y(5.)60 b(Stratum)23 b(of)g(r)n(emote)h(computer)-7
b(.)29 b([2])-98 3333 y(6.)60 b(RFC1305)25 b(tests)f(1)f(thr)n(ough)g
(4)g(\(1=pass,)h(0=fail\))g([1)-5 b(1)g(1)g(1])-98 3451
y(7.)60 b(T)-8 b(ests)34 b(for)e(maximum)f(delay)j(and)e(maximum)f
(delay)j(ratio,)h(against)e(user)f(de\002ned)h(parameters)h(\(1=pass,)
30 3551 y(0=fail\))24 b([1)-5 b(1])-98 3668 y(8.)60 b(RFC1305)25
b(tests)f(5)f(thr)n(ough)g(8)g(\(1=pass,)h(0=fail\))g([1)-5
b(1)g(1)g(1])-98 3786 y(9.)60 b(Local)24 b(poll)g([10])-143
3904 y(10.)60 b(Remote)25 b(poll)f([10])-138 4022 y(1)-5
b(1.)60 b(`Scor)n(e')31 b(\(an)f(internal)h(scor)n(e)g(within)g(each)g
(polling)g(level)h(used)e(to)h(decide)h(when)e(to)h(incr)n(ease)h(or)e
(decr)n(ease)30 4121 y(the)22 b(polling)h(level.)28 b(This)22
b(is)g(adjusted)h(based)g(on)e(changes)h(to)g(the)g(variance)g(of)g
(the)f(measur)n(ements)i(obtained)30 4221 y(fr)n(om)g(the)g(sour)n
(ce\).)29 b([1])-143 4339 y(12.)60 b(The)23 b(estimated)j(local)e
(clock)g(err)n(or)f(\(`theta')h(in)f(RFC1305\).)30 b(Positive)25
b(indicates)g(that)e(the)g(local)i(clock)f(is)f(slow)-8
b(.)30 4439 y([-4.966e-03].)-143 4556 y(13.)60 b(The)23
b(peer)h(delay)g(\(`delta')g(in)f(RFC1305\).)30 b([2.296e-01])-143
4674 y(14.)60 b(The)23 b(peer)h(dispersion)g(\(`epsilon')h(in)e
(RFC1305\).)30 b([1.577e-05])-143 4792 y(15.)60 b(The)23
b(r)n(oot)h(delay)g(\(`Delta')h(in)d(RFC1305\).)30 b([1.615e-01])-143
4910 y(16.)60 b(The)23 b(r)n(oot)h(dispersion)h(\(`E')e(in)g
(RFC1305\).)30 b([7.446e-03])-25 5152 y(A)23 b(banner)f(is)h
(periodically)j(written)e(to)g(the)f(log)h(\002le)f(to)g(indicate)i
(the)e(meanings)g(of)h(the)f(columns.)-150 5462 y Fh(4.2.12.2)56
b(Statistics)39 b(log)e(\002le)g(format)-25 5687 y Fn(An)22
b(example)h(line)g(\(which)g(actually)g(appears)h(as)f(a)f(single)i
(line)f(in)f(the)h(\002le\))f(fr)n(om)h(the)g(measur)n(ements)g(log)h
(\002le)-150 5786 y(is)f(shown)h(below)-8 b(.)p eop
%%Page: 22 24
22 23 bop -150 -116 a Fn(Chapter)24 b(4:)k(Usage)c(r)n(efer)n(ence)2883
b(22)90 236 y Fj(22Jul98)56 b(05:40:50)h(158.152.1.76)275
b(6.261e-03)57 b(-3.247e-03)g(\\)361 340 y(2.220e-03)112
b(1.874e-06)f(1.080e-06)57 b(7.8e-02)111 b(16)163 b(0)g(8)-25
566 y Fn(The)24 b(columns)h(ar)n(e)g(as)f(follows)j(\(the)e(quantities)
g(in)g(squar)n(e)f(brackets)i(ar)n(e)f(the)f(values)i(fr)n(om)e(the)h
(example)g(line)-150 665 y(above\))f(:)-98 891 y(1.)60
b(Date)24 b([22Jul98])-98 1017 y(2.)60 b(Hour:Minute:Second)28
b([05:40:50].)45 b(Note)30 b(that)f(the)f(date/time)j(pair)e(is)g(expr)
n(essed)h(in)e(UTC,)h(not)g(the)f(local)30 1116 y(time)c(zone.)-98
1242 y(3.)60 b(IP)23 b(addr)n(ess)h(of)g(server/peer)g(fr)n(om)f(which)
g(measur)n(ement)h(comes)f([158.152.1.76])-98 1368 y(4.)60
b(The)23 b(estimated)j(standar)n(d)e(deviation)h(of)e(the)g(measur)n
(ements)h(fr)n(om)g(the)f(sour)n(ce)g(\(in)g(seconds\).)30
b([6.261e-03])-98 1494 y(5.)60 b(The)30 b(estimated)i(of)n(fset)f(of)f
(the)g(sour)n(ce)g(\(in)f(seconds,)j(positive)g(means)e(the)f(local)i
(clock)g(is)f(estimated)i(to)e(be)30 1594 y(fast,)23
b(in)g(this)h(case\).)29 b([-3.247e-03])-98 1720 y(6.)60
b(The)23 b(estimated)j(standar)n(d)e(deviation)h(of)e(the)g(of)n(fset)i
(estimate)g(\(in)e(seconds\).)29 b([2.220e-03])-98 1845
y(7.)60 b(The)35 b(estimated)i(rate)e(at)g(which)g(the)g(local)g(clock)
h(is)f(gaining)g(or)g(losing)g(time)h(r)n(elative)h(to)e(the)g(sour)n
(ce)g(\(in)30 1945 y(seconds)29 b(per)e(second,)j(positive)g(means)d
(the)h(local)h(clock)f(is)g(gaining\).)42 b(This)28 b(is)g(r)n(elative)
i(to)e(the)f(compensa-)30 2045 y(tion)h(curr)n(ently)g(being)g(applied)
h(to)f(the)g(local)g(clock,)h Fi(not)37 b Fn(to)28 b(the)g(local)h
(clock)f(without)h(any)e(compensation.)30 2144 y([1.874e-06])-98
2270 y(8.)60 b(The)23 b(estimated)j(err)n(or)d(in)f(the)h(rate)h(value)
f(\(in)g(seconds)h(per)f(second\).)29 b([1.080e-06].)-98
2396 y(9.)60 b(The)30 b(ration)h(of)g Fj(|)p Fn(old)p
779 2396 28 5 v 34 w(rate)f(-)g(new)p 1227 2396 V 34
w(rate)p Fj(|)h Fn(/)e(old)p 1713 2396 V 34 w(rate)p
1900 2396 V 33 w(err)n(or)-7 b(.)51 b(Lar)n(ge)31 b(values)g(indicate)h
(the)e(statistics)k(ar)n(e)c(not)30 2496 y(modelling)25
b(the)e(sour)n(ce)g(very)g(well.)30 b([7.8e-02])-143
2622 y(10.)60 b(The)23 b(number)f(of)h(measur)n(ements)h(curr)n(ently)g
(being)f(used)g(for)g(the)g(r)n(egr)n(ession)i(algorithm.)30
b([16])-138 2748 y(1)-5 b(1.)60 b(The)36 b(new)g(starting)i(index)e
(\(the)g(oldest)i(sample)f(has)f(index)g(0;)42 b(this)36
b(is)h(the)f(method)h(used)f(to)g(pr)o(une)g(old)30 2847
y(samples)c(when)f(it)g(no)f(longer)h(looks)i(like)e(the)g(measur)n
(ements)h(\002t)f(a)f(linear)h(model\).)52 b([0,)33 b(i.e.)51
b(no)30 b(samples)30 2947 y(discar)n(ded)25 b(this)f(time])-143
3073 y(12.)60 b(The)23 b(number)e(of)i(r)o(uns.)k(The)c(number)e(of)i
(r)o(uns)f(of)h(r)n(egr)n(ession)i(r)n(esiduals)f(with)f(the)g(same)g
(sign)g(is)g(computed.)30 3172 y(If)29 b(this)f(is)h(too)g(small)g(it)g
(indicates)h(that)f(the)f(measur)n(ements)i(ar)n(e)e(no)g(longer)h(r)n
(epr)n(esented)i(well)e(by)f(a)g(linear)30 3272 y(model)c(and)e(that)i
(some)f(older)h(samples)g(need)f(to)h(be)f(discar)n(ded.)30
b(The)23 b(number)e(of)i(r)o(uns)f(for)h(the)g(data)h(that)f(is)30
3372 y(being)f(r)n(etained)h(is)g(tabulated.)29 b(V)-8
b(alues)22 b(of)g(appr)n(oximately)j(half)d(the)g(number)f(of)h
(samples)h(ar)n(e)f(expected.)29 b([8])-25 3624 y(A)23
b(banner)f(is)h(periodically)j(written)e(to)g(the)f(log)h(\002le)f(to)g
(indicate)i(the)e(meanings)g(of)h(the)f(columns.)-150
3951 y Fh(4.2.12.3)56 b(T)-12 b(racking)39 b(log)e(\002le)g(format)-25
4177 y Fn(An)22 b(example)h(line)g(\(which)g(actually)g(appears)h(as)f
(a)f(single)i(line)f(in)f(the)h(\002le\))f(fr)n(om)h(the)g(measur)n
(ements)g(log)h(\002le)-150 4277 y(is)f(shown)h(below)-8
b(.)90 4506 y Fj(22Jul98)56 b(05:40:50)h(158.152.1.76)275
b(3)218 b(340.529)327 b(1.606)110 b(1.046e-03)-25 4732
y Fn(The)24 b(columns)h(ar)n(e)g(as)f(follows)j(\(the)e(quantities)g
(in)g(squar)n(e)f(brackets)i(ar)n(e)f(the)f(values)i(fr)n(om)e(the)h
(example)g(line)-150 4831 y(above\))f(:)-98 5057 y(1.)60
b(Date)24 b([22Jul98])-98 5183 y(2.)60 b(Hour:Minute:Second)28
b([05:40:50].)45 b(Note)30 b(that)f(the)f(date/time)j(pair)e(is)g(expr)
n(essed)h(in)e(UTC,)h(not)g(the)f(local)30 5283 y(time)c(zone.)-98
5408 y(3.)60 b(The)23 b(IP)g(addr)n(ess)i(of)e(the)g(server/peer)h(to)f
(which)g(the)g(local)i(system)f(is)f(synchr)n(onised.)30
b([158.152.1.76])-98 5534 y(4.)60 b(The)23 b(stratum)h(of)f(the)g
(local)h(system.)29 b([3])-98 5660 y(5.)60 b(The)23 b(local)h(system)h
(fr)n(equency)e(\(in)f(ppm,)h(positive)j(means)d(the)g(local)h(system)h
(r)o(uns)d(fast)i(of)f(UTC\).)g([340.529])-98 5786 y(6.)60
b(The)23 b(err)n(or)g(bounds)g(on)g(the)g(fr)n(equency)g(\(in)g(ppm\))g
([1.606])p eop
%%Page: 23 25
23 24 bop -150 -116 a Fn(Chapter)24 b(4:)k(Usage)c(r)n(efer)n(ence)2883
b(23)-98 236 y(7.)60 b(The)25 b(estimated)j(local)e(of)n(fset)h(at)e
(the)h(epoch)f(\(which)h(is)f(rapidly)h(corr)n(ected)h(by)e(slewing)i
(the)e(local)h(clock.)36 b(\(In)30 336 y(seconds,)24
b(positive)h(indicates)g(the)e(local)h(system)h(is)e(fast)h(of)f
(UTC\).)h([1.046e-3])-25 601 y(A)f(banner)f(is)h(periodically)j
(written)e(to)g(the)f(log)h(\002le)f(to)g(indicate)i(the)e(meanings)g
(of)h(the)f(columns.)-150 949 y Fh(4.2.12.4)56 b(Real-time)38
b(clock)f(log)h(\002le)f(format)-25 1181 y Fn(An)22 b(example)h(line)g
(\(which)g(actually)g(appears)h(as)f(a)f(single)i(line)f(in)f(the)h
(\002le\))f(fr)n(om)h(the)g(measur)n(ements)g(log)h(\002le)-150
1280 y(is)f(shown)h(below)-8 b(.)90 1517 y Fj(22Jul98)56
b(05:40:50)274 b(-0.037360)57 b(1)381 b(-0.037434\\)633
1620 y(-37.948)111 b(12)163 b(5)109 b(120)-25 1853 y
Fn(The)24 b(columns)h(ar)n(e)g(as)f(follows)j(\(the)e(quantities)g(in)g
(squar)n(e)f(brackets)i(ar)n(e)f(the)f(values)i(fr)n(om)e(the)h
(example)g(line)-150 1952 y(above\))f(:)-98 2184 y(1.)60
b(Date)24 b([22Jul98])-98 2317 y(2.)60 b(Hour:Minute:Second)28
b([05:40:50].)45 b(Note)30 b(that)f(the)f(date/time)j(pair)e(is)g(expr)
n(essed)h(in)e(UTC,)h(not)g(the)f(local)30 2416 y(time)c(zone.)-98
2549 y(3.)60 b(The)33 b(measur)n(ed)g(of)n(fset)h(between)g(the)f
(system's)h(r)n(eal)f(time)g(clock)h(and)e(the)h(system)h(\()p
Fj(gettimeofday\(\))p Fn(\))30 2649 y(time.)29 b(In)23
b(seconds,)g(positive)j(indicates)f(that)e(the)g(R)m(TC)h(is)f(fast)h
(of)f(the)g(system)i(time.)j([-0.037360].)-98 2781 y(4.)60
b(Flag)24 b(indicating)g(whether)g(the)f(r)n(egr)n(ession)i(has)e(pr)n
(oduced)h(valid)g(coef)n(\002cients.)30 b(\(1)23 b(for)g(yes,)g(0)g
(for)g(no\).)28 b([1])-98 2914 y(5.)60 b(Of)n(fset)34
b(at)e(the)h(curr)n(ent)f(time)g(pr)n(edicted)j(by)d(the)h(r)n(egr)n
(ession)h(pr)n(ocess.)57 b(A)32 b(lar)n(ge)i(dif)n(fer)n(ence)g
(between)f(this)30 3013 y(value)24 b(and)f(the)h(measur)n(ed)g(of)n
(fset)i(tends)e(to)g(indicate)h(that)f(the)g(measur)n(ement)g(is)g(an)f
(outlier)h(with)g(a)g(serious)30 3113 y(measur)n(ement)g(err)n(or)-7
b(.)28 b([-0.037434].)-98 3245 y(6.)60 b(The)31 b(rate)g(at)h(which)f
(the)g(R)m(TC)g(is)g(losing)h(or)f(gaining)g(time)h(r)n(elative)h(to)e
(the)g(system)i(clock.)52 b(In)31 b(ppm,)i(with)30 3345
y(positive)25 b(indicating)g(that)e(the)h(R)m(TC)f(is)g(gaining)h
(time.)29 b([-37.948])-98 3478 y(7.)60 b(The)23 b(number)f(of)h(measur)
n(ements)h(used)g(in)e(the)h(r)n(egr)n(ession.)30 b([12])-98
3610 y(8.)60 b(The)26 b(number)f(of)h(r)o(uns)f(of)h(r)n(egr)n(ession)i
(r)n(esiduals)g(of)e(the)g(same)g(sign.)37 b(Low)27 b(values)g
(indicate)g(that)g(a)e(straight)30 3710 y(line)35 b(is)g(no)f(longer)h
(a)f(good)h(model)h(of)e(the)h(measur)n(ed)g(data)h(and)e(that)h(older)
g(measur)n(ements)h(should)f(be)30 3809 y(discar)n(ded.)30
b([5])-98 3942 y(9.)60 b(The)23 b(measur)n(ement)h(interval)g(used)f
(prior)g(to)h(the)f(measur)n(ement)h(being)f(made)h(\(in)f(seconds\).)
29 b([120])-25 4207 y(A)23 b(banner)f(is)h(periodically)j(written)e(to)
g(the)f(log)h(\002le)f(to)g(indicate)i(the)e(meanings)g(of)h(the)f
(columns.)-150 4555 y Fh(4.2.13)56 b(logchange)-25 4787
y Fn(This)29 b(dir)n(ective)h(for)n(ces)g Fj(chronyd)h
Fn(to)e(send)g(a)f(message)i(to)g(syslog)g(if)f(it)g(makes)g(a)g
(system)h(clock)f(adjustment)-150 4886 y(lar)n(ger)24
b(than)e(a)h(thr)n(eshold)i(value.)j(An)23 b(example)g(of)h(use)f(is)90
5123 y Fj(logchange)57 b(0.5)-25 5355 y Fn(which)20 b(would)i(cause)f
(a)g(syslog)i(message)g(to)e(be)g(generated)i(a)d(system)j(clock)f(err)
n(or)f(of)g(over)g(0.5)g(seconds)h(starts)-150 5454 y(to)i(be)f
(compensated.)-25 5687 y(Clock)d(err)n(ors)h(detected)h(either)e(via)h
(NTP)e(packets)j(or)e(via)g(timestamps)i(enter)n(ed)g(via)e(the)g
Fj(settime)h Fn(command)-150 5786 y(of)i Fj(chronyc)i
Fn(ar)n(e)e(logged.)p eop
%%Page: 24 26
24 25 bop -150 -116 a Fn(Chapter)24 b(4:)k(Usage)c(r)n(efer)n(ence)2883
b(24)-25 236 y(This)31 b(dir)n(ective)i(assumes)f(that)f(syslog)i
(messages)g(ar)n(e)e(appearing)h(wher)n(e)g(somebody)g(can)f(see)g
(them.)52 b(This)-150 336 y(allows)21 b(that)e(person)h(to)f(see)h(if)f
(a)g(lar)n(ge)h(err)n(or)f(has)f(arisen,)i(e.g.)27 b(because)19
b(of)g(a)g(fault,)h(or)f(because)g(of)h(faulty)f(timezone)-150
435 y(handling,)k(for)g(example)h(when)e(summer)h(time)h(\(daylight)g
(saving\))g(starts)g(or)f(ends.)-150 764 y Fh(4.2.14)56
b(logdir)-25 989 y Fn(This)23 b(dir)n(ective)i(allows)g(the)e(dir)n
(ectory)i(wher)n(e)f(log)f(\002les)h(ar)n(e)f(written)h(to)g(be)f
(speci\002ed.)-25 1215 y(An)f(example)i(of)f(the)g(use)g(of)g(this)h
(dir)n(ective)h(is)90 1445 y Fj(logdir)56 b(/var/log/chrony)-150
1773 y Fh(4.2.15)g(mailonchange)-25 1999 y Fn(This)21
b(dir)n(ective)h(de\002nes)f(an)f(email)i(addr)n(ess)g(to)f(which)f
(mail)h(should)g(be)g(sent)g(if)f(chr)n(onyd)h(applies)i(a)d(corr)n
(ection)-150 2098 y(exceeding)k(a)f(particular)h(thr)n(eshold)g(to)g
(the)f(system)h(clock.)-25 2324 y(An)e(example)i(of)f(use)g(of)g(this)h
(dir)n(ective)h(is)90 2554 y Fj(mailonchange)58 b(root@localhost)g(0.5)
-25 2780 y Fn(This)27 b(would)h(send)g(a)f(mail)g(message)i(to)f(r)n
(oot)g(if)f(a)g(change)g(of)h(mor)n(e)f(than)g(0.5)g(seconds)i(wer)n(e)
f(applied)h(to)e(the)-150 2879 y(system)d(clock.)-150
3207 y Fh(4.2.16)56 b(manual)-25 3433 y Fn(The)23 b Fj(manual)h
Fn(dir)n(ective)i(enables)e(support)g(at)f(r)o(un-time)g(for)g(the)h
Fj(settime)h Fn(command)e(in)g(chr)n(onyc)g(\(see)h(Sec-)-150
3533 y(tion)i(4.3.4.33)e([settime)k(command],)d(page)h(40\).)35
b(If)25 b(no)g Fj(manual)h Fn(dir)n(ective)i(is)d(included,)h(any)f
(attempt)i(to)e(use)g(the)-150 3632 y Fj(settime)g Fn(command)e(in)g
(chr)n(onyc)g(will)h(be)f(met)g(with)h(an)e(err)n(or)h(message.)-25
3858 y(Note)39 b(that)g(the)g Fj(settime)h Fn(command)f(can)f(be)g
(enabled)i(at)f(r)o(un-time)f(using)h(the)f Fj(manual)i
Fn(command)f(in)-150 3958 y(chr)n(onyc)32 b(\(see)g(Section)g(4.3.4.22)
f([manual)h(command],)h(page)g(34\).)54 b(\(The)32 b(idea)g(of)g(the)f
(two)i(commands)f(is)g(that)-150 4057 y(the)22 b Fj(manual)h
Fn(command)f(contr)n(ols)i(the)d(manual)h(clock)h(driver)7
b('s)22 b(behaviour)-7 b(,)22 b(wher)n(eas)h(the)f Fj(settime)h
Fn(command)-150 4157 y(allows)i(samples)f(of)g(manually)f(enter)n(ed)h
(time)g(to)f(be)g(pr)n(ovided\).)-150 4485 y Fh(4.2.17)56
b(maxupdateskew)-25 4711 y Fn(One)32 b(of)i Fj(chronyd's)h
Fn(tasks)g(is)e(to)h(work)f(out)h(how)f(fast)h(or)f(slow)h(the)f
(computer)7 b('s)34 b(clock)h(r)o(uns)d(r)n(elative)j(to)-150
4810 y(its)29 b(r)n(efer)n(ence)g(sour)n(ces.)45 b(In)28
b(addition,)j(it)d(computes)i(an)d(estimate)k(of)d(the)g(err)n(or)h
(bounds)f(ar)n(ound)g(the)g(estimated)-150 4910 y(value.)-25
5136 y(If)21 b(the)h(range)f(of)h(err)n(or)f(is)h(too)g(lar)n(ge,)h(it)
f(pr)n(obably)h(indicates)g(that)f(the)g(measur)n(ements)g(have)g(not)f
(settled)j(down)-150 5235 y(yet,)f(and)g(that)h(the)f(estimated)i(gain)
f(or)e(loss)i(rate)g(is)f(not)g(very)h(r)n(eliable.)-25
5461 y(The)c Fj(maxupdateskew)k Fn(parameter)e(allows)g(the)f(thr)n
(eshold)g(for)g(determining)g(whether)g(an)f(estimate)j(may)e(be)-150
5561 y(so)i(unr)n(eliable)h(that)g(it)f(should)h(not)f(be)g(used.)-25
5786 y(The)g(syntax)g(is)p eop
%%Page: 25 27
25 26 bop -150 -116 a Fn(Chapter)24 b(4:)k(Usage)c(r)n(efer)n(ence)2883
b(25)90 236 y Fj(maxupdateskew)58 b(<skew-in-ppm>)-25
462 y Fn(T)-8 b(ypical)29 b(values)g(for)f Fj(<)p Fn(skew-in-ppm)p
Fj(>)j Fn(might)e(be)f(100)h(for)f(a)g(dial-up)h(connection)g(to)g
(servers)g(over)f(a)h(phone)-150 561 y(line,)23 b(and)g(5)g(or)f(10)i
(for)e(a)h(computer)h(on)f(a)g(LAN.)-25 787 y(It)j(should)g(be)f(noted)
i(that)f(this)g(is)g(not)g(the)g(only)g(means)f(of)h(pr)n(otection)i
(against)f(using)f(unr)n(eliable)g(estimates.)-150 887
y(At)g(all)f(times,)h Fj(chronyd)h Fn(keeps)f(track)g(of)f(both)g(the)g
(estimated)j(gain)d(or)g(loss)h(rate,)f(and)g(the)g(err)n(or)g(bound)g
(on)f(the)-150 986 y(estimate.)29 b(When)19 b(a)f(new)h(estimate)j(is)d
(generated)h(following)h(another)e(measur)n(ement)h(fr)n(om)f(one)g(of)
g(the)g(sour)n(ces,)i(a)-150 1086 y(weighted)i(combination)g(algorithm)
g(is)e(used)h(to)g(update)g(the)g(master)g(estimate.)30
b(So)21 b(if)g Fj(chronyd)i Fn(has)e(an)g(existing)-150
1186 y(highly-r)n(eliable)36 b(master)d(estimate)i(and)e(a)g(new)g
(estimate)j(is)d(generated)h(which)f(has)g(lar)n(ge)h(err)n(or)f
(bounds,)i(the)-150 1285 y(existing)24 b(master)g(estimate)h(will)f
(dominate)h(in)d(the)h(new)g(master)h(estimate.)-150
1614 y Fh(4.2.18)56 b(noclientlog)-25 1839 y Fn(This)27
b(dir)n(ective,)j(which)d(takes)i(no)e(ar)n(guments,)i(speci\002es)g
(that)e(client)i(accesses)g(ar)n(e)e(not)h(to)g(be)f(logged.)42
b(Nor)n(-)-150 1939 y(mally)24 b(they)f(ar)n(e)h(logged,)g(allowing)h
(statistics)h(to)d(be)g(r)n(eported)i(using)e(the)g Fj(clients)i
Fn(command)e(in)g Fj(chronyc)p Fn(.)-150 2267 y Fh(4.2.19)56
b(peer)-25 2493 y Fn(The)27 b(syntax)g(of)g(this)h(dir)n(ective)h(is)e
(identical)i(to)e(that)h(for)f(the)g Fj(server)h Fn(dir)n(ective)h
(\(see)f(Section)f(4.2.23)g([server)-150 2592 y(dir)n(ective],)e(page)f
(26\),)f(except)h(that)f(it)h(is)f(used)g(to)h(specify)h(an)d(NTP)h
(peer)g(rather)g(than)g(an)g(NTP)g(server)-7 b(.)-150
2921 y Fh(4.2.20)56 b(port)-25 3146 y Fn(This)23 b(option)h(allows)h
(you)e(to)h(con\002gur)n(e)f(the)g(port)g(used)h(for)e(the)i(NTP)f
(service)h(on)e(your)h(machine.)-25 3372 y(The)d(compiled)h(in)f
(default)h(is)f(udp/123,)g(the)g(standar)n(d)i(NTP)d(port.)28
b(It)21 b(is)f(unlikely)h(that)f(you)g(would)g(ever)g(need)-150
3472 y(to)30 b(change)g(this)g(value.)47 b(A)30 b(possible)i(exception)
f(would)f(be)f(if)h(you)f(wanted)i(to)f(operate)h(strictly)h(in)d
(client-only)-150 3571 y(mode)24 b(and)e(never)h(be)g(available)i(as)e
(a)g(server)h(to)f(xntpd)g(clients.)-25 3797 y(An)f(example)i(of)f(the)
g(port)h(command)f(is)90 4027 y Fj(port)55 b(11123)-25
4252 y Fn(This)23 b(would)h(change)f(the)g(NTP)g(port)g(served)h(by)f
(chr)n(onyd)h(on)e(the)h(computer)h(to)g(udp/1)-5 b(1)g(123.)-150
4581 y Fh(4.2.21)56 b(rtc\002le)-25 4806 y Fn(The)23
b Fj(rtcfile)h Fn(dir)n(ective)h(de\002nes)f(the)f(name)g(of)g(the)g
(\002le)g(in)g(which)f Fj(chronyd)j Fn(can)e(save)h(parameters)g
(associ-)-150 4906 y(ated)g(with)g(tracking)g(the)f(accuracy)g(of)g
(the)g(system's)i(r)n(eal-time)g(clock)f(\(R)m(TC\).)-25
5132 y(The)f(syntax)g(is)g(illustrated)j(in)c(the)h(following)i
(example)90 5361 y Fj(rtcfile)56 b(/etc/chrony.rtc)-25
5587 y(chronyd)27 b Fn(saves)f(information)h(in)e(this)h(\002le)f(when)
g(it)h(exits)h(and)e(when)g(the)h Fj(writertc)h Fn(command)f(is)g
(issued)-150 5687 y(in)k Fj(chronyc)p Fn(.)52 b(The)31
b(information)g(saved)h(is)f(the)f(R)m(TC's)i(err)n(or)e(at)h(some)g
(epoch,)i(that)e(epoch)g(\(in)f(seconds)i(since)-150
5786 y(January)23 b(1)f(1970\),)i(and)f(the)g(rate)g(at)h(which)f(the)g
(R)m(TC)g(gains)h(or)e(loses)j(time.)p eop
%%Page: 26 28
26 27 bop -150 -116 a Fn(Chapter)24 b(4:)k(Usage)c(r)n(efer)n(ence)2883
b(26)-25 236 y(So)23 b(far)-7 b(,)25 b(the)f(support)i(for)e(r)n
(eal-time)i(clocks)g(is)f(limited)h(-)e(their)h(code)g(is)g(even)f(mor)
n(e)h(system-speci\002c)i(than)d(the)-150 336 y(r)n(est)i(of)g(the)f
(softwar)n(e.)37 b(Y)-8 b(ou)25 b(can)g(only)g(use)h(the)f(r)n(eal)h
(time)g(clock)g(facilities)i(\(the)e Fj(rtcfile)h Fn(dir)n(ective)g
(and)e(the)g Fj(-s)-150 435 y Fn(command)e(line)h(option)g(to)f
Fj(chronyd)p Fn(\))i(if)e(the)g(following)i(thr)n(ee)f(conditions)h
(apply:)-98 660 y(1.)60 b(Y)-8 b(ou)23 b(ar)n(e)g(r)o(unning)f(Linux)g
(v2.0.x)g(with)i(x)p Fj(>)p Fn(=32.)-98 784 y(2.)60 b(Y)-8
b(ou)24 b(have)g(compiled)j(the)d(kernel)h(with)g(extended)g(r)n
(eal-time)h(clock)g(support)f(\(i.e.)32 b(the)25 b(`)p
Fj(/dev/rtc)p Fn(')h(device)30 883 y(is)d(capable)i(of)e(doing)h
(useful)e(things\).)-98 1008 y(3.)60 b(Y)-8 b(ou)23 b(don't)g(have)g
(other)h(applications)i(that)d(need)g(to)h(make)f(use)g(of)g(`)p
Fj(/dev/rtc)p Fn(')j(at)d(all.)-150 1331 y Fh(4.2.22)56
b(rtconutc)-25 1555 y Fj(chronyd)30 b Fn(assumes)g(by)f(default)h(that)
f(the)g(r)n(eal)h(time)f(clock)h(\(R)m(TC\))g(keeps)g(local)g(time)g
(\(including)f(any)g(day-)-150 1655 y(light)f(saving)f(changes\).)41
b(This)27 b(is)g(convenient)h(on)e(PCs)h(r)o(unning)f(Linux)g(which)h
(ar)n(e)g(dual-booted)i(with)f(DOS)e(or)-150 1754 y(W)-5
b(indows.)-25 1978 y(NOTE)27 b(:)f(IF)h(YOU)g(KEEP)f(THE)i(REAL)g(TIME)
f(CLOCK)f(ON)h(LOCAL)h(TIME)f(AND)g(YOUR)h(COMPUTER)f(IS)-150
2078 y(OFF)20 b(WHEN)g(DA)-10 b(YLIGHT)21 b(SA)-10 b(VING)20
b(\(SUMMER)f(TIME\))h(ST)-7 b(AR)m(TS)20 b(OR)g(ENDS,)e(THE)i
(COMPUTER'S)g(SYSTEM)-150 2178 y(TIME)j(WILL)i(BE)e(ONE)g(HOUR)h(IN)f
(ERROR)i(WHEN)f(YOU)f(NEXT)h(BOOT)g(AND)f(ST)-7 b(AR)m(T)24
b(CHRONYD.)-25 2402 y(An)d(alternative)i(is)f(for)g(the)f(R)m(TC)h(to)g
(keep)h(Universal)g(Coor)n(dinated)h(T)-5 b(ime)22 b(\(UTC\).)g(This)g
(does)h(not)f(suf)n(fer)f(fr)n(om)-150 2501 y(the)i(1)g(hour)f(pr)n
(oblem)i(when)f(daylight)i(saving)e(starts)i(or)d(ends.)-25
2726 y(If)j(the)h Fj(rtconutc)h Fn(dir)n(ective)h(appears,)f(it)f
(means)f(the)h(R)m(TC)f(is)h(r)n(equir)n(ed)g(to)g(keep)g(UTC.)g(The)g
(dir)n(ective)h(takes)-150 2825 y(no)c(ar)n(guments.)28
b(It)c(is)f(equivalent)h(to)g(specifying)h(the)e Fj(-u)g
Fn(switch)h(to)g(the)f(Linux)f(`)p Fj(/sbin/clock)p Fn(')k(pr)n(ogram.)
-150 3148 y Fh(4.2.23)56 b(server)-25 3373 y Fn(The)24
b Fj(server)i Fn(dir)n(ective)h(allows)f(NTP)f(servers)g(to)g(be)g
(speci\002ed.)34 b(The)25 b(client/server)h(r)n(elationship)h(is)e
(strictly)-150 3472 y(hierar)n(chical)31 b(:)43 b(a)30
b(client)i(may)f(synchr)n(onise)g(its)g(system)h(time)f(to)g(that)h(of)
e(the)h(server)-7 b(,)32 b(but)f(the)f(server)7 b('s)31
b(system)-150 3572 y(time)24 b(will)g(never)f(be)g(in\003uenced)g(by)g
(that)g(of)g(a)g(client.)-25 3796 y(The)28 b Fj(server)i
Fn(dir)n(ective)h(is)e(immediately)h(followed)h(by)e(either)g(the)f
(name)h(of)f(the)h(server)-7 b(,)30 b(or)e(its)i(IP)e(addr)n(ess)-150
3896 y(in)j(dotted-quad)i(notation.)53 b(The)31 b(server)h(command)f
(also)h(supports)g(a)f(number)f(of)i(sub\002elds)f(\(which)g(may)h(be)
-150 3995 y(de\002ned)23 b(in)g(any)g(or)n(der\):)-150
4244 y Fj(port)264 b Fn(This)34 b(option)i(allows)g(the)e(UDP)g(port)g
(on)g(which)g(the)g(server)g(understands)h(NTP)f(r)n(equests)h(to)g(be)
330 4344 y(speci\002ed.)51 b(For)31 b(normal)f(servers)h(this)g(option)
g(should)g(not)f(be)g(r)n(equir)n(ed)h(\(the)g(default)g(is)f(123,)i
(the)330 4443 y(standar)n(d)24 b(NTP)f(port\).)-150 4592
y Fj(minpoll)102 b Fn(Although)22 b Fj(chronyd)i Fn(will)f(trim)e(the)h
(rate)g(at)h(which)e(it)h(samples)i(the)e(server)g(during)f(normal)h
(opera-)330 4692 y(tion,)g(the)g(user)g(may)g(wish)g(to)h(constrain)f
(the)g(minimum)f(polling)j(interval.)k(This)23 b(is)f(always)h
(de\002ned)330 4791 y(as)c(a)g(power)h(of)f(2,)g(so)g
Fj(<)p Fn(tt/minpoll)i(5/)d(would)i(mean)e(that)i(the)f(polling)h
(interval)g(cannot)f(dr)n(op)g(below)330 4891 y(32)k(seconds.)29
b(The)24 b(default)g(is)f(6)g(\(64)g(seconds\).)-150
5040 y Fj(maxpoll)102 b Fn(In)21 b(a)g(similar)g(way)-10
b(,)22 b(the)f(user)g(may)g(wish)g(to)h(constrain)g(the)f(maximum)f
(polling)i(interval.)29 b(Again)21 b(this)330 5139 y(is)g(speci\002ed)i
(as)e(a)g(power)h(of)f(2,)f(so)i Fj(<)p Fn(tt/maxpoll)h(9/)d(indicates)
j(that)f(the)f(polling)h(interval)g(must)f(stay)330 5239
y(at)i(or)g(below)h(512)g(seconds.)29 b(The)23 b(default)h(is)g(10)f
(\(1024)g(seconds\).)-150 5388 y Fj(maxdelay)330 5487
y(chronyd)34 b Fn(uses)e(the)h(network)g(r)n(ound-trip)g(delay)g(to)g
(the)f(server)h(to)f(determine)i(how)e(accurate)h(a)330
5587 y(particular)c(measur)n(ement)f(is)g(likely)i(to)e(be.)42
b(Long)28 b(r)n(ound-trip)h(delays)g(indicate)g(that)g(the)e(r)n
(equest,)330 5687 y(or)e(the)g(r)n(esponse,)i(or)e(both)h(wer)n(e)g
(delayed.)37 b(If)25 b(only)h(one)f(of)g(the)h(messages)h(was)f
(delayed)h(the)e(mea-)330 5786 y(sur)n(ement)e(err)n(or)g(is)h(likely)g
(to)g(be)f(substantial.)p eop
%%Page: 27 29
27 28 bop -150 -116 a Fn(Chapter)24 b(4:)k(Usage)c(r)n(efer)n(ence)2883
b(27)330 236 y(For)32 b(small)i(variations)f(in)f(r)n(ound)g(trip)h
(delay)-10 b(,)36 b Fj(chronyd)e Fn(uses)e(a)g(weighting)i(scheme)f
(when)f(pr)n(o-)330 336 y(cessing)f(the)f(measur)n(ements.)49
b(However)-7 b(,)32 b(beyond)f(a)e(certain)h(level)h(of)f(delay)h(the)e
(measur)n(ements)330 435 y(ar)n(e)g(likely)g(to)g(be)g(so)f(corr)o
(upted)i(as)e(to)h(be)f(useless.)45 b(\(This)29 b(is)g(particularly)g
(so)g(on)f(dial-up)h(or)f(other)330 535 y(slow)j(links,)g(wher)n(e)g(a)
e(long)h(delay)h(pr)n(obably)g(indicates)h(a)d(highly)h(asymmetric)i
(delay)e(caused)h(by)330 635 y(the)23 b(r)n(esponse)i(waiting)f(behind)
f(a)g(lot)h(of)f(packets)i(r)n(elated)g(to)e(a)g(download)i(of)e(some)h
(sort\).)330 762 y(If)j(the)g(user)g(knows)g(that)h(r)n(ound)e(trip)i
(delays)g(above)g(a)e(certain)i(level)g(should)f(cause)g(the)g(measur)n
(e-)330 861 y(ment)e(to)h(be)g(ignor)n(ed,)g(this)g(level)h(can)e(be)g
(de\002ned)h(with)g(the)f(maxdelay)h(command.)36 b(For)25
b(example,)330 961 y Fj(<)p Fn(tt/maxdelay)j(0.3/)d(would)i(indicate)g
(that)g(measur)n(ements)g(with)f(a)g(r)n(ound-trip)g(delay)h(of)f(0.3)g
(sec-)330 1060 y(onds)d(or)g(mor)n(e)h(should)f(be)g(ignor)n(ed.)-150
1214 y Fj(maxdelayratio)330 1314 y Fn(This)g(option)h(is)f(similar)h
(to)f(the)g(maxdelay)g(option)h(above.)29 b Fj(chronyd)c
Fn(keeps)f(a)e(r)n(ecor)n(d)i(of)f(the)g(mini-)330 1414
y(mum)e(r)n(ound-trip)j(delay)f(amongst)h(the)e(pr)n(evious)i(measur)n
(ements)g(that)e(it)h(has)g(buf)n(fer)n(ed.)28 b(If)23
b(a)f(mea-)330 1513 y(sur)n(ement)e(has)g(a)f(r)n(ound)h(trip)g(delay)h
(that)f(is)g(gr)n(eater)h(than)e(the)h(maxdelayratio)i(times)f(the)e
(minimum)330 1613 y(delay)-10 b(,)24 b(it)f(will)h(be)f(r)n(ejected.)
-150 1767 y Fj(presend)102 b Fn(If)29 b(the)f(timing)h(measur)n(ements)
h(being)f(made)g(by)f Fj(chronyd)i Fn(ar)n(e)f(the)g(only)f(network)i
(data)f(passing)330 1866 y(between)k(two)g(computers,)h(you)e(may)f
(\002nd)g(that)i(some)f(measur)n(ements)h(ar)n(e)f(badly)g(skewed)i
(due)330 1966 y(to)28 b(either)h(the)f(client)h(or)e(the)h(server)g
(having)g(to)g(do)h(an)e(ARP)h(lookup)h(on)e(the)h(other)g(party)h
(prior)f(to)330 2066 y(transmitting)23 b(a)f(packet.)29
b(This)23 b(is)f(mor)n(e)g(of)g(a)f(pr)n(oblem)i(with)g(long)f
(sampling)h(intervals,)g(which)f(may)330 2165 y(be)h(similar)h(in)f
(duration)g(to)g(the)h(lifetime)g(of)g(entries)g(in)e(the)h(ARP)g
(caches)h(of)f(the)g(machines.)330 2292 y(In)g(or)n(der)h(to)g(avoid)g
(this)g(pr)n(oblem,)h(the)e Fj(presend)i Fn(option)g(may)e(be)h(used.)
29 b(It)24 b(takes)h(a)e(single)i(integer)330 2392 y(ar)n(gument,)34
b(which)e(is)h(the)f(smallest)i(polling)g(interval)f(for)f(which)g(a)g
(pair)g(of)g(packets)j(will)e(be)f(ex-)330 2491 y(changed)22
b(between)h(the)e(client)h(and)g(the)f(server)h(prior)g(to)g(the)f
(actual)h(measur)n(ement)h(being)e(initiated)330 2591
y(by)i(the)g(client.)29 b(For)23 b(example,)h(with)f(the)g(following)j
(option)e(included)f(in)g(a)g Fj(server)h Fn(dir)n(ective)i(:)570
2722 y Fj(presend)56 b(9)330 2849 y Fn(when)21 b(the)h(polling)h
(interval)g(is)f(512)g(seconds)h(or)f(mor)n(e,)g(a)f(UDP)h(echo)g
(datagram)g(will)h(be)f(sent)g(to)g(the)330 2948 y(server)h(a)g(short)g
(time)h(\(curr)n(ently)g(4)f(seconds\))h(befor)n(e)g(the)f(NTP)g
(client)h(mode)g(datagram.)-150 3102 y Fj(key)318 b Fn(The)22
b(NTP)g(pr)n(otocol)j(supports)e(the)f(inclusion)h(of)f(checksums)g(in)
g(the)g(packets,)i(to)f(pr)n(event)g(comput-)330 3202
y(ers)k(having)h(their)f(system)i(time)f(upset)g(by)f(r)n(ogue)h
(packets)h(being)f(sent)g(to)g(them.)41 b(The)27 b(checksums)330
3301 y(ar)n(e)c(generated)i(as)e(a)g(function)g(of)g(a)g(passwor)n(d,)i
(using)e(the)g(MD5)f(algorithm.)330 3428 y(The)f(association)i(between)
e(key)g(numbers)f(and)g(passwor)n(ds)j(is)e(contained)h(in)e(the)g
(keys)i(\002le,)e(de\002ned)330 3528 y(by)j(the)g(key\002le)h(command.)
330 3655 y(If)36 b(the)g(key)g(option)h(is)f(pr)n(esent,)j
Fj(chronyd)f Fn(will)e(attempt)i(to)e(use)g(authenticated)h(packets)h
(when)330 3754 y(communicating)25 b(with)g(this)f(server)-7
b(.)32 b(The)25 b(key)f(number)f(used)i(will)g(be)f(the)g(single)h(ar)n
(gument)g(to)f(the)330 3854 y(key)33 b(option.)59 b(The)33
b(server)g(must)f(have)h(the)g(same)g(passwor)n(d)i(for)e(this)g(key)g
(number)f(con\002gur)n(ed,)330 3954 y(otherwise)25 b(no)e(r)n
(elationship)i(between)f(the)f(computers)h(will)g(be)f(possible.)-150
4107 y Fj(offline)102 b Fn(If)34 b(the)f(server)h(will)g(not)f(be)h(r)n
(eachable)g(when)f Fj(chronyd)i Fn(is)f(started,)j(the)c(of)n(\003ine)i
(option)f(may)g(be)330 4207 y(speci\002ed.)e Fj(chronyd)25
b Fn(will)g(not)e(try)h(to)g(poll)h(the)f(server)g(until)g(it)g(is)g
(enabled)g(to)g(do)g(so)g(\(by)g(using)f(the)330 4307
y(online)g(option)i(of)e Fj(chronyc)p Fn(\).)-150 4673
y Fm(4.3)59 b(Running)41 b(chronyc)-25 4899 y Fn(Chr)n(onyc)17
b(is)h(the)g(pr)n(ogram)h(that)f(can)g(be)f(used)h(to)h(r)n
(econ\002gur)n(e)f(options)h(within)g(the)e Fj(chronyd)j
Fn(pr)n(ogram)e(whilst)-150 4999 y(it)23 b(is)h(r)o(unning.)j(Chr)n
(onyc)c(can)g(also)h(be)f(used)g(to)g(generate)h(status)h(r)n(eports)f
(about)f(the)h(operation)g(of)f Fj(chronyd)p Fn(.)-150
5329 y Fh(4.3.1)55 b(Basic)38 b(use)-25 5556 y Fn(The)23
b(pr)n(ogram)g(chr)n(onyc)h(is)f(r)o(un)f(by)h(entering)90
5786 y Fj(chronyc)p eop
%%Page: 28 30
28 29 bop -150 -116 a Fn(Chapter)24 b(4:)k(Usage)c(r)n(efer)n(ence)2883
b(28)-25 236 y(at)30 b(the)f(command)h(line.)48 b(The)30
b(pr)n(ompt)h Fj(chronyc)g Fn(is)f(displayed)i(whilst)f(chr)n(onyc)f
(is)g(expecting)h(input)e(fr)n(om)-150 336 y(the)f(user)-7
b(,)28 b(when)g(it)g(is)g(being)g(r)o(un)f(fr)n(om)h(a)f(terminal.)43
b(If)28 b(chr)n(onyc's)g(input)g(or)g(output)g(ar)n(e)g(r)n(edir)n
(ected)i(fr)n(om/to)f(a)-150 435 y(\002le,)23 b(the)g(pr)n(ompt)h(is)f
(ow)h(shown.)-25 663 y(When)i(you)h(ar)n(e)g(\002nished)f(entering)h
(commands,)h(the)f(commands)g Fj(exit)h Fn(or)e Fj(quit)i
Fn(will)f(terminate)h(the)f(pr)n(o-)-150 762 y(gram.)h(\(Entering)511
759 y Fe(h)p 535 706 298 4 v 535 762 a Fd(Contr)o(ol-D)p
535 778 V 829 759 a Fe(i)881 762 y Fn(will)c(also)g(terminate)h(the)e
(pr)n(ogram.\))-150 1095 y Fh(4.3.2)55 b(Command)38 b(line)f(options)
-25 1322 y Fn(Chr)n(onyc)23 b(supports)h(the)f(following)i(command)e
(line)h(options.)-150 1577 y Fj(-v)372 b Fn(Displays)25
b(the)e(version)h(number)e(of)h(chr)n(onyc)g(on)g(the)g(terminal,)g
(and)g(exists.)-150 1732 y Fj(-h)g(<host>)330 1832 y
Fn(This)j(option)h(allows)h(the)e(user)f(to)i(specify)g(which)f(host)g
(r)o(unning)f(the)h Fj(chronyd)i Fn(pr)n(ogram)e(is)g(to)h(be)330
1931 y(contacted.)38 b(This)26 b(allows)h(for)f(r)n(emote)h
(con\002guration,)f(without)h(having)f(to)g(telnet)h(or)e(rlogin)h(to)g
(the)330 2031 y(other)d(host)h(\002rst.)330 2159 y(The)19
b(default)h(is)g(to)f(contact)i Fj(chronyd)f Fn(r)o(unning)e(on)h(the)g
(same)h(host)f(as)h(that)f(wher)n(e)h(chr)n(onyc)f(is)g(being)330
2258 y(r)o(un.)-150 2413 y Fj(-p)k(<port>)330 2513 y
Fn(This)i(option)g(allows)i(the)d(user)g(to)h(specify)h(the)e(UDP)g
(port)h(number)f(which)g(the)g(tar)n(get)i Fj(chronyd)g
Fn(is)330 2613 y(using)18 b(for)g(its)i(command)e(&)h(monitoring)g
(connections.)28 b(This)19 b(defaults)g(to)g(the)g(compiled-in)h
(default;)330 2712 y(ther)n(e)k(would)f(rar)n(ely)h(be)f(a)g(need)g(to)
h(change)f(this.)-150 3045 y Fh(4.3.3)55 b(Security)39
b(with)e(chronyc)-25 3272 y Fn(Many)23 b(of)i(the)f(commands)h
(available)h(thr)n(ough)e(chr)n(onyc)h(have)f(a)g(fair)g(amount)g(of)h
(power)g(to)g(r)n(econ\002gur)n(e)f(the)-150 3372 y(r)o(un-time)k
(behaviour)g(of)h Fj(chronyd)p Fn(.)45 b(Consequently)-10
b(,)30 b Fj(chronyc)g Fn(is)e(quite)g(danger)n(ous)h(for)f(the)g
(integrity)i(of)e(the)-150 3471 y(tar)n(get)f(system's)h(clock)e
(performance.)36 b(Having)26 b(access)h(to)f Fj(chronyd)h
Fn(via)f(chr)n(onyc)f(is)h(mor)n(e)g(or)f(less)i(equivalent)-150
3571 y(to)21 b(being)g(able)g(to)h(modify)f Fj(chronyd's)i
Fn(con\002guration)e(\002le)g(\(typically)i(`)p Fj(/etc/chrony.conf)p
Fn('\))j(and)20 b(to)h(r)n(estart)-150 3671 y Fj(chronyd)p
Fn(.)-25 3898 y(Chr)n(onyc)30 b(also)i(pr)n(ovides)h(a)e(number)e(of)i
(monitoring)h(\(as)f(opposed)i(to)e(commanding\))h(commands,)h(which)
-150 3997 y(will)i(not)g(af)n(fect)h(the)e(behaviour)h(of)f
Fj(chronyd)p Fn(.)64 b(However)-7 b(,)38 b(you)c(may)h(still)h(want)e
(to)h(r)n(estrict)h(access)g(to)f(these)-150 4097 y(commands.)-25
4324 y(In)19 b(view)i(of)f(this,)g(access)i(to)e(some)g(of)g(the)g
(capabilities)k(of)c(chr)n(onyc)f(will)i(usually)g(be)e(tightly)j
(contr)n(olled.)29 b(Ther)n(e)-150 4424 y(ar)n(e)23 b(two)h(mechanisms)
g(supported:)-98 4651 y(1.)60 b(The)27 b(set)g(of)g(hosts)h(fr)n(om)f
(which)f Fj(chronyd)j Fn(will)e(accept)h(commands)g(can)e(be)h(r)n
(estricted.)41 b(By)27 b(default,)h(com-)30 4750 y(mands)23
b(will)h(only)g(be)f(accepted)i(fr)n(om)e(the)g(same)g(host)h(that)g
Fj(chronyd)g Fn(is)g(r)o(unning)d(on.)-98 4878 y(2.)60
b(Any)22 b(command)h(that)g(actually)g(r)n(econ\002gur)n(es)g(some)g
(aspect)h(of)f Fj(chronyd's)h Fn(behaviour)f(r)n(equir)n(es)g(the)f
(user)30 4977 y(of)34 b(chr)n(onyc)g(to)h(know)f(a)g(passwor)n(d.)63
b(This)34 b(passwor)n(d)j(is)d(speci\002ed)h(in)f Fj(chronyd's)i
Fn(keys)f(\002le)f(\(see)h(Sec-)30 5077 y(tion)24 b(4.2.10)f
([key\002le)h(dir)n(ective],)h(page)f(19\))g(and)f(speci\002ed)i(via)e
(the)g(commandkey)i(option)f(in)f(its)h(con\002gura-)30
5177 y(tion)g(\002le)f(\(see)g(Section)h(4.2.3)f([commandkey)h(dir)n
(ective],)h(page)f(17\).)-25 5432 y(Only)f(the)g(following)i(commands)e
(can)g(be)g(used)g Fi(without)34 b Fn(pr)n(oviding)24
b(a)f(passwor)n(d:)-75 5659 y Fl(\017)60 b Fj(exit)-75
5786 y Fl(\017)g Fj(help)p eop
%%Page: 29 31
29 30 bop -150 -116 a Fn(Chapter)24 b(4:)k(Usage)c(r)n(efer)n(ence)2883
b(29)-75 236 y Fl(\017)60 b Fj(password)-75 363 y Fl(\017)g
Fj(quit)-75 491 y Fl(\017)g Fj(rtcdata)-75 618 y Fl(\017)g
Fj(sources)-75 745 y Fl(\017)g Fj(sourcestats)-75 872
y Fl(\017)g Fj(tracking)-25 1127 y Fn(All)36 b(other)g(commands)g(r)n
(equir)n(e)g(a)g(passwor)n(d)i(to)e(have)g(been)g(speci\002ed)h(pr)n
(eviously)-10 b(,)40 b(because)d(they)f(af)n(fect)-150
1226 y Fj(chronyd's)25 b Fn(operation.)-150 1558 y Fh(4.3.4)55
b(Command)38 b(reference)-25 1785 y Fn(This)20 b(section)i(describes)g
(each)e(of)h(the)f(commands)h(available)h(within)f(the)g(chr)n(onyc)f
(pr)n(ogram.)28 b(Chr)n(onyc)20 b(of)n(fers)-150 1885
y(the)j(user)g(a)g(simple)h(command-line)g(driven)f(interface.)-150
2216 y Fh(4.3.4.1)56 b(accheck)-25 2443 y Fn(This)23
b(command)g(allows)i(you)e(to)g(check)h(whether)f(client)h(NTP)f
(access)h(is)g(allowed)h(fr)n(om)e(a)g(particular)h(host.)-25
2670 y(Examples)g(of)f(use,)f(showing)i(a)f(named)g(host)h(and)f(a)f
(numeric)h(IP)g(addr)n(ess,)h(ar)n(e)f(as)g(follows:)90
2901 y Fj(accheck)56 b(a.b.c)90 3005 y(accheck)g(1.2.3.4)-25
3232 y Fn(This)23 b(command)g(can)f(be)h(used)f(to)i(examine)e(the)h
(ef)n(fect)i(of)d(a)h(series)h(of)e Fj(allow)p Fn(,)i
Fj(allow)g(all)p Fn(,)f Fj(deny)g Fn(and)g Fj(deny)-150
3331 y(all)h Fn(commands)f(speci\002ed)i(either)e(via)h(chr)n(onyc,)e
(or)h(in)g Fj(chronyd's)i Fn(con\002guration)e(\002le.)-150
3663 y Fh(4.3.4.2)56 b(add)37 b(peer)-25 3890 y Fn(The)23
b Fj(add)g(peer)h Fn(command)f(allows)i(a)e(new)g(NTP)g(peer)g(to)h(be)
f(added)h(whilst)g Fj(chronyd)h Fn(is)e(r)o(unning.)-25
4117 y(Following)k(the)e(wor)n(ds)h Fj(add)d(peer)p Fn(,)j(the)f
(syntax)g(of)g(the)g(following)i(parameters)f(and)f(options)h(is)f
(identical)i(to)-150 4216 y(that)d(for)e(the)i Fj(peer)f
Fn(dir)n(ective)j(in)c(the)h(con\002guration)h(\002le)f(\(see)h
(Section)f(4.2.19)g([peer)h(dir)n(ective],)h(page)e(25\).)-25
4443 y(An)f(example)i(of)f(using)g(this)h(command)f(is)g(shown)g(below)
-8 b(.)90 4674 y Fj(add)55 b(peer)h(foo.bar.com)h(minpoll)g(6)d
(maxpoll)j(10)d(authkey)j(25)-150 5006 y Fh(4.3.4.3)f(add)37
b(server)-25 5233 y Fn(The)23 b Fj(add)g(server)i Fn(command)e(allows)i
(a)d(new)i(NTP)e(server)i(to)f(be)g(added)h(whilst)h
Fj(chronyd)f Fn(is)g(r)o(unning.)-25 5460 y(Following)i(the)f(wor)n(ds)
g Fj(add)f(server)p Fn(,)i(the)e(syntax)h(of)g(the)f(following)j
(parameters)f(and)e(options)i(is)f(identical)-150 5559
y(to)d(that)g(for)g(the)g Fj(server)h Fn(dir)n(ective)h(in)d(the)h
(con\002guration)g(\002le)g(\(see)g(Section)h(4.2.23)e([server)h(dir)n
(ective],)i(page)f(26\).)-25 5786 y(An)f(example)i(of)f(using)g(this)h
(command)f(is)g(shown)g(below)-8 b(.)p eop
%%Page: 30 32
30 31 bop -150 -116 a Fn(Chapter)24 b(4:)k(Usage)c(r)n(efer)n(ence)2883
b(30)90 236 y Fj(add)55 b(server)h(foo.bar.com)i(minpoll)e(6)f(maxpoll)
h(10)f(authkey)h(25)-150 553 y Fh(4.3.4.4)g(allow)-25
777 y Fn(The)29 b(ef)n(fect)j(of)d(the)h(allow)h(command)f(is)g
(identical)i(to)e(the)f Fj(allow)i Fn(dir)n(ective)h(in)d(the)h
(con\002guration)g(\002le)g(\(see)-150 877 y(Section)24
b(4.2.1)e([allow)j(dir)n(ective],)g(page)f(15\).)-25
1101 y(The)f(syntax)g(is)g(illustrated)j(in)c(the)h(following)i
(examples:)90 1329 y Fj(allow)56 b(foo.bar.com)90 1433
y(allow)g(1.2)90 1537 y(allow)g(3.4.5)-150 1854 y Fh(4.3.4.5)g(allow)38
b(all)-25 2078 y Fn(The)29 b(ef)n(fect)i(of)f(the)g(allow)h(command)f
(is)g(identical)h(to)f(the)g Fj(allow)24 b(all)30 b Fn(dir)n(ective)i
(in)d(the)h(con\002guration)g(\002le)-150 2177 y(\(see)24
b(Section)f(4.2.1)g([allow)i(dir)n(ective],)f(page)g(15\).)-150
2494 y Fh(4.3.4.6)56 b(burst)-25 2718 y Fn(The)33 b Fj(burst)h
Fn(command)g(tells)h Fj(chronyd)g Fn(to)f(make)g(a)f(set)h(of)f(measur)
n(ements)i(to)f(each)f(of)h(its)g(sour)n(ces)g(over)-150
2818 y(a)h(short)g(duration)g(\(rather)g(than)f(the)h(usual)g(periodic)
h(measur)n(ements)h(that)e(it)g(makes\).)65 b(After)35
b(such)f(a)h(burst,)-150 2918 y Fj(chronyd)c Fn(will)f(r)n(evert)g(to)f
(the)g(pr)n(evious)i(state)f(for)f(each)g(sour)n(ce.)47
b(This)29 b(might)h(be)f(either)g(online,)i(if)e(the)g(sour)n(ce)-150
3017 y(was)k(being)f(periodically)j(measur)n(ed)e(in)f(the)g(normal)g
(way)-10 b(,)35 b(or)c(of)n(\003ine,)k(if)e(the)f(sour)n(ce)g(had)g
(been)g(indicated)i(as)-150 3117 y(being)24 b(of)n(\003ine.)30
b(\(Switching)24 b(a)f(sour)n(ce)h(between)h(the)f(online)f(and)h(of)n
(\003ine)g(states)h(is)f(described)h(in)e(Section)h(4.3.4.29)-150
3216 y([online)g(command],)e(page)i(38,)f(Section)h(4.3.4.28)e([of)n
(\003ine)i(command],)f(page)h(37\).)-25 3441 y(The)f(syntax)g(of)g(the)
g(burst)g(command)g(is)h(as)f(follows)90 3669 y Fj(burst)56
b(<n-good-measurements>/<)q(max-)q(mea)q(sur)q(emen)q(ts>)61
b([<mask>/<masked-address)q(>])-25 3893 y Fn(The)20 b(mask)i(and)e
(masked-addr)n(ess)25 b(ar)n(guments)c(ar)n(e)g(optional,)i(in)d(which)
h(case)h Fj(chronyd)g Fn(will)g(initiate)h(a)e(burst)-150
3993 y(for)i(all)g(of)h(its)f(curr)n(ently)h(de\002ned)f(sour)n(ces.)
-25 4217 y(The)g(ar)n(guments)g(have)g(the)g(following)i(meaning)f(and)
e(format.)-150 4462 y Fj(n-good-measurements)330 4562
y Fn(This)30 b(de\002nes)g(the)g(number)f(of)g(good)i(measur)n(ements)g
(that)f Fj(chronyd)i Fn(will)f(want)f(to)g(obtain)g(fr)n(om)330
4662 y(each)25 b(sour)n(ce.)35 b(A)25 b(measur)n(ement)i(is)e(good)h
(if)f(it)h(passes)h(certain)f(tests,)h(for)e(example,)h(the)f(r)n(ound)
g(trip)330 4761 y(time)g(to)f(the)h(sour)n(ce)f(must)g(be)h
(acceptable.)33 b(\(This)25 b(allows)h Fj(chronyd)g Fn(to)e(r)n(eject)i
(measur)n(ements)f(that)330 4861 y(ar)n(e)e(likely)i(to)e(be)g
(bogus.\))-150 5003 y Fj(max-measurements)330 5103 y
Fn(This)g(de\002nes)h(the)f(maximum)f(number)f(of)i(measur)n(ements)h
(that)g Fj(chronyd)g Fn(will)g(attempt)h(to)f(make,)330
5203 y(even)f(if)g(the)g(r)n(equir)n(ed)h(number)e(of)h(good)h(measur)n
(ements)g(has)f(not)g(been)g(obtained.)-150 5345 y Fj(mask)264
b Fn(This)23 b(is)f(a)g(dotted)i(quad)e(ar)n(gument)g(\(e.g.)28
b Fj(255.255.255.0)p Fn(\))e(with)d(which)f(the)g(IP)g(addr)n(ess)i(of)
f(each)330 5445 y(of)g Fj(chronyd)p Fn('s)i(sour)n(ces)f(is)g(to)f(be)g
(masked.)-150 5587 y Fj(masked-address)330 5687 y Fn(This)34
b(is)g(a)f(dotted)i(quad)e(ar)n(gument)h(\(e.g.)60 b
Fj(1.2.3.0)p Fn(\).)h(If)34 b(the)f(masked)i(IP)e(addr)n(ess)i(of)f(a)f
(sour)n(ce)330 5786 y(matches)24 b(this)f(value)h(then)e(the)i(burst)e
(command)i(is)f(applied)i(to)e(that)h(sour)n(ce.)p eop
%%Page: 31 33
31 32 bop -150 -116 a Fn(Chapter)24 b(4:)k(Usage)c(r)n(efer)n(ence)2883
b(31)-25 236 y(If)36 b(no)h(mask)g(or)f(masked)i(addr)n(ess)g(ar)n
(guments)f(ar)n(e)g(pr)n(ovided,)42 b(the)37 b(default)g(is)g
Fj(0.0.0.0)h Fn(and)f Fj(0.0.0.0)-150 336 y Fn(r)n(espectively)-10
b(,)26 b(which)d(will)h(match)f(every)h(sour)n(ce.)-25
569 y(An)e(example)i(of)f(the)g(two-ar)n(gument)i(form)e(of)g(the)g
(command)h(is)90 806 y Fj(burst)56 b(2/10)-25 1039 y
Fn(This)32 b(will)i(cause)e Fj(chronyd)i Fn(to)f(attempt)i(to)d(get)i
(two)f(good)g(measur)n(ements)h(fr)n(om)e(each)h(sour)n(ce,)i(stopping)
-150 1139 y(after)24 b(two)g(have)f(been)g(obtained,)h(but)e(in)h(no)g
(event)g(will)h(it)g(try)f(mor)n(e)h(than)e(ten)h(pr)n(obes)i(to)e(the)
g(sour)n(ce.)-25 1372 y(An)f(example)i(of)f(the)g(four)n(-ar)n(gument)h
(form)f(of)g(the)g(command)g(is)90 1609 y Fj(burst)56
b(2/10)f(255.255.0.0/1.2.0.0)-25 1842 y Fn(In)24 b(this)i(case,)f(the)g
(two)h(out)f(of)g(ten)g(sampling)h(will)g(only)g(be)e(applied)j(to)f
(sour)n(ces)g(whose)f(IP)g(addr)n(esses)i(ar)n(e)e(of)-150
1941 y(the)e(form)g Fj(1.2.x.y)p Fn(,)h(wher)n(e)g(x)e(and)h(y)g(ar)n
(e)g(arbitrary)-10 b(.)-150 2292 y Fh(4.3.4.7)56 b(clients)-25
2525 y Fn(This)28 b(command)f(shows)i(a)e(list)i(of)f(all)g(clients)h
(that)f(have)f(accessed)j(the)d(server)-7 b(,)29 b(thr)n(ough)f(either)
g(the)f(NTP)h(or)-150 2624 y(command/monitoring)c(ports.)29
b(Ther)n(e)24 b(ar)n(e)f(no)g(ar)n(guments.)-25 2857
y(An)f(example)i(of)f(the)g(output)h(is)-25 3090 y(Hostname)18
b(Client)h(Peer)e(CmdAuth)h(CmdNorm)g(CmdBad)g(LstN)h(LstC)f
(=========================)-150 3190 y(======)k(======)h(======)f
(======)h(======)f(====)h(====)g(localhost)j(0)d(0)h(15)g(1)g(0)f(29y)i
(0)e(aar)n(dvark.xxx)h(4)f(0)h(0)g(0)-150 3289 y(0)f(49)g(29y)g(badger)
-7 b(.xxx)23 b(4)g(0)g(0)g(0)g(0)f(6)h(29y)-25 3522 y(Each)33
b(r)n(ow)h(shows)g(the)g(data)g(for)g(a)f(single)h(host.)60
b(Only)34 b(hosts)g(that)g(have)g(passed)h(the)e(host)h(access)h
(checks)-150 3622 y(\(set)29 b(with)g(the)g Fj(allow)p
Fn(,)h Fj(deny)p Fn(,)g Fj(cmdallow)g Fn(and)e Fj(cmddeny)i
Fn(commands)f(or)f(con\002guration)h(\002le)f(dir)n(ectives\))j(ar)n(e)
-150 3722 y(logged.)-25 3955 y(The)23 b(columns)g(ar)n(e)g(as)g
(follows:)-98 4188 y(1.)60 b(The)23 b(hostname)h(of)f(the)g(client)-98
4321 y(2.)60 b(The)23 b(number)f(of)h(times)h(the)f(client)h(has)f
(accessed)i(the)e(server)h(using)f(an)f(NTP)h(client)h(mode)g(packet.)
-98 4454 y(3.)60 b(The)35 b(number)e(of)i(times)h(the)f(client)h(has)e
(accessed)j(the)e(server)g(using)f(an)g(NTP)h(symmetric)h(active)g
(mode)30 4554 y(packet.)-98 4687 y(4.)60 b(The)35 b(number)g(of)g
(authenticated)i(command)f(packets)h(that)f(have)f(been)g(pr)n(ocessed)
j(fr)n(om)d(the)h(client)g(\(i.e.)30 4787 y(those)24
b(following)h(a)e(successful)h Fj(password)h Fn(command\).)-98
4920 y(5.)60 b(The)23 b(number)f(of)h(unauthenticated)h(command)g
(packets)h(that)e(have)g(been)g(pr)n(ocessed)j(fr)n(om)d(the)g(client.)
-98 5054 y(6.)60 b(The)31 b(number)e(of)i(bad)g(command)g(packets)i(r)n
(eceived)f(fr)n(om)f(the)g(client)g(\(not)g(all)g(forms)g(of)g(bad)g
(packet)h(ar)n(e)30 5153 y(logged\).)-98 5287 y(7.)60
b(T)-5 b(ime)24 b(since)f(the)g(last)h(NTP)f(packet)i(was)f(r)n
(eceived)-98 5420 y(8.)60 b(T)-5 b(ime)24 b(since)f(the)g(last)h
(command)g(packet)g(was)g(r)n(eceived)-25 5687 y(The)29
b(last)i(two)g(entries)g(will)g(be)f(shown)g(as)g(the)g(time)h(since)f
(1970)g(if)g(no)g(packet)h(of)f(that)h(type)g(has)f(ever)g(been)-150
5786 y(r)n(eceived.)p eop
%%Page: 32 34
32 33 bop -150 -116 a Fn(Chapter)24 b(4:)k(Usage)c(r)n(efer)n(ence)2883
b(32)-150 236 y Fh(4.3.4.8)56 b(cmdaccheck)-25 467 y
Fn(This)27 b(command)h(is)g(similar)g(to)g(the)f Fj(accheck)i
Fn(command,)g(except)f(that)g(it)g(is)g(used)f(to)h(check)g(whether)f
(com-)-150 567 y(mand)c(access)h(is)f(permitted)i(fr)n(om)f(a)e(named)h
(host.)-25 798 y(Examples)h(of)f(use)g(ar)n(e)g(as)g(follows:)90
1034 y Fj(cmdaccheck)57 b(a.b.c)90 1138 y(cmdaccheck)g(1.2.3.4)-150
1483 y Fh(4.3.4.9)f(cmdallow)-25 1714 y Fn(This)23 b(is)g(similar)h(to)
g(the)f Fj(allow)h Fn(command,)f(except)h(that)g(it)f(is)h(used)f(to)g
(allow)i(particular)f(hosts)g(or)f(subnets)g(to)-150
1813 y(use)g(the)g(chr)n(onyc)g(pr)n(ogram)h(to)f(interact)i(with)e
Fj(chronyd)i Fn(on)e(the)g(curr)n(ent)f(host.)-150 2159
y Fh(4.3.4.10)56 b(cmdallow)38 b(all)-25 2390 y Fn(This)18
b(is)g(similar)h(to)g(the)f Fj(allow)24 b(all)19 b Fn(command,)g
(except)g(that)f(it)h(is)f(used)g(to)h(allow)g(particular)g(hosts)g(or)
f(subnets)-150 2489 y(to)24 b(use)e(the)i(chr)n(onyc)f(pr)n(ogram)g(to)
h(interact)g(with)g Fj(chronyd)g Fn(on)f(the)g(curr)n(ent)g(host.)-150
2834 y Fh(4.3.4.1)l(1)56 b(cmddeny)-25 3066 y Fn(This)26
b(is)g(similar)h(to)g(the)f Fj(deny)h Fn(command,)f(except)h(that)g(it)
f(is)h(used)f(to)h(allow)g(particular)g(hosts)g(or)f(subnets)g(to)-150
3165 y(use)d(the)g(chr)n(onyc)g(pr)n(ogram)h(to)f(interact)i(with)e
Fj(chronyd)i Fn(on)e(the)g(curr)n(ent)f(host.)-150 3510
y Fh(4.3.4.12)56 b(cmddeny)38 b(all)-25 3742 y Fn(This)21
b(is)h(similar)g(to)g(the)f Fj(deny)j(all)e Fn(command,)f(except)i
(that)e(it)h(is)g(used)f(to)h(allow)h(particular)f(hosts)g(or)f
(subnets)-150 3841 y(to)j(use)e(the)i(chr)n(onyc)f(pr)n(ogram)g(to)h
(interact)g(with)g Fj(chronyd)g Fn(on)f(the)g(curr)n(ent)g(host.)-150
4186 y Fh(4.3.4.13)56 b(cyclelogs)-25 4418 y Fn(The)19
b Fj(cyclelogs)i Fn(command)e(causes)h(all)g(of)f Fj(chronyd's)i
Fn(open)f(log)f(\002les)h(to)f(be)g(closed)i(and)e(r)n(e-opened.)28
b(This)-150 4517 y(allows)g(them)e(to)g(be)g(r)n(enamed)h(so)f(that)g
(they)h(can)e(be)h(periodically)j(pur)n(ged.)38 b(An)25
b(example)i(of)f(how)g(to)h(do)f(this)g(is)-150 4617
y(shown)d(below)-8 b(.)90 4852 y Fj(\045)55 b(mv)f
(/var/log/chrony/measu)q(rem)q(ents)q(.lo)q(g)60 b
(/var/log/chrony/measur)q(eme)q(nts)q(1.lo)q(g)90 4956
y(\045)55 b(chronyc)90 5060 y(chronyc>)i(password)f(aardvark)90
5164 y(200)f(OK)90 5267 y(chronyc>)i(cyclelogs)90 5371
y(200)e(OK)90 5475 y(chronyc>)i(exit)90 5579 y(\045)e(ls)f(-l)h
(/var/log/chrony)90 5682 y(-rw-r--r--)166 b(1)54 b(root)273
b(root)653 b(0)54 b(Jun)110 b(8)55 b(18:17)g(measurements.log)90
5786 y(-rw-r--r--)166 b(1)54 b(root)273 b(root)436 b(12345)55
b(Jun)110 b(8)55 b(18:17)g(measurements1.log)p eop
%%Page: 33 35
33 34 bop -150 -116 a Fn(Chapter)24 b(4:)k(Usage)c(r)n(efer)n(ence)2883
b(33)-150 236 y Fh(4.3.4.14)56 b(delete)-25 464 y Fn(The)20
b Fj(delete)i Fn(command)f(allows)h(an)e(NTP)g(server)h(or)f(peer)h(to)
g(be)g(r)n(emoved)h(fr)n(om)e(the)h(curr)n(ent)f(set)h(of)g(sour)n
(ces.)-25 692 y(The)i(syntax)g(is)g(illustrated)j(in)c(the)h(examples)i
(below)-8 b(.)90 924 y Fj(delete)56 b(foo.bar.com)90
1027 y(delete)g(1.2.3.4)-25 1255 y Fn(Ther)n(e)23 b(is)g(one)g
(parameter)-7 b(,)24 b(the)g(name)e(or)h(IP)g(addr)n(ess)i(of)e(the)g
(server)g(or)g(peer)g(to)h(be)f(deleted.)-150 1589 y
Fh(4.3.4.15)56 b(deny)-25 1817 y Fn(The)33 b(ef)n(fect)h(of)g(the)f
(allow)h(command)f(is)h(identical)h(to)e(the)g Fj(deny)h
Fn(dir)n(ective)h(in)e(the)g(con\002guration)h(\002le)f(\(see)-150
1917 y(Section)24 b(4.2.5)e([deny)i(dir)n(ective],)h(page)e(17\).)-25
2145 y(The)g(syntax)g(is)g(illustrated)j(in)c(the)h(following)i
(examples:)90 2376 y Fj(deny)55 b(foo.bar.com)90 2480
y(deny)g(1.2)90 2584 y(deny)g(3.4.5)-150 2918 y Fh(4.3.4.16)h(deny)38
b(all)-25 3146 y Fn(The)21 b(ef)n(fect)i(of)f(the)f(allow)i(command)f
(is)g(identical)h(to)f(the)f Fj(deny)j(all)e Fn(dir)n(ective)i(in)d
(the)g(con\002guration)h(\002le)g(\(see)-150 3246 y(Section)i(4.2.5)e
([deny)i(dir)n(ective],)h(page)e(17\).)-150 3580 y Fh(4.3.4.17)56
b(dump)-25 3808 y Fn(The)28 b Fj(dump)i Fn(command)f(causes)g
Fj(chronyd)i Fn(to)e(write)h(its)f(curr)n(ent)g(history)h(of)e(measur)n
(ements)i(for)f(each)g(of)g(its)-150 3908 y(sour)n(ces)24
b(to)g(dump)e(\002les,)h(either)h(for)f(inspection)i(or)d(to)i(support)
g(the)f Fj(-r)g Fn(option)i(when)d Fj(chronyd)j Fn(is)e(r)n(estarted.)
-25 4135 y(The)j Fj(dump)h Fn(command)g(is)g(somewhat)h(equivalent)f
(to)g(the)g Fj(dumponexit)i Fn(dir)n(ective)g(in)d(the)h(chr)n(ony)f
(con\002gu-)-150 4235 y(ration)e(\002le.)k(See)22 b(Section)i(4.2.8)f
([dumponexit)g(dir)n(ective],)i(page)f(18.)-25 4463 y(T)-8
b(o)27 b(use)g(the)h Fj(dump)p Fn(,)h(you)e(pr)n(obably)i(want)f(to)g
(con\002gur)n(e)g(the)f(name)g(of)h(the)g(dir)n(ectory)h(into)f(which)f
(the)h(dump)-150 4562 y(\002les)e(will)g(be)f(written.)36
b(This)25 b(can)g(only)h(be)f(done)h(in)e(the)i(con\002guration)f
(\002le,)h(see)g(Section)f(4.2.7)g([dumpdir)h(dir)n(ec-)-150
4662 y(tive],)e(page)g(18.)-150 4996 y Fh(4.3.4.18)56
b(exit)-25 5224 y Fn(The)20 b(exit)g(command)h(exits)g(fr)n(om)f(chr)n
(onyc)g(and)g(r)n(eturns)g(the)g(user)g(to)h(the)f(shell)h(\(same)f(as)
h(the)f(quit)g(command\).)-150 5559 y Fh(4.3.4.19)56
b(help)-25 5786 y Fn(The)23 b(help)g(command)g(displays)i(a)e(summary)g
(of)g(the)g(commands)h(and)f(their)g(ar)n(guments.)p
eop
%%Page: 34 36
34 35 bop -150 -116 a Fn(Chapter)24 b(4:)k(Usage)c(r)n(efer)n(ence)2883
b(34)-150 236 y Fh(4.3.4.20)56 b(local)-25 472 y Fn(The)26
b Fj(local)h Fn(command)g(allows)h Fj(chronyd)g Fn(to)f(be)f(told)i
(that)f(it)g(is)f(to)h(appear)g(as)g(a)f(r)n(efer)n(ence)i(sour)n(ce,)f
(even)g(if)-150 572 y(it)k(is)g(not)f(itself)i(pr)n(operly)g(synchr)n
(onised)g(to)f(an)f(external)h(sour)n(ce.)51 b(\(This)31
b(can)f(be)g(used)h(on)f(isolated)j(networks,)-150 672
y(to)26 b(allow)g(one)f(computer)h(to)f(be)g(a)g(master)h(time)g
(server)f(with)h(the)f(other)g(computers)h(slaving)g(to)g(it.\))34
b(The)26 b Fj(local)-150 771 y Fn(command)j(is)f(somewhat)i(equivalent)
f(to)g(the)f Fj(local)i Fn(dir)n(ective)g(in)e(the)h(con\002guration)g
(\002le,)g(see)g(Section)g(4.2.1)-5 b(1)-150 871 y([local)24
b(dir)n(ective],)h(page)f(20.)-25 1107 y(The)f(syntax)g(is)g(as)h
(shown)f(in)f(the)i(following)h(examples.)90 1347 y Fj(local)56
b(stratum)g(10)90 1451 y(local)g(off)-25 1687 y Fn(The)31
b(\002rst)h(example)g(enables)h(the)e(local)i(r)n(efer)n(ence)g(mode)f
(on)f(the)h(host,)i(and)d(sets)i(the)f(stratum)g(at)g(which)f(it)-150
1787 y(should)23 b(claim)h(to)f(be)g(synchr)n(onised.)-25
2023 y(The)g(second)h(example)f(disables)i(the)e(local)i(r)n(efer)n
(ence)f(mode.)-150 2383 y Fh(4.3.4.21)56 b(makestep)-25
2619 y Fn(Normally)26 b(chr)n(onyd)f(will)i(cause)e(the)h(system)g(to)g
(gradually)g(corr)n(ect)h(any)e(time)h(of)n(fset,)h(by)e(slowing)i
(down)f(or)-150 2719 y(speeding)f(up)e(the)h(clock)g(as)g(r)n(equir)n
(ed.)30 b(In)23 b(certain)h(situations,)i(the)d(system)i(clock)g(may)e
(be)h(so)g(far)f(adrift)h(that)g(this)-150 2819 y(slewing)g(pr)n(ocess)
h(would)f(take)g(a)f(very)g(long)g(time)h(to)g(corr)n(ect)g(the)f
(system)h(clock.)-25 3055 y(The)19 b Fj(makestep)i Fn(command)f(can)f
(be)g(used)g(in)g(this)h(situation.)28 b(It)20 b(cancels)g(any)g(r)n
(emaining)f(corr)n(ection)i(that)f(was)-150 3154 y(being)j(slewed,)i
(and)e(jumps)g(the)g(system)h(clock)g(by)f(the)g(equivalent)h(amount,)f
(making)g(it)g(corr)n(ect)i(immediately)-10 b(.)-25 3391
y(BE)24 b(W)-8 b(ARNED)26 b(-)e(certain)h(softwar)n(e)i(will)e(be)g
(seriously)g(af)n(fected)i(by)d(such)g(jumps)h(to)g(the)f(system)i
(time.)33 b(\(That)-150 3490 y(is)23 b(the)g(r)n(eason)h(why)f(chr)n
(onyd)h(uses)f(slewing)h(normally)-10 b(.\))-25 3726
y(The)23 b Fj(makestep)i Fn(command)e(is)g(curr)n(ently)h(only)f
(available)i(on)e(the)g(Linux)f(version)h(of)h(chr)n(ony)-10
b(.)-150 4086 y Fh(4.3.4.22)56 b(manual)-25 4323 y Fn(The)33
b(manual)g(command)h(enables)g(and)f(disables)j(use)d(of)g(the)h
Fj(settime)h Fn(command)f(\(see)g(Section)g(4.3.4.33)-150
4422 y([settime)25 b(command],)e(page)h(40\),)f(and)g(is)g(used)g(to)h
(modify)g(the)f(behaviour)g(of)g(the)g(manual)g(clock)h(driver)-7
b(.)-25 4658 y(Examples)24 b(of)f(the)g(command)g(ar)n(e)h(shown)f
(below)-8 b(.)90 4899 y Fj(manual)56 b(on)90 5002 y(manual)g(off)90
5106 y(manual)g(delete)g(1)90 5210 y(manual)g(list)90
5314 y(manual)g(reset)-25 5550 y Fn(The)23 b Fj(on)g
Fn(form)g(of)g(the)g(command)g(enables)h(use)f(of)g(the)g
Fj(settime)i Fn(command.)-25 5786 y(The)e Fj(off)g Fn(form)g(of)g(the)g
(command)h(disables)g(use)f(of)h(the)f Fj(settime)h Fn(command.)p
eop
%%Page: 35 37
35 36 bop -150 -116 a Fn(Chapter)24 b(4:)k(Usage)c(r)n(efer)n(ence)2883
b(35)-25 236 y(The)28 b Fj(list)h Fn(form)f(of)g(the)g(command)g(lists)
i(all)f(the)f(samples)h(curr)n(ently)g(stor)n(ed)h(in)d
Fj(chronyd)p Fn(.)45 b(The)29 b(output)f(is)-150 336
y(illustrated)d(below)-8 b(.)90 564 y Fj(210)55 b(n_samples)i(=)e(1)90
668 y(#)217 b(Date)110 b(Time\(UTC\))220 b(Slewed)165
b(Original)g(Residual)90 772 y(======================)q(====)q(===)q
(====)q(===)q(===)q(====)q(===)q(===)q(===)144 875 y(0)55
b(27Jan99)h(22:09:20)383 b(0.00)e(0.97)g(0.00)-25 1100
y Fn(The)23 b(columns)g(as)g(as)g(follows)i(:)-98 1324
y(1.)60 b(The)23 b(sample)h(index)f(\(used)h(for)f(the)g
Fj(manual)h(delet)p Fn(e)h(command\))-98 1448 y(2.)60
b(The)23 b(date)h(and)f(time)h(of)f(the)g(sample)-98
1572 y(3.)60 b(The)26 b(system)i(clock)f(err)n(or)g(when)f(the)g
(timestamp)i(was)f(enter)n(ed,)h(adjusted)g(to)f(allow)h(for)e(changes)
g(made)h(to)30 1672 y(the)c(system)i(clock)f(since.)-98
1796 y(4.)60 b(The)28 b(system)h(clock)g(err)n(or)f(when)g(the)g
(timestamp)i(was)f(enter)n(ed,)h(as)e(it)g(originally)i(was)f
(\(without)g(allowing)30 1895 y(for)23 b(changes)g(to)h(the)f(system)h
(clock)g(since\).)-98 2019 y(5.)60 b(The)22 b(r)n(egr)n(ession)i(r)n
(esidual)f(at)f(this)h(point,)g(in)e(seconds.)29 b(This)22
b(allows)i('outliers')g(to)e(be)g(easily)i(spotted,)g(so)e(that)30
2119 y(they)h(can)g(be)g(deleted)i(using)e(the)g Fj(manual)i(delete)f
Fn(command.)-25 2368 y(The)35 b Fj(delete)i Fn(form)e(of)g(the)h
(command)f(deletes)j(a)d(single)h(sample.)67 b(The)35
b(parameter)i(is)e(the)h(index)f(of)g(the)-150 2467 y(sample,)23
b(as)f(shown)g(in)f(the)h(\002rst)g(column)g(of)g(the)g(output)g(fr)n
(om)g Fj(manual)j(list)p Fn(.)j(Following)c(deletion)g(of)e(the)g(data)
-150 2567 y(point,)j(the)f(curr)n(ent)g(err)n(or)g(and)h(drift)f(rate)h
(ar)n(e)g(r)n(e-estimated)i(fr)n(om)d(the)g(r)n(emaining)h(data)g
(points)h(and)e(the)g(system)-150 2666 y(clock)32 b(trimmed)f(if)f
(necessary)-10 b(.)52 b(This)31 b(option)h(is)f(intended)g(to)g(allow)h
('outliers')g(to)f(be)g(discar)n(ded,)j(i.e.)50 b(samples)-150
2766 y(wher)n(e)24 b(the)f(administrator)i(r)n(ealises)g(he/she)e(has)f
(enter)n(ed)j(a)e(very)g(poor)g(timestamp.)-25 2990 y(The)g
Fj(reset)h Fn(form)f(of)h(the)f(command)h(deletes)h(all)f(samples)h(at)
e(once.)29 b(The)24 b(system)g(clock)h(is)e(left)i(r)o(unning)d(as)h
(it)-150 3090 y(was)h(befor)n(e)g(the)f(command)g(was)h(enter)n(ed.)
-150 3413 y Fh(4.3.4.23)56 b(maxdelay)-25 3637 y Fn(This)21
b(allows)h(the)f Fj(maxdelay)i Fn(option)f(for)f(one)f(of)h(the)g(sour)
n(ces)h(to)f(be)g(modi\002ed,)h(in)e(the)h(same)g(way)h(as)f(specify-)
-150 3737 y(ing)k(the)f Fj(maxdelay)j Fn(option)f(for)f(the)g
Fj(server)h Fn(dir)n(ective)h(in)d(the)h(con\002guration)g(\002le)g
(\(see)g(Section)h(4.2.23)e([server)-150 3836 y(dir)n(ective],)h(page)f
(26\).)-25 4060 y(The)f(following)i(examples)f(illustrate)h(the)e
(syntax)90 4289 y Fj(maxdelay)57 b(foo.bar.com)g(0.3)90
4392 y(maxdelay)g(1.2.3.4)f(0.0015)-25 4617 y Fn(The)45
b(\002rst)h(example)g(sets)h(the)e(maximum)g(network)h(delay)h(allowed)
g(for)f(a)f(measur)n(ement)h(to)g(the)g(host)-150 4716
y Fj(foo.bar.com)29 b Fn(to)e(0.3)f(seconds.)40 b(The)26
b(second)i(example)f(sets)g(the)g(maximum)e(network)j(delay)f(for)g(a)f
(measur)n(e-)-150 4816 y(ment)d(to)h(the)f(host)g(with)h(IP)f(addr)n
(ess)h Fj(1.2.3.4)h Fn(to)f(1.5)e(milliseconds.)-25 5040
y(\(Any)h(measur)n(ement)h(whose)f(network)i(delay)f(exceeds)g(the)f
(speci\002ed)i(value)e(is)g(discar)n(ded.\))-150 5363
y Fh(4.3.4.24)56 b(maxdelayratio)-25 5587 y Fn(This)31
b(allows)i(the)e Fj(maxdelayratio)k Fn(option)d(for)f(one)g(of)g(the)g
(sour)n(ces)h(to)g(be)f(modi\002ed,)j(in)c(the)h(same)h(way)-150
5687 y(as)26 b(specifying)i(the)e Fj(maxdelayratio)k
Fn(option)d(for)f(the)g Fj(server)i Fn(dir)n(ective)g(in)d(the)i
(con\002guration)f(\002le)g(\(see)h(Sec-)-150 5786 y(tion)d(4.2.23)e
([server)i(dir)n(ective],)h(page)f(26\).)p eop
%%Page: 36 38
36 37 bop -150 -116 a Fn(Chapter)24 b(4:)k(Usage)c(r)n(efer)n(ence)2883
b(36)-25 236 y(The)23 b(following)i(examples)f(illustrate)h(the)e
(syntax)90 465 y Fj(maxdelayratio)58 b(foo.bar.com)g(1.5)90
568 y(maxdelayratio)g(1.2.3.4)f(2.0)-25 792 y Fn(The)18
b(\002rst)h(example)h(sets)g(the)f(maximum)f(network)i(delay)g(for)e(a)
h(measur)n(ement)h(to)f(the)g(host)g Fj(foo.bar.com)j
Fn(to)-150 892 y(be)j(1.5)f(times)i(the)f(minimum)f(delay)i(found)f
(amongst)g(the)g(pr)n(evious)h(measur)n(ements)h(that)e(have)g(been)g
(r)n(etained.)-150 992 y(The)f(second)h(example)g(sets)g(the)f(maximum)
f(network)i(delay)g(for)f(a)g(measur)n(ement)h(to)f(the)g(host)h(with)f
(IP)g(addr)n(ess)-150 1091 y Fj(1.2.3.4)h Fn(to)e(be)g(double)h(the)f
(r)n(etained)h(minimum.)-25 1316 y(As)f(for)g Fj(maxdelay)p
Fn(,)h(any)f(measur)n(ement)h(whose)g(network)g(delay)g(is)g(too)g(lar)
n(ge)g(will)g(be)f(discar)n(ded.)-150 1639 y Fh(4.3.4.25)56
b(maxpoll)-25 1863 y Fn(The)24 b Fj(maxpoll)h Fn(command)f(is)h(used)f
(to)g(modify)h(the)f(minimum)f(polling)i(interval)g(for)f(one)g(of)g
(the)g(curr)n(ent)g(set)-150 1963 y(of)d(sour)n(ces.)28
b(It)21 b(is)g(equivalent)g(to)h(the)e Fj(maxpoll)j Fn(option)f(in)e
(the)g Fj(server)i Fn(dir)n(ective)h(in)d(the)h(con\002guration)g
(\002le)g(\(see)-150 2063 y(Section)j(4.2.23)e([server)i(dir)n
(ective],)h(page)f(26\).)-25 2287 y(The)f(syntax)g(is)g(as)h(follows)90
2515 y Fj(maxpoll)56 b(<host>)g(<new-maxpoll>)-25 2739
y Fn(wher)n(e)33 b(the)g(host)h(can)f(be)g(speci\002ed)h(as)g(either)f
(a)g(machine)g(name)g(or)g(dotted-quad)i(IP)e(addr)n(ess.)59
b(The)34 b(new)-150 2839 y(minimum)24 b(poll)h(is)g(speci\002ed)h(as)f
(a)f(base-2)h(logarithm)h(of)f(the)f(number)g(of)g(seconds)i(between)g
(polls)g(\(e.g.)32 b(specify)-150 2939 y(6)23 b(for)g(64)g(second)h
(sampling\).)-25 3163 y(An)e(example)i(is)90 3391 y Fj(maxpoll)56
b(foo.bar.com)i(10)-25 3615 y Fn(which)22 b(sets)j(the)e(maximum)f
(polling)i(interval)g(for)f(the)g(host)h Fj(foo.bar.com)i
Fn(to)d(1024)h(seconds.)-25 3839 y(Note)e(that)g(the)f(new)g(maximum)g
(polling)i(interval)f(only)f(takes)i(ef)n(fect)g(after)f(the)f(next)g
(measur)n(ement)h(has)g(been)-150 3939 y(made.)-150 4263
y Fh(4.3.4.26)56 b(maxupdateskew)-25 4487 y Fn(This)28
b(command)g(has)f(the)h(same)g(ef)n(fect)i(as)e(the)g
Fj(maxupdateskew)j Fn(dir)n(ective)f(in)d(the)h(con\002guration)g
(\002le,)h(see)-150 4587 y(Section)24 b(4.2.17)e([maxupdateskew)k(dir)n
(ective],)f(page)f(24.)-150 4910 y Fh(4.3.4.27)56 b(minpoll)-25
5134 y Fn(The)24 b Fj(minpoll)h Fn(command)f(is)h(used)f(to)g(modify)h
(the)f(minimum)f(polling)i(interval)g(for)f(one)g(of)g(the)g(curr)n
(ent)g(set)-150 5234 y(of)d(sour)n(ces.)28 b(It)21 b(is)g(equivalent)g
(to)h(the)e Fj(minpoll)j Fn(option)f(in)e(the)g Fj(server)i
Fn(dir)n(ective)h(in)d(the)h(con\002guration)g(\002le)g(\(see)-150
5334 y(Section)j(4.2.23)e([server)i(dir)n(ective],)h(page)f(26\).)-25
5558 y(The)f(syntax)g(is)g(as)h(follows)90 5786 y Fj(minpoll)56
b(<host>)g(<new-minpoll>)p eop
%%Page: 37 39
37 38 bop -150 -116 a Fn(Chapter)24 b(4:)k(Usage)c(r)n(efer)n(ence)2883
b(37)-25 236 y(wher)n(e)33 b(the)g(host)h(can)f(be)g(speci\002ed)h(as)g
(either)f(a)g(machine)g(name)g(or)g(dotted-quad)i(IP)e(addr)n(ess.)59
b(The)34 b(new)-150 336 y(minimum)24 b(poll)h(is)g(speci\002ed)h(as)f
(a)f(base-2)h(logarithm)h(of)f(the)f(number)g(of)g(seconds)i(between)g
(polls)g(\(e.g.)32 b(specify)-150 435 y(6)23 b(for)g(64)g(second)h
(sampling\).)-25 689 y(An)e(example)i(is)90 946 y Fj(minpoll)56
b(foo.bar.com)i(5)-25 1199 y Fn(which)22 b(sets)j(the)e(minimum)f
(polling)i(interval)g(for)f(the)g(host)h Fj(foo.bar.com)i
Fn(to)d(32)h(seconds.)-25 1453 y(Note)f(that)f(the)h(new)f(minimum)f
(polling)j(interval)f(only)f(takes)i(ef)n(fect)g(after)e(the)h(next)f
(measur)n(ement)h(has)f(been)-150 1552 y(made.)-150 1963
y Fh(4.3.4.28)56 b(of)n(\003ine)-25 2217 y Fn(The)22
b Fj(offline)h Fn(command)g(is)f(used)g(to)h(warn)e Fj(chronyd)j
Fn(that)f(the)f(network)h(connection)g(to)f(a)g(particular)h(host)-150
2316 y(or)29 b(hosts)i(is)f(about)g(to)g(be)g(lost.)49
b(It)31 b(should)e(be)h(used)g(on)f(computers)i(with)f(a)g(dial-up)g
(or)g(similar)g(connection)h(to)-150 2416 y(their)23
b(time)h(sour)n(ces,)g(to)f(warn)g Fj(chronyd)i Fn(that)e(the)g
(connection)h(is)f(about)h(to)f(be)g(br)n(oken.)-25 2669
y(An)30 b(example)i(of)f(how)g(to)h(use)f Fj(offline)h
Fn(in)f(this)h(case)f(is)h(shown)f(in)f(Section)i(3.2.2)f([Advising)h
(chr)n(onyd)f(of)-150 2769 y(internet)24 b(availability],)h(page)f(9.)
-25 3022 y(Another)k(case)h(wher)n(e)g Fj(offline)h Fn(could)f(be)f
(used)h(is)g(wher)n(e)g(a)f(computer)h(serves)g(time)g(to)g(a)f(local)i
(gr)n(oup)e(of)-150 3122 y(computers,)g(and)e(has)g(a)h(permanant)f
(connection)i(to)f(tr)o(ue)f(time)h(servers)g(outside)h(the)f(or)n
(ganisation.)40 b(However)-7 b(,)-150 3221 y(the)27 b(external)g
(connection)h(is)f(heavily)h(loaded)g(at)f(certain)h(times)f(of)g(the)g
(day)h(and)e(the)h(measur)n(ements)h(obtained)-150 3321
y(ar)n(e)e(less)g(r)n(eliable)i(at)d(those)i(times.)37
b(In)25 b(this)h(case,)g(it)g(is)g(pr)n(obably)h(most)f(useful)g(to)g
(determine)h(the)e(gain/loss)i(rate)-150 3420 y(during)f(the)g(quiet)g
(periods)i(and)d(let)i(the)g(whole)g(network)g(coast)g(thr)n(ough)f
(the)g(loaded)i(periods.)39 b(The)26 b Fj(offline)-150
3520 y Fn(and)d Fj(online)h Fn(commands)g(can)f(be)g(used)g(to)g
(achieve)h(this.)29 b(The)23 b(situation)h(is)g(shown)f(in)g(the)g
(\002gur)n(e)f(below)-8 b(.)633 3778 y Fj(+----------+)633
3881 y(|Ext)55 b(source|)633 3985 y(+----------+)850
4089 y(|)850 4193 y(|)850 4296 y(|/|)g(<--)h(Link)f(with)g(variable)959
4400 y(|)272 b(reliability)959 4504 y(|)416 4608 y
(+-------------------+)416 4712 y(|Local)56 b(master)g(server|)416
4815 y(+-------------------+)959 4919 y(|)199 5023 y
(+---+---+-----+-----+---)q(-+-)q(---+)199 5127 y(|)163
b(|)g(|)272 b(|)g(|)217 b(|)g(|)687 5230 y(Local)56 b(clients)-25
5487 y Fn(If)22 b(the)g(sour)n(ce)g(to)h(which)f Fj(chronyd)i
Fn(is)e(curr)n(ently)g(synchr)n(onised)i(is)e(indicated)i(of)n(\003ine)
e(in)g(this)h(way)-10 b(,)22 b Fj(chronyd)-150 5587 y
Fn(will)i(continue)g(to)f(tr)n(eat)i(it)f(as)f(the)g(synchr)n
(onisation)i(sour)n(ce.)30 b(If)23 b(the)g(network)i(connection)f(wer)n
(e)g(br)n(oken)g(without)-150 5687 y(the)31 b Fj(offline)h
Fn(command)f(being)g(used,)i Fj(chronyd)f Fn(would)g(assume)f(that)g
(the)g(sour)n(ce)h(had)e(failed)i(and)f(would)-150 5786
y(attempt)25 b(to)f(pick)f(another)h(synchr)n(onisation)g(sour)n(ce.)p
eop
%%Page: 38 40
38 39 bop -150 -116 a Fn(Chapter)24 b(4:)k(Usage)c(r)n(efer)n(ence)2883
b(38)-25 236 y(Ther)n(e)25 b(ar)n(e)h(two)g(forms)g(of)g(the)f
Fj(offline)i Fn(command.)35 b(The)26 b(\002rst)f(form)g(is)h(a)f
(wildcar)n(d,)j(meaning)d(all)h(sour)n(ces.)-150 336
y(The)31 b(second)i(form)e(allows)i(a)e(IP)g(addr)n(ess)i(mask)f(and)f
(a)g(masked)h(addr)n(ess)h(to)f(be)f(speci\002ed.)55
b(These)32 b(forms)f(ar)n(e)-150 435 y(illustrated)25
b(below)-8 b(.)90 684 y Fj(offline)90 788 y(offline)56
b(255.255.255.0/1.2.3.0)-25 1032 y Fn(The)28 b(second)h(form)e(means)i
(that)f(the)g Fj(offline)i Fn(command)e(is)h(to)f(be)g(applied)i(to)f
(any)f(sour)n(ce)h(whose)g(IP)e(ad-)-150 1132 y(dr)n(ess)32
b(is)g(in)f(the)g(1.2.3)g(subnet.)53 b(\(The)31 b(host's)i(addr)n(ess)f
(is)g(logically)i(and-ed)d(with)h(the)g(mask,)h(and)e(if)g(the)h(r)n
(esult)-150 1232 y(matches)24 b(the)f(masked-addr)n(ess)j(the)d(host)h
(is)f(pr)n(ocessed\).)-25 1476 y(The)g(wildcar)n(d)i(form)d(of)i(the)f
(addr)n(ess)h(is)g(actually)g(equivalent)g(to)90 1725
y Fj(offline)56 b(0.0.0.0/0.0.0.0)-150 2110 y Fh(4.3.4.29)g(online)-25
2354 y Fn(The)35 b Fj(online)i Fn(command)f(is)f(opposite)k(in)c
(function)g(to)h(the)g Fj(offline)h Fn(command.)66 b(It)36
b(is)g(used)f(to)h(advise)-150 2454 y Fj(chronyd)25 b
Fn(that)e(network)h(connectivity)h(to)f(a)f(particular)h(sour)n(ce)f
(or)g(sour)n(ces)h(has)f(been)g(r)n(estor)n(ed.)-25 2699
y(The)29 b(syntax)h(is)f(identical)i(to)f(that)g(of)f(the)h
Fj(offline)h Fn(command,)g(see)e(Section)h(4.3.4.28)f([of)n(\003ine)i
(command],)-150 2798 y(page)24 b(37.)-150 3183 y Fh(4.3.4.30)56
b(password)-25 3428 y Fn(The)24 b(passwor)n(d)j(command)e(is)g(used)g
(to)g(allow)h(chr)n(onyc)f(to)g(send)g(privileged)i(commands)e(to)g
Fj(chronyd)p Fn(.)35 b(The)-150 3527 y(passwor)n(d)27
b(can)e(either)h(be)f(enter)n(ed)h(on)f(the)h(command)f(line,)h(or)e
(can)h(be)g(enter)n(ed)i(without)f(echoing.)35 b(The)25
b(syntax)-150 3627 y(for)e(entering)g(the)h(passwor)n(d)h(on)e(the)g
(command)g(line)g(is)h(as)f(follows)90 3876 y Fj(password)57
b(xyzzy)-25 4120 y Fn(T)-8 b(o)23 b(enter)g(the)g(passwor)n(d)i
(without)f(it)g(being)f(echoed,)h(enter)90 4369 y Fj(password)-25
4613 y Fn(The)g(computer)h(will)h(r)n(espond)g(with)f(a)f(`)p
Fj(Password:)p Fn(')j(pr)n(ompt,)f(at)f(which)g(you)f(should)h(enter)g
(the)f(passwor)n(d)-150 4713 y(and)18 b(pr)n(ess)h(r)n(eturn.)26
b(\(Note)19 b(that)g(the)f(no-echo)h(mode)f(is)h(limited)g(to)g(8)f
(characters)h(on)f(SunOS)e(4.1)i(due)f(to)i(limitations)-150
4813 y(in)k(the)g(system)h(library)-10 b(.)29 b(Other)23
b(systems)h(do)g(not)f(have)g(this)g(r)n(estriction.\))-25
5057 y(The)28 b(passwor)n(d)j(is)e(any)g(string)g(of)g(characters)g
(not)g(containing)g(whitespace.)48 b(It)29 b(has)f(to)i(match)e
Fj(chronyd's)-150 5157 y Fn(curr)n(ently)23 b(de\002ned)h(command)f
(key)h(\(see)f(Section)h(4.2.3)f([commandkey)h(dir)n(ective],)h(page)f
(17\).)-150 5542 y Fh(4.3.4.31)56 b(quit)-25 5786 y Fn(The)20
b(quit)g(command)g(exits)h(fr)n(om)f(chr)n(onyc)g(and)g(r)n(eturns)g
(the)g(user)g(to)h(the)f(shell)h(\(same)g(as)f(the)g(exit)h(command\).)
p eop
%%Page: 39 41
39 40 bop -150 -116 a Fn(Chapter)24 b(4:)k(Usage)c(r)n(efer)n(ence)2883
b(39)-150 236 y Fh(4.3.4.32)56 b(rtcdata)-25 464 y Fn(The)23
b Fj(rtcdata)h Fn(command)g(displays)h(the)e(curr)n(ent)g(r)n(eal)g
(time)h(clock)g(R)m(TC)f(parameters.)-25 691 y(An)f(example)i(output)g
(is)f(shown)g(below)-8 b(.)90 923 y Fj(RTC)55 b(ref)g(time)h(\(GMT\))g
(:)e(Sat)h(May)h(30)e(07:25:56)j(1998)90 1027 y(Number)f(of)f(samples)
111 b(:)54 b(10)90 1130 y(Number)i(of)f(runs)273 b(:)54
b(5)90 1234 y(Sample)i(span)g(period)g(:)109 b(549)90
1338 y(RTC)55 b(is)g(fast)h(by)272 b(:)217 b(-1.632736)57
b(seconds)90 1442 y(RTC)e(gains)h(time)f(at)110 b(:)f(-107.623)56
b(ppm)-25 1669 y Fn(The)23 b(\002elds)g(have)g(the)g(following)j
(meaning)-150 1925 y Fj(RTC)e(ref)f(time)h(\(GMT\))330
2025 y Fn(This)f(is)h(the)f(R)m(TC)g(r)n(eading)h(the)f(last)h(time)g
(its)g(err)n(or)f(was)h(measur)n(ed.)-150 2181 y Fj(Number)g(of)g
(samples)330 2281 y Fn(This)f(is)g(the)g(number)f(of)g(pr)n(evious)i
(measur)n(ements)g(being)f(used)g(to)g(determine)h(the)f(R)m(TC)g
(gain/loss)330 2380 y(rate.)-150 2536 y Fj(Number)h(of)g(runs)330
2636 y Fn(This)31 b(is)g(the)g(number)f(of)h(r)o(uns)f(of)h(r)n
(esiduals)i(of)e(the)g(same)g(sign)g(following)i(the)e(r)n(egr)n
(ession)i(\002t)e(for)330 2736 y(\(R)m(TC)f(err)n(or\))f(versus)g(\(R)m
(TC)h(time\).)48 b(A)29 b(value)g(which)h(is)f(small)h(indicates)h
(that)f(the)f(measur)n(ements)330 2835 y(ar)n(e)h(not)g(well)h(appr)n
(oximated)h(by)e(a)f(linear)h(model,)i(and)e(that)g(the)g(algorithm)h
(will)f(tend)h(to)f(delete)330 2935 y(the)23 b(older)h(measur)n(ements)
g(to)g(impr)n(ove)g(the)f(\002t.)-150 3091 y Fj(Sample)h(span)g(period)
330 3191 y Fn(This)i(is)f(the)h(period)g(that)g(the)f(measur)n(ements)i
(span)e(\(fr)n(om)h(the)f(oldest)i(to)f(the)f(newest\).)36
b(W)-5 b(ithout)27 b(a)330 3290 y(unit)g(the)h(value)g(is)g(in)g
(seconds;)i(suf)n(\002xes)e(`m')g(for)g(minutes,)g(`h')g(for)f(hours,)h
(`d')g(for)g(days)g(or)g(`y')g(for)330 3390 y(years)c(may)f(be)g(used.)
-150 3546 y Fj(RTC)h(is)f(fast)h(by)330 3646 y Fn(This)29
b(is)h(the)f(estimate)i(of)e(how)g(many)g(seconds)h(fast)g(the)f(R)m
(TC)g(when)g(it)h(thought)f(the)g(time)h(was)f(at)330
3745 y(the)i(r)n(efer)n(ence)h(time)f(\(above\).)52 b(If)31
b(this)g(value)g(is)g(lar)n(ge,)j(you)c(may)h(\(or)g(may)f(not\))h
(want)h(to)f(use)f(the)330 3845 y Fj(trimrtc)c Fn(command)f(to)g(bring)
g(the)f(R)m(TC)h(into)h(line)f(with)g(the)g(system)h(clock.)34
b(\(Note,)26 b(a)e(lar)n(ge)i(err)n(or)330 3945 y(will)21
b(not)g(af)n(fect)g Fj(chronyd's)i Fn(operation,)f(unless)e(it)h
(becomes)g(so)g(big)f(as)g(to)h(start)g(causing)g(r)n(ounding)330
4044 y(err)n(ors.)-150 4200 y Fj(RTC)j(gains)g(time)f(at)330
4300 y Fn(This)31 b(is)f(the)h(amount)f(of)g(time)h(gained)g
(\(positive\))i(or)d(lost)i(\(negative\))g(by)e(the)h(r)n(eal)f(time)h
(clock)h(for)330 4400 y(each)22 b(second)g(that)g(it)g(ticks.)29
b(It)23 b(is)f(measur)n(ed)g(in)f(parts)i(per)f(million.)28
b(So)21 b(if)h(the)g(value)g(shown)f(was)i Fj(+)p Fn(1,)330
4499 y(suppose)j(the)g(R)m(TC)f(was)h(exactly)g(right)f(when)g(it)g(cr)
n(osses)i(a)e(particular)h(second)g(boundary)-10 b(.)33
b(Then)25 b(it)330 4599 y(would)f(be)f(1)g(micr)n(osecond)h(fast)g
(when)f(it)h(cr)n(osses)g(its)g(next)f(second)h(boundary)-10
b(.)-150 4933 y Fh(4.3.4.33)56 b(settime)-25 5160 y Fn(The)32
b Fj(settime)h Fn(command)g(allows)h(the)e(curr)n(ent)g(time)g(to)h(be)
f(enter)n(ed)h(manually)-10 b(,)35 b(if)d(this)g(option)i(has)e(been)
-150 5260 y(con\002gur)n(ed)22 b(into)f Fj(chronyd)p
Fn(.)30 b(\(It)22 b(may)f(be)h(con\002gur)n(ed)f(either)h(with)g(the)f
Fj(manual)i Fn(dir)n(ective)h(in)d(the)g(con\002guration)-150
5359 y(\002le)34 b(\(see)g(Section)g(4.2.16)g([manual)f(dir)n(ective],)
39 b(page)34 b(24\),)j(or)c(with)h(the)g Fj(manual)h
Fn(command)f(of)g(chr)n(onyc)g(\(see)-150 5459 y(Section)24
b(4.3.4.22)e([manual)h(command],)g(page)h(34\).)-25 5687
y(It)j(should)g(be)g(noted)h(that)g(the)f(computer)7
b('s)28 b(sense)f(of)g(time)h(will)g(only)f(be)g(as)h(accurate)f(as)g
(the)h(r)n(efer)n(ence)g(you)-150 5786 y(use)34 b(for)h(pr)n(oviding)h
(this)f(input)g(\(e.g.)63 b(your)34 b(watch\),)k(as)c(well)i(as)f(how)g
(well)g(you)g(can)f(time)h(the)g(pr)n(ess)h(of)e(the)p
eop
%%Page: 40 42
40 41 bop -150 -116 a Fn(Chapter)24 b(4:)k(Usage)c(r)n(efer)n(ence)2883
b(40)-150 236 y(r)n(eturn)25 b(key)-10 b(.)35 b(When)25
b(inputting)h(time)f(to)h(an)f(isolated)i(network,)g(I)e(have)g(a)g
(battery)h(operated)h(alarm)f(clock)g(that)f(is)-150
336 y(synchr)n(onised)f(to)g(the)f(Rugby)g(MSF)f(time)i(signal)g(in)f
(the)g(UK.)-25 563 y(Pr)n(oviding)c(your)f(computer)7
b('s)20 b(time)f(zone)g(is)g(set)g(up)f(pr)n(operly)-10
b(,)21 b(you)d(will)i(be)e(able)h(to)h(enter)e(a)h(local)g(time)h
(\(rather)-150 662 y(than)j(UTC\).)-25 889 y(The)28 b(r)n(esponse)j(to)
e(a)g(successful)g Fj(settime)i Fn(command)e(indicates)h(the)f(amount)g
(that)g(the)g(computer)7 b('s)30 b(clock)-150 989 y(was)23
b(wr)n(ong.)28 b(It)23 b(should)g(be)f(appar)n(ent)i(fr)n(om)e(this)h
(if)f(you)h(have)f(enter)n(ed)h(the)g(time)g(wr)n(ongly)-10
b(,)23 b(e.g.)28 b(with)23 b(the)f(wr)n(ong)-150 1089
y(time)i(zone.)-25 1315 y(The)30 b(rate)h(of)g(drift)g(of)g(the)g
(system)h(clock)g(is)f(estimated)i(by)e(a)f(r)n(egr)n(ession)j(pr)n
(ocess)f(using)f(the)f(enter)n(ed)i(mea-)-150 1415 y(sur)n(ement)27
b(and)f(all)h(pr)n(evious)h(measur)n(ements)f(enter)n(ed)h(during)e
(the)g(pr)n(esent)i(r)o(un)d(of)i Fj(chronyd)p Fn(.)40
b(However)-7 b(,)28 b(the)-150 1515 y(enter)n(ed)23 b(measur)n(ement)f
(is)g(used)g(for)f(adjusting)i(the)e(curr)n(ent)g(clock)i(of)n(fset)g
(\(rather)f(than)f(the)h(estimated)i(inter)n(cept)-150
1614 y(fr)n(om)j(the)f(r)n(egr)n(ession,)j(which)d(is)h(ignor)n(ed\).)
39 b(Contrast)27 b(what)g(happens)g(with)g(the)g Fj(manual)d(delete)k
Fn(command,)-150 1714 y(wher)n(e)f(the)g(inter)n(cept)h(is)f(used)g(to)
g(set)g(the)f(curr)n(ent)h(of)n(fset)h(\(since)f(ther)n(e)g(is)g(no)f
(measur)n(ement)i(that)f(has)f(just)h(been)-150 1814
y(typed)d(in)f(in)g(that)g(case\).)-25 2041 y(The)e(time)h(is)g(parsed)
g(by)f(the)h(public)g(domain)g(`)p Fj(getdate)p Fn(')h(algorithm.)29
b(Consequently)-10 b(,)22 b(you)f(can)g(only)h(specify)-150
2140 y(time)i(to)f(the)g(near)n(est)i(second.)-25 2367
y(Examples)f(of)f(inputs)g(that)h(ar)n(e)f(valid)h(ar)n(e)f(shown)h
(below)-8 b(.)90 2598 y Fj(settime)56 b(16:30)90 2702
y(settime)g(16:30:05)90 2806 y(settime)g(Nov)g(21,)f(1997)g(16:30:05)
-25 3033 y Fn(For)28 b(a)g(full)g(description)i(of)e
Fj(getdate)p Fn(,)j(get)d(hold)h(of)f(the)g(getdate)i(documentation)g
(\(bundled,)f(for)f(example,)-150 3132 y(with)c(the)f(sour)n(ce)g(for)g
(GNU)h(tar\).)-150 3464 y Fh(4.3.4.34)56 b(sources)-25
3691 y Fn(This)27 b(command)g(displays)i(information)f(about)f(the)g
(curr)n(ent)f(time)i(sour)n(ces)g(that)f Fj(chronyd)i
Fn(is)e(accessing.)41 b(It)-150 3791 y(takes)24 b(no)f(ar)n(guments.)90
4022 y Fj(210)55 b(Number)h(of)f(sources)i(=)d(3)90 4126
y(MS)h(Name/IP)h(address)328 b(Str)110 b(Poll)55 b(LastRx)436
b(Last)56 b(sample)90 4229 y(======================)q(====)q(===)q
(====)q(===)q(===)q(====)q(===)q(===)q(====)q(===)q(====)q(===)q(===)q
(=)90 4333 y(^+)f(a.b.c)979 b(3)217 b(6)163 b(47m)110
b(-9491us[-6983us])59 b(+/-)109 b(159ms)90 4437 y(^+)55
b(d.e.f)979 b(3)217 b(6)163 b(47m)218 b(+32ms[)111 b(+35ms])56
b(+/-)109 b(274ms)90 4541 y(^*)55 b(g.h.i)979 b(2)217
b(6)163 b(47m)110 b(+8839us[)h(+11ms])56 b(+/-)109 b(214ms)-25
4771 y Fn(The)23 b(columns)g(ar)n(e)g(as)g(follows:)-150
5026 y Fj(M)426 b Fn(This)24 b(indicates)i(the)e(mode)h(of)f(the)g
(sour)n(ce.)31 b Fj(^)24 b Fn(means)g(a)f(server)-7 b(,)25
b Fj(=)e Fn(means)h(a)g(peer)h(and)e Fj(#)h Fn(indicates)i(a)330
5126 y(locally)f(connected)f(r)n(efer)n(ence)g(clock)1638
5093 y Fc(1)1677 5126 y Fn(.)-150 5281 y Fj(S)426 b Fn(This)23
b(column)e(indicates)j(the)e(state)i(of)e(the)g(sour)n(ces.)29
b Fj(*)22 b Fn(indicates)i(the)e(sour)n(ce)h(to)g(which)f
Fj(chronyd)h Fn(is)330 5380 y(curr)n(ent)k(synchr)n(onised.)43
b Fj(+)27 b Fn(indicates)j(other)d(acceptable)j(sour)n(ces.)43
b Fj(?)27 b Fn(indicates)i(sour)n(ces)g(to)f(which)330
5480 y(connectivity)23 b(has)e(been)g(lost.)29 b Fj(x)21
b Fn(indicates)i(a)e(clock)h(which)f Fj(chronyd)i Fn(thinks)f(is)f(is)g
(a)g(falseticker)j(\(i.e.)p -150 5594 1200 4 v -108 5654
a Fc(1)-25 5687 y Fn(In)32 b(the)h(curr)n(ent)f(version)i(this)f(will)h
(never)e(be)h(shown,)i(because)f Fj(chronyd)g Fn(has)f(no)f(support)i
(for)e(r)n(efer)n(ence)-25 5786 y(clocks)24 b(yet.)p
eop
%%Page: 41 43
41 42 bop -150 -116 a Fn(Chapter)24 b(4:)k(Usage)c(r)n(efer)n(ence)2883
b(41)330 236 y(its)26 b(time)h(is)f(inconsistent)h(with)g(a)e(majority)
i(of)f(other)g(sour)n(ces\).)37 b Fj(~)25 b Fn(indicates)j(a)d(sour)n
(ce)h(whose)h(time)330 336 y(appears)j(to)f(have)g(too)g(much)f
(variability)-10 b(.)47 b(The)29 b Fj(~)f Fn(condition)i(is)f(also)h
(shown)f(at)g(start-up,)i(until)d(at)330 435 y(least)c(3)f(samples)i
(have)e(been)g(gather)n(ed)h(fr)n(om)g(it.)-150 587 y
Fj(IP)f(address)330 686 y Fn(This)g(shows)h(the)g(name)e(or)h(the)g(IP)
g(addr)n(ess)i(of)e(the)g(sour)n(ce.)-150 838 y Fj(Str)318
b Fn(This)33 b(shows)g(the)g(stratum)g(of)f(the)h(sour)n(ce,)i(as)d(r)n
(eported)i(in)e(its)i(most)f(r)n(ecently)h(r)n(eceived)g(sample.)330
937 y(Stratum)21 b(1)h(indicates)i(a)d(computer)i(with)f(a)g(locally)i
(attached)f(r)n(efer)n(ence)g(clock.)29 b(A)21 b(computer)i(that)f(is)
330 1037 y(synchr)n(onised)j(to)f(a)g(stratum)g(1)f(computer)h(is)g(at)
g(stratum)g(2.)30 b(A)24 b(computer)g(that)g(is)g(synchr)n(onised)h(to)
330 1137 y(a)e(stratum)g(2)g(computer)h(is)f(at)h(stratum)f(3,)g(and)f
(so)i(on.)-150 1288 y Fj(Poll)264 b Fn(This)18 b(shows)h(the)f(rate)h
(at)f(which)g(the)g(sour)n(ce)g(is)g(being)h(polled,)h(as)e(a)g(base-2)
h(logarithm)g(of)f(the)g(interval)330 1388 y(in)24 b(seconds.)32
b(Thus,)23 b(a)h(value)g(of)g(6)g(would)h(indicate)g(that)g(a)e(measur)
n(ement)i(is)f(being)h(made)f(every)h(64)330 1487 y(seconds.)330
1613 y Fj(chronyd)g Fn(automatically)g(varies)f(the)f(polling)i(rate)e
(in)g(r)n(esponse)h(to)g(pr)n(evailing)h(conditions.)-150
1764 y Fj(LastRx)156 b Fn(This)30 b(column)f(shows)h(how)f(long)h(ago)g
(the)f(last)h(sample)h(was)f(r)n(eceived)g(fr)n(om)g(the)f(sour)n(ce.)
48 b(This)29 b(is)330 1864 y(normally)24 b(in)e(seconds.)30
b(The)23 b(letters)h Fj(m)p Fn(,)f Fj(h)p Fn(,)f Fj(d)h
Fn(or)g Fj(y)g Fn(indicate)i(minutes,)e(hours,)f(days)h(or)g(years.)
-150 2015 y Fj(Last)h(sample)330 2115 y Fn(This)j(column)f(shows)h(the)
g(of)n(fset)h(between)g(the)e(local)i(clock)f(and)g(the)f(sour)n(ce)h
(at)g(the)f(last)i(measur)n(e-)330 2214 y(ment.)56 b(The)33
b(number)e(in)h(the)h(squar)n(e)f(brackets)i(shows)f(the)g(actual)g
(measur)n(ed)g(of)n(fset.)59 b(This)33 b(may)330 2314
y(be)22 b(suf)n(\002xed)g(by)g Fj(us)g Fn(\(indicating)h(micr)n
(oseconds\),)i Fj(ms)d Fn(\(indicating)h(milliseconds\),)i(or)c
Fj(s)h Fn(\(indicating)330 2413 y(seconds\).)37 b(The)25
b(number)f(to)i(the)g(left)g(of)f(the)h(squar)n(e)f(brackets)i(shows)f
(the)g(original)g(measur)n(ement,)330 2513 y(adjusted)e(to)e(allow)i
(for)e(any)g(slews)i(applied)g(to)f(the)f(local)h(clock)h(since.)k(The)
22 b(number)f(following)j(the)330 2613 y Fj(+/-)g Fn(indicator)g(shows)
g(the)f(mar)n(gin)g(of)g(err)n(or)g(in)g(the)g(measur)n(ement.)330
2738 y(Positive)i(of)n(fsets)g(indicate)f(that)g(the)f(local)h(clock)g
(is)g(fast)g(of)f(the)g(sour)n(ce.)-150 3065 y Fh(4.3.4.35)56
b(sourcestats)-25 3290 y Fn(The)20 b Fj(sourcestats)j
Fn(command)e(displays)i(information)e(about)g(the)g(drift)g(rate)g(and)
f(of)n(fset)j(estimatation)g(pr)n(o-)-150 3389 y(cess)h(for)f(each)g
(of)g(the)g(sour)n(ces)h(curr)n(ently)g(being)f(examined)g(by)g
Fj(chronyd)p Fn(.)-25 3615 y(An)f(example)i(r)n(eport)g(is)90
3844 y Fj(210)55 b(Number)h(of)f(sources)i(=)d(1)90 3948
y(Name/IP)545 b(NP)164 b(NR)109 b(Span)381 b(Freq)327
b(Skew)g(S.D./us)90 4051 y(======================)q(====)q(===)q(====)q
(===)q(===)q(====)q(===)q(===)q(====)q(===)q(====)q(===)q(=)90
4155 y(abc.def.ghi)i(11)218 b(5)163 b(46m)327 b(-0.001)382
b(0.045)435 b(25)-25 4384 y Fn(The)23 b(columns)g(ar)n(e)g(as)g
(follows)-150 4635 y Fj(Name/IP)102 b Fn(This)27 b(is)g(the)g(name)g
(or)g(dotted-quad)h(IP)f(addr)n(ess)h(of)f(the)g(NTP)g(server)g(\(or)g
(peer\))h(to)f(which)g(the)g(r)n(est)330 4735 y(of)c(the)g(line)h(r)n
(elates.)-150 4886 y Fj(NP)372 b Fn(This)25 b(is)f(the)h(number)e(of)h
(sample)i(points)g(curr)n(ently)e(being)h(r)n(etained)h(for)e(the)g
(server)-7 b(.)33 b(The)24 b(drift)h(rate)330 4985 y(and)e(curr)n(ent)g
(of)n(fset)h(ar)n(e)g(estimated)h(by)e(performing)h(a)f(linear)g(r)n
(egr)n(ession)i(thr)n(ough)e(these)h(points.)-150 5137
y Fj(NR)372 b Fn(This)23 b(is)f(the)g(number)f(of)i(r)o(uns)e(of)h(r)n
(esiduals)i(having)e(the)g(same)h(sign)f(following)j(the)d(last)h(r)n
(egr)n(ession.)330 5236 y(If)30 b(this)g(number)e(starts)j(to)f(become)
g(too)h(small)f(r)n(elative)i(to)e(the)f(number)g(of)g(samples,)k(it)d
(indicates)330 5336 y(that)h(a)g(straight)h(line)f(is)g(no)g(longer)g
(a)g(good)h(\002t)e(to)i(the)f(data.)52 b(If)31 b(the)g(number)f(of)h
(r)o(uns)f(is)h(too)g(low)-8 b(,)330 5436 y Fj(chronyd)27
b Fn(discar)n(ds)h(older)e(samples)h(and)f(r)n(e-r)o(uns)f(the)h(r)n
(egr)n(ession)i(until)d(the)h(number)f(of)h(r)o(uns)e(be-)330
5535 y(comes)g(acceptable.)-150 5687 y Fj(Span)264 b
Fn(This)25 b(is)h(the)f(interval)g(between)i(the)e(oldest)h(and)f
(newest)h(samples.)36 b(If)25 b(no)f(unit)h(is)g(shown)g(the)g(value)
330 5786 y(is)e(in)g(seconds.)29 b(In)23 b(the)g(example,)h(the)f
(interval)h(is)f(46)g(minutes.)p eop
%%Page: 42 44
42 43 bop -150 -116 a Fn(Chapter)24 b(4:)k(Usage)c(r)n(efer)n(ence)2883
b(42)-150 236 y Fj(Freq)264 b Fn(This)29 b(is)g(the)g(estimated)i(r)n
(esidual)f(fr)n(equency)f(for)f(the)h(server)-7 b(,)31
b(in)d(parts)i(per)e(million.)47 b(In)28 b(this)h(case,)330
336 y(the)23 b(computer)7 b('s)24 b(clock)g(is)f(estimated)j(to)d(be)g
(r)o(unning)f(1)h(part)h(in)e(10**9)i(slow)g(r)n(elative)h(to)f(the)f
(server)-7 b(.)-150 507 y Fj(Skew)264 b Fn(This)23 b(is)h(the)f
(estimated)i(err)n(or)e(bounds)g(on)g Fj(Freq)h Fn(\(again)f(in)g
(parts)h(per)f(million\).)-150 678 y Fj(Var/us)156 b
Fn(This)23 b(is)h(the)f(estimated)i(sample)g(variance)e(in)g(micr)n
(oseconds.)-150 1035 y Fh(4.3.4.36)56 b(tracking)-25
1270 y Fn(The)22 b Fj(tracking)j Fn(command)e(displays)i(parameters)g
(about)e(the)g(system's)i(clock)f(performance.)k(An)23
b(example)-150 1370 y(of)g(the)g(output)h(is)f(shown)g(below)-8
b(.)90 1609 y Fj(Reference)57 b(ID)218 b(:)54 b(1.2.3.4)j(\(a.b.c\))90
1713 y(Stratum)491 b(:)54 b(3)90 1816 y(Ref)h(time)h(\(UTC\))110
b(:)54 b(Sun)i(May)f(17)g(06:13:11)h(1998)90 1920 y(System)g(time)273
b(:)54 b(0.000000)j(seconds)f(fast)g(of)f(NTP)g(time)90
2024 y(Frequency)383 b(:)54 b(331.898)j(ppm)e(fast)90
2128 y(Residual)i(freq)164 b(:)54 b(0.004)i(ppm)90 2232
y(Skew)653 b(:)54 b(0.154)i(ppm)90 2335 y(Root)f(delay)328
b(:)54 b(0.373169)j(seconds)90 2439 y(Root)e(dispersion)j(:)c(0.024780)
j(seconds)-25 2674 y Fn(The)23 b(\002elds)g(ar)n(e)h(explained)g(as)f
(follows.)-150 2945 y Fj(Reference)i(ID)330 3045 y Fn(This)j(is)g(the)f
(IP)g(addr)n(ess,)j(and)d(name)g(if)h(available,)i(of)d(the)h(server)g
(to)f(which)h(the)f(computer)h(is)g(cur)n(-)330 3144
y(r)n(ently)h(synchr)n(onised.)45 b(If)29 b(this)f(is)h
Fj(127.127.1.1)i Fn(it)e(means)f(the)g(computer)h(is)g(not)f(synchr)n
(onised)330 3244 y(to)e(any)f(external)h(sour)n(ce)g(and)f(that)h(you)g
(have)f(the)h(`local')g(mode)g(operating)h(\(via)f(the)g
Fj(local)g Fn(com-)330 3344 y(mand)d(in)g Fj(chronyc)i
Fn(\(see)f(Section)g(4.3.4.20)f([local)i(command],)e(page)h(34\),)f(or)
h(the)f Fj(local)h Fn(dir)n(ective)330 3443 y(in)f(the)g(`)p
Fj(/etc/chrony.conf)p Fn(')k(\002le)c(\(see)h(Section)g(4.2.1)-5
b(1)23 b([local)h(dir)n(ective],)h(page)f(20\)\).)-150
3615 y Fj(Stratum)102 b Fn(The)25 b(stratum)g(indicates)i(how)e(many)g
(hops)g(away)h(fr)n(om)f(a)g(computer)g(with)h(an)e(attached)i(r)n
(efer)n(ence)330 3714 y(clock)e(we)f(ar)n(e.)28 b(Such)21
b(a)i(computer)g(is)g(a)g(stratum-1)g(computer)-7 b(,)23
b(so)h(the)e(computer)i(in)e(the)h(example)g(is)330 3814
y(two)h(hops)f(away)h(\(i.e.)k Fj(a.b.c)d Fn(is)e(a)g(stratum-2)h(and)e
(is)i(synchr)n(onised)g(fr)n(om)f(a)g(stratum-1\).)-150
3985 y Fj(Ref)h(time)78 b Fn(This)25 b(is)f(the)g(time)h(\(GMT\))f(at)g
(which)g(the)h(last)g(measur)n(ement)g(fr)n(om)f(the)g(r)n(efer)n(ence)
i(sour)n(ce)e(was)h(pr)n(o-)330 4085 y(cessed.)-150 4256
y Fj(System)f(time)330 4356 y Fn(In)35 b(normal)g(operation,)40
b Fj(chronyd)d Fi(never)42 b Fn(steps)37 b(the)e(system)i(clock,)i
(because)d(any)f(jump)g(in)f(the)330 4455 y(timescale)c(can)e(have)g
(adverse)h(consequences)g(for)f(certain)g(application)j(pr)n(ograms.)44
b(Instead,)31 b(any)330 4555 y(err)n(or)22 b(in)g(the)h(system)h(clock)
f(is)g(corr)n(ected)h(by)e(slightly)i(speeding)g(up)e(or)g(slowing)i
(down)f(the)f(system)330 4655 y(clock)29 b(until)g(the)f(err)n(or)g
(has)g(been)h(r)n(emoved,)h(and)e(then)g(r)n(eturning)g(to)h(the)f
(system)i(clock's)g(normal)330 4754 y(speed.)h(A)23 b(consequence)h(of)
f(this)h(is)g(that)g(ther)n(e)g(will)g(be)g(a)f(period)h(when)g(the)f
(system)i(clock)f(\(as)g(r)n(ead)330 4854 y(by)g(other)h(pr)n(ograms)h
(using)e(the)h Fj(gettimeofday\(\))j Fn(system)e(call,)f(or)f(by)g(the)
h Fj(date)g Fn(command)g(in)330 4953 y(the)33 b(shell\))g(will)g(be)g
(dif)n(fer)n(ent)h(fr)n(om)f Fj(chronyd's)h Fn(estimate)h(of)d(the)h
(curr)n(ent)f(tr)o(ue)h(time)g(\(which)f(it)330 5053
y(r)n(eports)f(to)f(NTP)g(clients)h(when)f(it)g(is)g(operating)h(in)f
(server)g(mode\).)48 b(The)30 b(value)g(r)n(eported)i(on)d(this)330
5153 y(line)23 b(is)h(the)f(dif)n(fer)n(ence)i(due)d(to)i(this)g(ef)n
(fect.)330 5288 y(On)d(systems)j(such)d(as)h(Solaris)g(and)g(SunOS,)d
Fj(chronyd)k Fn(has)f(no)g(means)f(to)i(adjust)f(the)g(fundamental)330
5388 y(rate)f(of)g(the)g(system)h(clock,)g(so)g(keeps)g(the)f(system)h
(time)f(corr)n(ect)h(by)f(periodically)j(making)d(of)n(fsets)i(to)330
5487 y(it)g(as)f(though)g(an)f(err)n(or)h(had)g(been)g(measur)n(ed.)29
b(The)22 b(build)g(up)g(of)g(these)h(of)n(fsets)h(will)g(be)e(observed)
h(in)330 5587 y(this)g(r)n(eport.)30 b(On)22 b(systems)j(such)d(as)h
(Linux)g(wher)n(e)g Fj(chronyd)i Fn(can)e(adjust)g(the)g(fundamental)h
(rate)f(of)330 5687 y(the)j(system)h(clock,)g(this)f(value)g(will)g
(show)g(zer)n(o)h(unless)f(a)f(very)h(r)n(ecent)g(measur)n(ement)h(has)
e(shown)330 5786 y(the)e(system)i(to)e(be)g(err)n(or)-7
b(.)p eop
%%Page: 43 45
43 44 bop -150 -116 a Fn(Chapter)24 b(4:)e(Usage)i(r)n(efer)n(ence)2889
b(43)-150 236 y Fj(Frequency)330 336 y Fn(The)39 b(`fr)n(equency')g(is)
g(the)g(rate)g(by)f(which)h(the)g(system's)h(clock)g(would)g(be)e
(would)i(be)e(wr)n(ong)i(if)330 435 y Fj(chronyd)d Fn(was)e(not)g(corr)
n(ecting)i(it.)64 b(It)35 b(is)h(expr)n(essed)g(in)f(ppm)g(\(parts)h
(per)f(million\).)65 b(For)35 b(exam-)330 535 y(ple,)29
b(a)e(value)g(of)g(1ppm)h(would)g(mean)f(that)h(when)f(the)g(system's)i
(clock)f(thinks)g(it)f(has)h(advanced)g(1)330 635 y(second,)c(it)f(has)
g(actually)h(advanced)g(by)f(1.000001)h(seconds)g(r)n(elative)h(to)f
(tr)o(ue)f(time.)330 762 y(As)i(you)f(can)g(see)h(in)f(the)h(example,)g
(the)f(clock)i(in)e(the)g(computer)h(I)g(developed)i
Fj(chrony)e Fn(on)f(is)h(not)g(a)330 862 y(very)h(good)i(one)e(-)g(it)h
(gains)f(about)h(30)f(seconds)i(per)e(day!)39 b(This)26
b(was)h(the)g(r)n(eason)g(I)f(started)i(to)f(write)330
962 y Fj(chrony)d Fn(in)f(the)g(\002rst)g(place.)-150
1117 y Fj(Residual)i(freq)330 1217 y Fn(This)31 b(shows)h(the)g(`r)n
(esidual)g(fr)n(equency')f(for)g(the)g(curr)n(ently)h(selected)h(r)n
(efer)n(ence)f(sour)n(ce.)53 b(This)31 b(r)n(e-)330 1316
y(\003ects)e(any)f(dif)n(fer)n(ence)j(between)e(what)g(the)f(measur)n
(ements)i(fr)n(om)e(the)h(r)n(efer)n(ence)g(sour)n(ce)g(indicate)330
1416 y(the)23 b(fr)n(equency)g(should)g(be)g(and)g(the)g(fr)n(equency)g
(curr)n(ently)h(being)f(used.)330 1543 y(The)34 b(r)n(eason)h(this)g
(is)g(not)f(always)i(zer)n(o)f(is)g(that)g(a)f(smoothing)h(pr)n(ocedur)
n(e)h(is)f(applied)h(to)f(the)f(fr)n(e-)330 1643 y(quency)-10
b(.)32 b(Each)24 b(time)i(a)e(measur)n(ement)h(fr)n(om)g(the)g(r)n
(efer)n(ence)g(sour)n(ce)g(is)g(obtained)h(and)e(a)h(new)f(r)n(esid-)
330 1743 y(ual)35 b(fr)n(equency)g(computed,)k(the)d(estimated)h
(accuracy)f(of)f(this)h(r)n(esidual)g(is)g(compar)n(ed)h(with)e(the)330
1842 y(estimated)f(accuracy)e(\(see)h(`skew')g(next\))f(of)g(the)g
(existing)h(fr)n(equency)f(value.)54 b(A)32 b(weighted)i(aver)n(-)330
1942 y(age)c(is)g(computed)h(for)e(the)h(new)g(fr)n(equency)-10
b(,)31 b(with)f(weights)h(depending)g(on)e(these)i(accuracies.)48
b(If)330 2042 y(the)22 b(measur)n(ements)h(fr)n(om)g(the)f(r)n(efer)n
(ence)h(sour)n(ce)f(follow)i(a)e(consistent)i(tr)n(end,)e(the)g(r)n
(esidual)i(will)f(be)330 2141 y(driven)g(to)h(zer)n(o)f(over)h(time.)
-150 2297 y Fj(Skew)264 b Fn(This)23 b(is)h(the)f(estimated)i(err)n(or)
e(bound)g(on)g(the)g(the)g(fr)n(equency)-10 b(.)-150
2452 y Fj(Root)24 b(delay)330 2552 y Fn(This)34 b(is)g(the)g(total)h
(of)f(the)g(network)g(path)g(delays)h(to)g(the)e(stratum-1)i(computer)f
(fr)n(om)g(which)f(the)330 2651 y(computer)24 b(is)f(ultimately)i
(synchr)n(onised.)330 2779 y(In)30 b(certain)h(extr)n(eme)g
(situations,)i(this)e(value)g(can)f(be)g(negative.)51
b(\(This)31 b(can)f(arise)h(in)e(a)h(symmetric)330 2879
y(peer)f(arrangement)h(wher)n(e)f(the)g(computers')h(fr)n(equencies)g
(ar)n(e)f(not)g(tracking)h(each)f(other)g(and)f(the)330
2978 y(network)c(delay)g(is)g(very)f(short)g(r)n(elative)i(to)f(the)f
(turn-ar)n(ound)f(time)i(at)f(each)g(computer)-7 b(.\))-150
3134 y Fj(Root)24 b(dispersion)330 3233 y Fn(This)31
b(is)f(the)g(total)i(dispersion)g(accumulated)f(thr)n(ough)f(all)h(the)
f(computers)h(back)g(to)g(the)f(stratum-)330 3333 y(1)j(computer)h(fr)n
(om)f(which)h(the)f(computer)h(is)f(ultimately)j(synchr)n(onised.)60
b(Dispersion)34 b(is)g(due)f(to)330 3433 y(system)24
b(clock)g(r)n(esolution,)h(statistical)h(measur)n(ement)e(variations)h
(etc.)330 3560 y(An)h(absolute)i(bound)f(on)f(the)h(computer)7
b('s)27 b(clock)h(accuracy)f(\(assuming)g(the)g(stratum-1)g(computer)
330 3660 y(is)c(corr)n(ect\))i(is)e(given)g(by)570 3791
y Fj(clock_error)58 b(<=)c(root_dispersion)59 b(+)c(\(0.5)g(*)g
(|root_delay|\))-150 4124 y Fh(4.3.4.37)h(trimrtc)-25
4351 y Fn(The)28 b Fj(trimrtc)j Fn(command)e(is)g(used)g(to)g(corr)n
(ect)h(the)f(system's)i(r)n(eal)f(time)f(clock)h(\(R)m(TC\))f(to)h(the)
f(main)f(system)-150 4451 y(clock.)41 b(It)27 b(has)g(no)g(ef)n(fect)h
(if)f(the)g(err)n(or)g(between)h(the)f(two)h(clocks)g(is)g(curr)n
(ently)f(estimated)i(at)e(less)h(than)f(a)g(second)-150
4551 y(\(the)c(r)n(esolution)i(of)e(the)g(R)m(TC)h(is)f(only)g(1)g
(second\).)-25 4778 y(The)35 b(command)g(takes)h(no)f(ar)n(guments.)65
b(It)35 b(performs)h(the)f(following)i(steps)g(\(if)e(the)g(R)m(TC)g
(is)h(mor)n(e)f(than)g(1)-150 4878 y(second)24 b(away)g(fr)n(om)f(the)g
(system)i(clock\):)-98 5105 y(1.)60 b(Remember)34 b(the)g(curr)n(ently)
g(estimated)j(gain/loss)e(rate)f(of)g(the)g(R)m(TC)g(and)f(\003ush)g
(the)h(pr)n(evious)h(measur)n(e-)30 5204 y(ments.)-98
5332 y(2.)60 b(Step)23 b(the)h(r)n(eal)f(time)h(clock)g(to)f(bring)g
(it)h(within)f(a)g(second)h(of)f(the)g(system)i(clock.)-98
5459 y(3.)60 b(Make)35 b(several)h(measur)n(ements)f(to)h(accurately)g
(determine)f(the)g(new)g(of)n(fset)h(between)g(the)f(R)m(TC)g(and)f
(the)30 5559 y(system)24 b(clock)g(\(i.e.)29 b(the)23
b(r)n(emaining)g(fraction)h(of)f(a)g(second)h(err)n(or\))-98
5687 y(4.)60 b(Save)26 b(the)g(R)m(TC)g(parameters)h(to)f(the)g(R)m(TC)
g(\002le)g(\(speci\002ed)i(with)e(the)g Fj(rtcfile)i
Fn(dir)n(ective)g(in)d(the)h(con\002gura-)30 5786 y(tion)e(\002le)f
(\(see)g(Section)h(4.2.21)f([rtc\002le)g(dir)n(ective],)i(page)f(25\).)
p eop
%%Page: 44 46
44 45 bop -150 -116 a Fn(Chapter)24 b(4:)k(Usage)c(r)n(efer)n(ence)2883
b(44)-25 236 y(The)27 b(last)i(step)h(is)e(done)g(as)g(a)g(pr)n
(ecaution)h(against)g(the)f(computer)h(suf)n(fering)f(a)g(power)h
(failur)n(e)f(befor)n(e)h(either)-150 336 y(the)23 b(daemon)h(exits)f
(or)g(the)g Fj(writertc)i Fn(command)f(is)f(issued.)-25
560 y Fj(chronyd)31 b Fn(will)g(still)g(work)f(perfectly)i(well)f(both)
f(whilst)h(operating)g(and)e(acr)n(oss)i(machine)f(r)n(eboots)i(even)e
(if)-150 660 y(the)j Fj(trimrtc)h Fn(command)f(is)h(never)e(used)h
(\(and)g(the)g(R)m(TC)g(is)g(allowed)i(to)e(drift)h(away)f(fr)n(om)g
(tr)o(ue)g(time\).)59 b(The)-150 759 y Fj(trimrtc)32
b Fn(command)f(is)g(pr)n(ovided)i(as)e(a)f(method)i(by)f(which)f(it)h
(can)g(be)g(corr)n(ected,)j(in)c(a)g(manner)g(compatible)-150
859 y(with)24 b Fj(chronyd)g Fn(using)f(it)h(to)f(maintain)h(accurate)f
(time)h(acr)n(oss)g(machine)f(r)n(eboots.)-150 1183 y
Fh(4.3.4.38)56 b(writertc)-25 1407 y Fn(The)29 b Fj(writertc)j
Fn(command)e(writes)h(the)f(curr)n(ently)g(estimated)i(err)n(or)e(and)f
(gain/loss)i(rate)g(parameters)g(for)-150 1506 y(the)i(R)m(TC)g(to)g
(the)g(R)m(TC)g(\002le)g(\(speci\002ed)h(with)f(the)g
Fj(rtcfile)h Fn(dir)n(ective)h(\(see)f(Section)f(4.2.21)f([rtc\002le)i
(dir)n(ective],)-150 1606 y(page)j(25\)\).)69 b(This)36
b(information)i(is)e(also)i(written)f(automatically)i(when)d
Fj(chronyd)i Fn(is)f(killed)h(\(with)f(SIGHUP)-12 b(,)-150
1706 y(SIGINT)-7 b(,)24 b(SIGQUIT)g(or)f(SIGTERM\).)p
eop
%%Page: 45 47
45 46 bop -150 -116 a Fn(Appendix)24 b(A:)f(Porting)g(guide)2868
b(45)-150 236 y Fk(Appendix)33 b(A)72 b(Porting)46 b(guide)-25
570 y Fn(This)25 b(appendix)g(discusses)i(issues)f(that)f(have)g
(arisen)g(in)f(writing)i(the)e(system-speci\002c)k(parts)e(of)f(the)f
(existing)-150 670 y(ports.)29 b(This)24 b(will)g(pr)n(ovide)g(useful)f
(information)h(for)f(those)h(attempting)h(to)f(write)g(ports)g(to)f
(other)h(systems.)-150 1026 y Fm(A.1)59 b(System)41 b(driver)e(\002les)
-25 1250 y Fn(The)23 b(system)h(speci\002c)g(parts)g(of)f(the)g
(softwar)n(e)j(ar)n(e)d(contained)h(in)f(\002les)g(with)h(names)f(like)
h Fj(sys_linux.c)p Fn(.)-25 1474 y(The)f(following)i(functions)e(ar)n
(e)g(r)n(equir)n(ed)h(in)e(a)h(system)i(driver)e(\002le:)-98
1698 y(1.)60 b(A)23 b(function)g(to)h(r)n(ead)f(the)g(curr)n(ent)g(fr)n
(equency)-98 1822 y(2.)60 b(A)23 b(function)g(to)h(set)f(the)h(curr)n
(ent)e(fr)n(equency)-98 1946 y(3.)60 b(A)23 b(function)g(to)h(slew)g
(the)f(system)h(time)g(by)f(a)g(speci\002ed)i(delta)-98
2071 y(4.)60 b(A)23 b(function)g(to)h(step)g(the)f(system)h(time)g(by)f
(a)g(speci\002ed)i(delta)-98 2195 y(5.)60 b(A)24 b(function)f(to)h
(work)g(out)g(the)f(err)n(or)h(at)g(a)f(particular)h(time)h(between)f
(the)g(system's)h(clock)g(and)e Fj(chronyd's)30 2294
y Fn(estimate)29 b(of)f(r)n(eal)g(time.)42 b(\(This)27
b(is)h(r)n(equir)n(ed)g(because)g(some)g(systems)h(have)e(to)h(track)g
(r)n(eal)g(time)g(by)f(making)30 2394 y(the)c(system)i(time)e(follow)i
(it)e(in)g(a)g('sawtooth')i(fashion\).)-25 2643 y(The)g
Fi(fr)n(equency)32 b Fn(is)25 b(the)h(rate)g(at)f(which)g(the)h(system)
g(gains)g(or)f(loses)i(time,)f(measur)n(ed)g(r)n(elative)h(to)f(the)f
(system)-150 2742 y(when)e(r)o(unning)f(uncompensated.)-150
3098 y Fm(A.2)59 b(Quirks)39 b(of)h(particular)e(systems)-25
3323 y Fn(These)26 b(sections)h(describe)g(quirks)e(in)g(each)h(system)
h(type)g(that)f(needed)g(to)g(be)g(investigated)i(to)f(port)f(the)f
(soft-)-150 3422 y(war)n(e)f(to)f(each)g(system)i(type.)-150
3745 y Fh(A.2.1)56 b(Linux)-25 3969 y Fn(The)23 b(following)i(quirks)d
(have)h(been)g(found)g(in)g(developing)i(the)e(Linux)f(port.)-98
4193 y(1.)60 b(In)30 b(or)n(der)i(to)f(avoid)h(\003oating)f(point)h
(arithmetic,)i(the)d(kernel)g(uses)g(shifting)g(and)g(adding)g(to)g
(appr)n(oximate)30 4293 y(a)j(scaling)i(of)e(100/128.)64
b(This)35 b(appr)n(oximation)h(implies)g(that)f(the)g(fr)n(equency)f
(set)i(via)e(the)h Fj(adjtimex\(\))30 4393 y Fn(system)d(call)f(is)g
(not)g(the)f(fr)n(equency)h(that)g(is)g(actually)h(obtained.)52
b(The)30 b(method)h(of)g(appr)n(oximation)i(varies)30
4492 y(between)g(kernel)g(versions)g(and)e(must)h(be)g(determined)i(by)
d(examining)i(the)f(kernel)g(sour)n(ce.)55 b(An)32 b(inverse)30
4592 y(factor)24 b(must)f(be)g(included)g(in)g(the)g(driver)g(to)h
(compensate.)-98 4716 y(2.)60 b(In)23 b(some)h(kernel)g(versions,)f(an)
g Fj(adjtimex\(\))j Fn(system)f(call)f(with)g(the)f(\003ags)h(bits)g
(all)g(zer)n(oed)g(will)h(r)n(eturn)d(the)30 4816 y(amount)k(of)g(of)n
(fset)h(still)h(to)e(be)g(corr)n(ected.)38 b(In)25 b(others)i(\(e.g.)36
b(the)26 b(2.0)g(series)h(beyond)f(2.0.32\),)g(the)g(of)n(fset)i(must)
30 4915 y(be)23 b(changed)g(in)g(or)n(der)h(to)f(get)h(the)f(old)h(of)n
(fset)g(r)n(eturned)g(\(similar)g(to)f Fj(adjtime\(\))j
Fn(on)c(other)i(systems\).)-150 5238 y Fh(A.2.2)56 b(Solaris)38
b(2.5)-25 5462 y Fn(The)23 b(following)i(quirks)d(have)h(been)g(found)g
(in)g(developing)i(the)e(Solaris)h(port.)-98 5687 y(1.)60
b(The)41 b Fj(adjtime\(\))i Fn(system)f(call)g(with)f(a)g(zer)n(o)h(ar)
n(gument)f(does)h(not)f(cancel)g(an)f(adjustment)i(that)g(is)f(in)30
5786 y(pr)n(ogr)n(ess)25 b(-)e(it)g(just)g(r)n(eports)i(the)e(r)n
(emaining)h(adjustment.)p eop
%%Page: 46 48
46 47 bop -150 -116 a Fn(Appendix)24 b(A:)f(Porting)g(guide)2868
b(46)-98 236 y(2.)60 b(The)18 b Fj(settimeofday\(\))k
Fn(system)e(call)f(only)g(observes)g(the)g(seconds)g(part)g(of)f(the)h
(ar)n(gument)f(-)g(any)g(fractional)30 336 y(seconds)24
b(part)g(is)f(lost.)29 b(second.)-98 460 y(3.)60 b(The)24
b(kernel)h(variable)g Fj(dosynctodr)i Fn(has)d(to)h(be)f(set)h(to)f
(zer)n(o,)h(otherwise)h(the)e(system)i(clock)f(is)g(periodically)30
560 y(r)n(eset)f(to)g(the)f(r)n(eal-time)i(clock.)-150
884 y Fh(A.2.3)56 b(SunOS)38 b(4.1.4)-25 1108 y Fn(The)23
b(following)i(quirks)d(have)h(been)g(found)g(in)g(developing)i(the)e
(SunOS)e(port.)-98 1332 y(1.)60 b(The)27 b Fj(adjtime\(\))j
Fn(system)f(call)f(tr)o(uncates)g(its)h(ar)n(gument)e(to)h(a)f
(multiple)i(of)f(the)f(system's)i Fj(tickadj)g Fn(vari-)30
1432 y(able.)g(\()p Fj(chronyd)24 b Fn(sets)h(that)e(to)h(100,)f
(giving)g(a)g(1)g(part)h(in)e(100)i(slewing)g(capability)i(for)d(corr)n
(ecting)h(of)n(fsets.\))-98 1556 y(2.)60 b(The)24 b(kernel)h(variable)g
Fj(dosynctodr)i Fn(has)d(to)h(be)f(set)h(to)f(zer)n(o,)h(otherwise)h
(the)e(system)i(clock)f(is)g(periodically)30 1656 y(r)n(eset)f(to)g
(the)f(r)n(eal-time)i(clock.)p eop
%%Page: -1 49
-1 48 bop 3874 -116 a Fn(i)-150 236 y Fk(T)-16 b(able)46
b(of)i(Contents)-150 568 y Fm(1)119 b(Introduction)35
b Fb(.)20 b(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)g
(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)g(.)
f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)64
b Fm(1)149 693 y Fn(1.1)90 b(Overview)21 b Fa(.)c(.)e(.)g(.)g(.)f(.)h
(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)
g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h
(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)
h(.)g(.)g(.)f(.)h(.)g(.)43 b Fn(1)149 792 y(1.2)90 b(Acknowledgements)9
b Fa(.)19 b(.)14 b(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)
g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g
(.)f(.)h(.)g(.)g(.)30 b Fn(1)149 892 y(1.3)90 b(A)-8
b(vailability)29 b Fa(.)15 b(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)
f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)47
b Fn(1)448 992 y(1.3.1)90 b(Getting)25 b(the)e(softwar)n(e)k
Fa(.)15 b(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)
g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)47 b Fn(1)448
1091 y(1.3.2)90 b(Platforms)12 b Fa(.)k(.)f(.)g(.)g(.)g(.)f(.)h(.)g(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)
g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)34 b Fn(1)149
1191 y(1.4)90 b(Relationship)26 b(to)e(other)f(softwar)n(e)i(packages)j
Fa(.)15 b(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)47
b Fn(2)448 1291 y(1.4.1)90 b(xntpd)12 b Fa(.)j(.)g(.)g(.)g(.)g(.)f(.)h
(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)
h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h
(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)
34 b Fn(2)448 1390 y(1.4.2)90 b(timed)14 b Fa(.)i(.)f(.)g(.)g(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)
h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)
f(.)36 b Fn(3)149 1490 y(1.5)90 b(Distribution)25 b(rights)f(and)e
(\(lack)i(of\))f(warranty)13 b Fa(.)k(.)d(.)h(.)g(.)g(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
g(.)g(.)f(.)h(.)g(.)35 b Fn(3)-150 1722 y Fm(2)119 b(Installation)15
b Fb(.)k(.)h(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)g(.)f(.)h(.)g(.)
g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)g
(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)44
b Fm(6)-150 1980 y(3)119 b(T)-11 b(ypical)30 b(operating)g(scenarios)j
Fb(.)20 b(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)g(.)f(.)h(.)g
(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)g(.)f(.)h(.)g(.)63
b Fm(7)149 2104 y Fn(3.1)90 b(Computers)25 b(connected)f(to)f(the)g
(internet)17 b Fa(.)f(.)f(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)g(.)g(.)f(.)39 b Fn(7)149 2204 y(3.2)90 b(Infr)n(equent)24
b(connection)g(to)f(tr)o(ue)g(NTP)g(servers)d Fa(.)c(.)f(.)g(.)g(.)g(.)
f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)42 b Fn(7)448 2303 y(3.2.1)90
b(Setting)24 b(up)f(the)g(con\002guration)g(\002le)g(for)g(infr)n
(equent)g(connections)17 b Fa(.)f(.)f(.)g(.)38 b Fn(7)448
2403 y(3.2.2)90 b(How)24 b(to)g(tell)g(chr)n(onyd)f(when)g(the)g
(internet)h(link)f(is)g(available.)9 b Fa(.)17 b(.)e(.)g(.)g(.)f(.)h(.)
g(.)31 b Fn(9)149 2503 y(3.3)90 b(Isolated)26 b(networks)14
b Fa(.)i(.)f(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
g(.)g(.)f(.)h(.)g(.)35 b Fn(9)149 2602 y(3.4)90 b(The)24
b(home)f(PC)f(with)i(a)e(dial-up)i(connection)k Fa(.)15
b(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)48
b Fn(10)448 2702 y(3.4.1)90 b(Assumptions/how)26 b(the)d(softwar)n(e)i
(works)12 b Fa(.)k(.)f(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h
(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)34 b Fn(10)448
2802 y(3.4.2)90 b(T)-8 b(ypical)25 b(con\002guration)e(\002les.)15
b Fa(.)g(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g
(.)g(.)f(.)36 b Fn(1)-5 b(1)149 2901 y(3.5)90 b(Other)23
b(important)i(con\002guration)e(options)11 b Fa(.)17
b(.)e(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)33
b Fn(13)-150 3134 y Fm(4)119 b(Usage)30 b(reference)16
b Fb(.)i(.)i(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)g(.)
f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)g(.)f(.)h
(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)46 b Fm(14)149
3258 y Fn(4.1)90 b(Starting)24 b(chr)n(onyd)12 b Fa(.)j(.)g(.)f(.)h(.)g
(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)
g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h
(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)33
b Fn(14)149 3358 y(4.2)90 b(The)24 b(chr)n(onyd)f(con\002guration)g
(\002le)f Fa(.)16 b(.)f(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)44 b Fn(15)448
3457 y(4.2.1)90 b(allow)16 b Fa(.)h(.)e(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)38
b Fn(15)448 3557 y(4.2.2)90 b(bindaddr)n(ess)13 b Fa(.)k(.)e(.)f(.)h(.)
g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h
(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)
h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)34 b
Fn(16)448 3657 y(4.2.3)90 b(commandkey)26 b Fa(.)15 b(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)46 b Fn(17)448
3756 y(4.2.4)90 b(cmdport)12 b Fa(.)k(.)f(.)g(.)g(.)f(.)h(.)g(.)g(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g
(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)34 b Fn(17)448
3856 y(4.2.5)90 b(deny)28 b Fa(.)14 b(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)49
b Fn(17)448 3956 y(4.2.6)90 b(drift\002le)15 b Fa(.)h(.)f(.)g(.)f(.)h
(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)
g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h
(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)36
b Fn(17)448 4055 y(4.2.7)90 b(dumpdir)22 b Fa(.)16 b(.)f(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)44
b Fn(18)448 4155 y(4.2.8)90 b(dumponexit)14 b Fa(.)i(.)f(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)36 b Fn(18)448
4254 y(4.2.9)90 b(initstepslew)18 b Fa(.)h(.)14 b(.)h(.)g(.)g(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)
h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)40 b Fn(18)448
4354 y(4.2.10)90 b(key\002le)8 b Fa(.)17 b(.)e(.)g(.)f(.)h(.)g(.)g(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)30
b Fn(19)448 4454 y(4.2.1)-5 b(1)91 b(local)14 b Fa(.)h(.)g(.)g(.)g(.)f
(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)
g(.)35 b Fn(20)448 4553 y(4.2.12)90 b(log)23 b Fa(.)16
b(.)f(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)
f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)45 b Fn(20)747 4653 y(4.2.12.1)90
b(Measur)n(ements)24 b(log)g(\002le)f(format)13 b Fa(.)j(.)f(.)f(.)h(.)
g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)35 b Fn(21)747 4753 y(4.2.12.2)90 b(Statistics)26
b(log)d(\002le)g(format)c Fa(.)d(.)e(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g
(.)40 b Fn(21)747 4852 y(4.2.12.3)90 b(T)-8 b(racking)24
b(log)g(\002le)f(format)d Fa(.)15 b(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)
h(.)42 b Fn(22)747 4952 y(4.2.12.4)90 b(Real-time)25
b(clock)f(log)g(\002le)f(format)c Fa(.)d(.)f(.)g(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)41
b Fn(23)448 5051 y(4.2.13)90 b(logchange)13 b Fa(.)k(.)d(.)h(.)g(.)g(.)
g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g
(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)35 b
Fn(23)448 5151 y(4.2.14)90 b(logdir)21 b Fa(.)c(.)d(.)h(.)g(.)g(.)f(.)h
(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)
h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)43
b Fn(24)448 5251 y(4.2.15)90 b(mailonchange)12 b Fa(.)k(.)f(.)g(.)f(.)h
(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)
h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)33 b Fn(24)448 5350
y(4.2.16)90 b(manual)10 b Fa(.)15 b(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)31 b Fn(24)448
5450 y(4.2.17)90 b(maxupdateskew)20 b Fa(.)d(.)e(.)g(.)g(.)g(.)f(.)h(.)
g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h
(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)
g(.)g(.)g(.)41 b Fn(24)448 5550 y(4.2.18)90 b(noclientlog)14
b Fa(.)k(.)c(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)
g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h
(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)
36 b Fn(25)448 5649 y(4.2.19)90 b(peer)16 b Fa(.)h(.)d(.)h(.)g(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)
f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)
38 b Fn(25)448 5749 y(4.2.20)90 b(port)20 b Fa(.)d(.)d(.)h(.)g(.)g(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)
42 b Fn(25)p eop
%%Page: -2 50
-2 49 bop 3847 -116 a Fn(ii)448 83 y(4.2.21)90 b(rtc\002le)9
b Fa(.)16 b(.)f(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g
(.)f(.)h(.)g(.)g(.)g(.)f(.)31 b Fn(25)448 183 y(4.2.22)90
b(rtconutc)15 b Fa(.)h(.)e(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)g(.)g(.)36 b Fn(26)448 282 y(4.2.23)90
b(server)19 b Fa(.)d(.)e(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)
g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)41 b Fn(26)149 382 y(4.3)90
b(Running)23 b(chr)n(onyc)f Fa(.)15 b(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)43 b Fn(27)448
482 y(4.3.1)90 b(Basic)24 b(use)d Fa(.)15 b(.)g(.)g(.)g(.)f(.)h(.)g(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)
g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)43 b Fn(27)448
581 y(4.3.2)90 b(Command)23 b(line)h(options)k Fa(.)15
b(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
g(.)g(.)f(.)h(.)48 b Fn(28)448 681 y(4.3.3)90 b(Security)23
b(with)h(chr)n(onyc)10 b Fa(.)16 b(.)e(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g
(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)32
b Fn(28)448 780 y(4.3.4)90 b(Command)23 b(r)n(efer)n(ence)g
Fa(.)17 b(.)d(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h
(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)
h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)45 b Fn(29)747 880
y(4.3.4.1)90 b(accheck)15 b Fa(.)h(.)e(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g
(.)f(.)37 b Fn(29)747 980 y(4.3.4.2)90 b(add)23 b(peer)12
b Fa(.)k(.)f(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)34 b Fn(29)747
1079 y(4.3.4.3)90 b(add)23 b(server)14 b Fa(.)i(.)f(.)g(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)
g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)g(.)36 b Fn(29)747 1179 y(4.3.4.4)90 b(allow)22 b
Fa(.)16 b(.)f(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)43
b Fn(30)747 1279 y(4.3.4.5)90 b(allow)24 b(all)18 b Fa(.)e(.)f(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)
f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)g(.)g(.)f(.)h(.)40 b Fn(30)747 1378 y(4.3.4.6)90
b(burst)10 b Fa(.)15 b(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h
(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)
h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f
(.)h(.)32 b Fn(30)747 1478 y(4.3.4.7)90 b(clients)25
b Fa(.)15 b(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)
g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)45
b Fn(31)747 1577 y(4.3.4.8)90 b(cmdaccheck)21 b Fa(.)c(.)d(.)h(.)g(.)g
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g
(.)g(.)43 b Fn(32)747 1677 y(4.3.4.9)90 b(cmdallow)9
b Fa(.)17 b(.)e(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)
g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)31 b Fn(32)747
1777 y(4.3.4.10)90 b(cmdallow)25 b(all)c Fa(.)16 b(.)e(.)h(.)g(.)g(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)
g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)43
b Fn(32)747 1876 y(4.3.4.1)-5 b(1)90 b(cmddeny)19 b Fa(.)d(.)f(.)f(.)h
(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)
h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h
(.)g(.)g(.)g(.)f(.)41 b Fn(32)747 1976 y(4.3.4.12)90
b(cmddeny)24 b(all)13 b Fa(.)i(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)
g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)35 b
Fn(32)747 2076 y(4.3.4.13)90 b(cyclelogs)22 b Fa(.)c(.)d(.)g(.)g(.)f(.)
h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h
(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)
h(.)g(.)g(.)44 b Fn(32)747 2175 y(4.3.4.14)90 b(delete)9
b Fa(.)17 b(.)e(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)31
b Fn(33)747 2275 y(4.3.4.15)90 b(deny)10 b Fa(.)15 b(.)g(.)g(.)f(.)h(.)
g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h
(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)
h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)31 b Fn(33)747 2374 y(4.3.4.16)90
b(deny)23 b(all)j Fa(.)15 b(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)47
b Fn(33)747 2474 y(4.3.4.17)90 b(dump)26 b Fa(.)15 b(.)g(.)g(.)g(.)f(.)
h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h
(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)
h(.)g(.)g(.)g(.)f(.)h(.)48 b Fn(33)747 2574 y(4.3.4.18)90
b(exit)19 b Fa(.)c(.)g(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g
(.)40 b Fn(33)747 2673 y(4.3.4.19)90 b(help)22 b Fa(.)16
b(.)e(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)
g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)44
b Fn(33)747 2773 y(4.3.4.20)90 b(local)17 b Fa(.)f(.)f(.)g(.)f(.)h(.)g
(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)
g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h
(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)38 b Fn(34)747 2873 y(4.3.4.21)90
b(makestep)13 b Fa(.)k(.)e(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)
h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)34
b Fn(34)747 2972 y(4.3.4.22)90 b(manual)15 b Fa(.)g(.)g(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)g(.)g(.)f(.)h(.)37 b Fn(34)747 3072 y(4.3.4.23)90
b(maxdelay)9 b Fa(.)16 b(.)f(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)
f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)30
b Fn(35)747 3171 y(4.3.4.24)90 b(maxdelayratio)10 b Fa(.)18
b(.)c(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g
(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)32 b Fn(35)747 3271 y(4.3.4.25)90 b(maxpoll)22
b Fa(.)16 b(.)f(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g
(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)44 b Fn(36)747
3371 y(4.3.4.26)90 b(maxupdateskew)28 b Fa(.)15 b(.)g(.)f(.)h(.)g(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)
g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)47 b
Fn(36)747 3470 y(4.3.4.27)90 b(minpoll)9 b Fa(.)17 b(.)d(.)h(.)g(.)g(.)
g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)g(.)31 b Fn(36)747 3570 y(4.3.4.28)90
b(of)n(\003ine)20 b Fa(.)d(.)e(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)
h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)42
b Fn(37)747 3670 y(4.3.4.29)90 b(online)23 b Fa(.)16
b(.)e(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g
(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)45 b Fn(38)747
3769 y(4.3.4.30)90 b(passwor)n(d)9 b Fa(.)18 b(.)d(.)g(.)f(.)h(.)g(.)g
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g
(.)g(.)31 b Fn(38)747 3869 y(4.3.4.31)90 b(quit)11 b
Fa(.)k(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)
f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)33
b Fn(38)747 3968 y(4.3.4.32)90 b(rtcdata)29 b Fa(.)14
b(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)49 b Fn(39)747
4068 y(4.3.4.33)90 b(settime)22 b Fa(.)17 b(.)e(.)g(.)f(.)h(.)g(.)g(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)
g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g
(.)f(.)h(.)44 b Fn(39)747 4168 y(4.3.4.34)90 b(sour)n(ces)18
b Fa(.)e(.)f(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)
g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)40 b Fn(40)747
4267 y(4.3.4.35)90 b(sour)n(cestats)22 b Fa(.)c(.)d(.)g(.)f(.)h(.)g(.)g
(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)44
b Fn(41)747 4367 y(4.3.4.36)90 b(tracking)21 b Fa(.)16
b(.)f(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h
(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)
h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)43 b Fn(42)747 4467
y(4.3.4.37)90 b(trimrtc)10 b Fa(.)16 b(.)e(.)h(.)g(.)g(.)f(.)h(.)g(.)g
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g
(.)g(.)f(.)32 b Fn(43)747 4566 y(4.3.4.38)90 b(writertc)9
b Fa(.)17 b(.)e(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)31 b
Fn(44)-150 4799 y Fm(Appendix)e(A)120 b(Porting)30 b(guide)21
b Fb(.)f(.)g(.)g(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)
f(.)h(.)g(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h
(.)51 b Fm(45)149 4923 y Fn(A.1)91 b(System)23 b(driver)g(\002les)d
Fa(.)c(.)f(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g
(.)g(.)42 b Fn(45)149 5023 y(A.2)91 b(Quirks)23 b(of)g(particular)h
(systems)14 b Fa(.)j(.)d(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)36
b Fn(45)448 5122 y(A.2.1)90 b(Linux)16 b Fa(.)f(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)
f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)38
b Fn(45)448 5222 y(A.2.2)90 b(Solaris)24 b(2.5)i Fa(.)15
b(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)
g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)48
b Fn(45)448 5322 y(A.2.3)90 b(SunOS)21 b(4.1.4)9 b Fa(.)15
b(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)
g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)31
b Fn(46)p eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
