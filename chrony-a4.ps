%!PS-Adobe-2.0
%%Creator: dvipsk 5.58f Copyright 1986, 1994 Radical Eye Software
%%Title: chrony.dvi
%%Pages: 47
%%PageOrder: Ascend
%%BoundingBox: 0 0 596 842
%%DocumentFonts: Palatino-Bold Palatino-Roman Courier Helvetica
%%+ Palatino-BoldItalic Palatino-Italic
%%DocumentPaperSizes: a4
%%EndComments
%DVIPSCommandLine: dvips chrony.dvi -o chrony-a4.ps
%DVIPSParameters: dpi=600, comments removed
%DVIPSSource:  TeX output 1998.08.01:1138
%%BeginProcSet: tex.pro
/TeXDict 250 dict def TeXDict begin /N{def}def /B{bind def}N /S{exch}N
/X{S N}B /TR{translate}N /isls false N /vsize 11 72 mul N /hsize 8.5 72
mul N /landplus90{false}def /@rigin{isls{[0 landplus90{1 -1}{-1 1}
ifelse 0 0 0]concat}if 72 Resolution div 72 VResolution div neg scale
isls{landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div
hsize mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul
TR[matrix currentmatrix{dup dup round sub abs 0.00001 lt{round}if}
forall round exch round exch]setmatrix}N /@landscape{/isls true N}B
/@manualfeed{statusdict /manualfeed true put}B /@copies{/#copies X}B
/FMat[1 0 0 -1 0 0]N /FBB[0 0 0 0]N /nn 0 N /IE 0 N /ctr 0 N /df-tail{
/nn 8 dict N nn begin /FontType 3 N /FontMatrix fntrx N /FontBBox FBB N
string /base X array /BitMaps X /BuildChar{CharBuilder}N /Encoding IE N
end dup{/foo setfont}2 array copy cvx N load 0 nn put /ctr 0 N[}B /df{
/sf 1 N /fntrx FMat N df-tail}B /dfs{div /sf X /fntrx[sf 0 0 sf neg 0 0]
N df-tail}B /E{pop nn dup definefont setfont}B /ch-width{ch-data dup
length 5 sub get}B /ch-height{ch-data dup length 4 sub get}B /ch-xoff{
128 ch-data dup length 3 sub get sub}B /ch-yoff{ch-data dup length 2 sub
get 127 sub}B /ch-dx{ch-data dup length 1 sub get}B /ch-image{ch-data
dup type /stringtype ne{ctr get /ctr ctr 1 add N}if}B /id 0 N /rw 0 N
/rc 0 N /gp 0 N /cp 0 N /G 0 N /sf 0 N /CharBuilder{save 3 1 roll S dup
/base get 2 index get S /BitMaps get S get /ch-data X pop /ctr 0 N ch-dx
0 ch-xoff ch-yoff ch-height sub ch-xoff ch-width add ch-yoff
setcachedevice ch-width ch-height true[1 0 0 -1 -.1 ch-xoff sub ch-yoff
.1 sub]{ch-image}imagemask restore}B /D{/cc X dup type /stringtype ne{]}
if nn /base get cc ctr put nn /BitMaps get S ctr S sf 1 ne{dup dup
length 1 sub dup 2 index S get sf div put}if put /ctr ctr 1 add N}B /I{
cc 1 add D}B /bop{userdict /bop-hook known{bop-hook}if /SI save N @rigin
0 0 moveto /V matrix currentmatrix dup 1 get dup mul exch 0 get dup mul
add .99 lt{/QV}{/RV}ifelse load def pop pop}N /eop{SI restore userdict
/eop-hook known{eop-hook}if showpage}N /@start{userdict /start-hook
known{start-hook}if pop /VResolution X /Resolution X 1000 div /DVImag X
/IE 256 array N 0 1 255{IE S 1 string dup 0 3 index put cvn put}for
65781.76 div /vsize X 65781.76 div /hsize X}N /p{show}N /RMat[1 0 0 -1 0
0]N /BDot 260 string N /rulex 0 N /ruley 0 N /v{/ruley X /rulex X V}B /V
{}B /RV statusdict begin /product where{pop product dup length 7 ge{0 7
getinterval dup(Display)eq exch 0 4 getinterval(NeXT)eq or}{pop false}
ifelse}{false}ifelse end{{gsave TR -.1 .1 TR 1 1 scale rulex ruley false
RMat{BDot}imagemask grestore}}{{gsave TR -.1 .1 TR rulex ruley scale 1 1
false RMat{BDot}imagemask grestore}}ifelse B /QV{gsave newpath transform
round exch round exch itransform moveto rulex 0 rlineto 0 ruley neg
rlineto rulex neg 0 rlineto fill grestore}B /a{moveto}B /delta 0 N /tail
{dup /delta X 0 rmoveto}B /M{S p delta add tail}B /b{S p tail}B /c{-4 M}
B /d{-3 M}B /e{-2 M}B /f{-1 M}B /g{0 M}B /h{1 M}B /i{2 M}B /j{3 M}B /k{
4 M}B /w{0 rmoveto}B /l{p -4 w}B /m{p -3 w}B /n{p -2 w}B /o{p -1 w}B /q{
p 1 w}B /r{p 2 w}B /s{p 3 w}B /t{p 4 w}B /x{0 S rmoveto}B /y{3 2 roll p
a}B /bos{/SS save N}B /eos{SS restore}B end
%%EndProcSet
%%BeginFont: Palatino-Bold
% @@psencodingfile@{
%   author = "S. Rahtz, P. MacKay, Alan Jeffrey, B. Horn, K. Berry",
%   version = "0.6",
%   date = "22 June 1996",
%   filename = "8r.enc",
%   email = "kb@@mail.tug.org",
%   address = "135 Center Hill Rd. // Plymouth, MA 02360",
%   codetable = "ISO/ASCII",
%   checksum = "119     662    4424",
%   docstring = "Encoding for TrueType or Type 1 fonts to be used with TeX."
% @}
% 
% Idea is to have all the characters normally included in Type 1 fonts
% available for typesetting. This is effectively the characters in Adobe
% Standard Encoding + ISO Latin 1 + extra characters from Lucida.
% 
% Character code assignments were made as follows:
% 
% (1) the Windows ANSI characters are almost all in their Windows ANSI
% positions, because some Windows users cannot easily reencode the
% fonts, and it makes no difference on other systems. The only Windows
% ANSI characters not available are those that make no sense for
% typesetting -- rubout (127 decimal), nobreakspace (160), softhyphen
% (173). quotesingle and grave are moved just because it's such an
% irritation not having them in TeX positions.
% 
% (2) Remaining characters are assigned arbitrarily to the lower part
% of the range, avoiding 0, 10 and 13 in case we meet dumb software.
% 
% (3) Y&Y Lucida Bright includes some extra text characters; in the
% hopes that other PostScript fonts, perhaps created for public
% consumption, will include them, they are included starting at 0x12.
% 
% (4) Remaining positions left undefined are for use in (hopefully)
% upward-compatible revisions, if someday more characters are generally
% available.
% 
% (5) hyphen appears twice for compatibility with both ASCII and Windows.
% 
/TeXBase1Encoding [
% 0x00 (encoded characters from Adobe Standard not in Windows 3.1)
  /.notdef /dotaccent /fi /fl
  /fraction /hungarumlaut /Lslash /lslash
  /ogonek /ring /.notdef
  /breve /minus /.notdef 
% These are the only two remaining unencoded characters, so may as
% well include them.
  /Zcaron /zcaron 
% 0x10
 /caron /dotlessi 
% (unusual TeX characters available in, e.g., Lucida Bright)
 /dotlessj /ff /ffi /ffl 
 /.notdef /.notdef /.notdef /.notdef
 /.notdef /.notdef /.notdef /.notdef
 % very contentious; it's so painful not having quoteleft and quoteright
 % at 96 and 145 that we move the things normally found there down to here.
 /grave /quotesingle 
% 0x20 (ASCII begins)
 /space /exclam /quotedbl /numbersign
 /dollar /percent /ampersand /quoteright
 /parenleft /parenright /asterisk /plus /comma /hyphen /period /slash
% 0x30
 /zero /one /two /three /four /five /six /seven
 /eight /nine /colon /semicolon /less /equal /greater /question
% 0x40
 /at /A /B /C /D /E /F /G /H /I /J /K /L /M /N /O
% 0x50
 /P /Q /R /S /T /U /V /W
 /X /Y /Z /bracketleft /backslash /bracketright /asciicircum /underscore
% 0x60
 /quoteleft /a /b /c /d /e /f /g /h /i /j /k /l /m /n /o
% 0x70
 /p /q /r /s /t /u /v /w
 /x /y /z /braceleft /bar /braceright /asciitilde
 /.notdef % rubout; ASCII ends
% 0x80
 /.notdef /.notdef /quotesinglbase /florin
 /quotedblbase /ellipsis /dagger /daggerdbl
 /circumflex /perthousand /Scaron /guilsinglleft
 /OE /.notdef /.notdef /.notdef
% 0x90
 /.notdef /.notdef /.notdef /quotedblleft
 /quotedblright /bullet /endash /emdash
 /tilde /trademark /scaron /guilsinglright
 /oe /.notdef /.notdef /Ydieresis
% 0xA0
 /.notdef % nobreakspace
 /exclamdown /cent /sterling
 /currency /yen /brokenbar /section
 /dieresis /copyright /ordfeminine /guillemotleft
 /logicalnot
 /hyphen % Y&Y (also at 45); Windows' softhyphen
 /registered
 /macron
% 0xD0
 /degree /plusminus /twosuperior /threesuperior
 /acute /mu /paragraph /periodcentered
 /cedilla /onesuperior /ordmasculine /guillemotright
 /onequarter /onehalf /threequarters /questiondown
% 0xC0
 /Agrave /Aacute /Acircumflex /Atilde /Adieresis /Aring /AE /Ccedilla
 /Egrave /Eacute /Ecircumflex /Edieresis
 /Igrave /Iacute /Icircumflex /Idieresis
% 0xD0
 /Eth /Ntilde /Ograve /Oacute
 /Ocircumflex /Otilde /Odieresis /multiply
 /Oslash /Ugrave /Uacute /Ucircumflex
 /Udieresis /Yacute /Thorn /germandbls
% 0xE0
 /agrave /aacute /acircumflex /atilde
 /adieresis /aring /ae /ccedilla
 /egrave /eacute /ecircumflex /edieresis
 /igrave /iacute /icircumflex /idieresis
% 0xF0
 /eth /ntilde /ograve /oacute
 /ocircumflex /otilde /odieresis /divide
 /oslash /ugrave /uacute /ucircumflex
 /udieresis /yacute /thorn /ydieresis
] def
%%EndFont
%%BeginProcSet: texps.pro
TeXDict begin /rf{findfont dup length 1 add dict begin{1 index /FID ne 2
index /UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]/Metrics
exch def dict begin Encoding{exch dup type /integertype ne{pop pop 1 sub
dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get div def}
ifelse}forall Metrics /Metrics currentdict end def[2 index currentdict
end definefont 3 -1 roll makefont /setfont load]cvx def}def
/ObliqueSlant{dup sin S cos div neg}B /SlantFont{4 index mul add}def
/ExtendFont{3 -1 roll mul exch}def /ReEncodeFont{/Encoding exch def}def
end
%%EndProcSet
TeXDict begin 39158280 55380996 1000 600 600 (chrony.dvi)
@start /Fa 209[23 46[{ TeXBase1Encoding ReEncodeFont }1
90.833285 /Palatino-Italic rf /Fb 209[30 46[{
 TeXBase1Encoding ReEncodeFont }1 119.999948 /Palatino-BoldItalic
rf /Fc 1 50 df<00380000780001F8001FF800FEF800E0F80000F80000F80000F80000
F80000F80000F80000F80000F80000F80000F80000F80000F80000F80000F80000F80000
F80000F80000F80000F80000F80000F80000F80000F80000F80000F80000F80000F80000
F80000F80001FC00FFFFF8FFFFF815267BA521>49 D E /Fd 139[22
1[26 2[36 39 1[19 39[51 47 21[22 45[{ TeXBase1Encoding ReEncodeFont }8
66.666667 /Palatino-Roman rf /Fe 2 106 df<0001800003C00007C00007C0000780
000F80000F80001F00001F00001E00003E00003E00007C00007C0000780000F80000F800
01F00001F00001E00003E00003E00007C00007C0000780000F80000F80001F00001F0000
1E00003E00003E00007C00007C0000780000F80000F80000F80000F800007800007C0000
7C00003E00003E00001E00001F00001F00000F80000F800007800007C00007C00003E000
03E00001E00001F00001F00000F80000F800007800007C00007C00003E00003E00001E00
001F00001F00000F80000F800007800007C00007C00003C0000180124A79B71E>104
D<600000F00000F80000F800007800007C00007C00003E00003E00001E00001F00001F00
000F80000F800007800007C00007C00003E00003E00001E00001F00001F00000F80000F8
00007800007C00007C00003E00003E00001E00001F00001F00000F80000F800007800007
C00007C00007C00007C0000780000F80000F80001F00001F00001E00003E00003E00007C
00007C0000780000F80000F80001F00001F00001E00003E00003E00007C00007C0000780
000F80000F80001F00001F00001E00003E00003E00007C00007C0000780000F80000F800
00F00000600000124A7CB71E>I E /Ff 134[45 45 65 45 50 25
45 30 50 50 50 50 75 20 45 20 20 50 50 25 50 50 45 50
50 20 6[60 60 85 60 65 55 60 65 70 60 70 65 75 50 60
1[25 65 70 55 60 65 65 60 60 3[53 1[25 25 1[50 50 50
50 50 50 50 50 1[25 25 1[25 2[30 30 20 39[{
 TeXBase1Encoding ReEncodeFont }67 90.833285 /Helvetica
rf /Fg 134[60 54 90 60 66 36 48 42 66 66 60 66 97 36
66 1[36 66 60 42 54 66 48 66 54 12[72 66 78 1[66 90 1[109
66 3[90 90 3[78 72 84 7[54 54 54 54 54 54 54 54 54 54
32 27 36 45[{ TeXBase1Encoding ReEncodeFont }49 108.999887
/Palatino-Bold rf /Fh 134[50 1[75 51 55 30 38 36 51 54
49 53 80 26 2[26 53 50 30 43 55 40 50 45 12[55 48 60
1[55 71 75 86 3[30 3[55 70 2[70 5[23 23 4[45 6[23 30
23 4[25 39[{ .167 SlantFont TeXBase1Encoding ReEncodeFont }40
90.833285 /Palatino-Roman rf /Fi 134[80 72 2[88 48 64
56 1[88 80 88 1[48 2[48 1[80 56 72 88 64 88 72 11[112
96 3[88 6[56 5[104 1[112 12[72 72 72 72 49[{
 TeXBase1Encoding ReEncodeFont }28 143.999997 /Palatino-Bold
rf /Fj 129[54 54 54 54 54 54 54 54 54 54 54 54 54 54
54 54 54 54 54 54 54 54 54 54 54 54 54 54 54 54 54 54
54 54 54 54 4[54 54 54 54 54 1[54 54 54 54 54 54 54 54
1[54 54 54 54 54 2[54 54 54 54 54 54 54 54 54 54 54 54
54 54 54 54 54 54 54 54 54 54 54 54 54 54 54 54 54 54
54 54 33[{ TeXBase1Encoding ReEncodeFont }86 90.833285
/Courier rf /Fk 2 16 df<000000007FFE0000000000000007FFFFE00000000000003F
FFFFFC000000000000FFFFFFFF000000000003FFC003FFC0000000000FFC00003FF00000
00003FE0000007FC000000007F80000001FE00000001FE000000007F80000003F8000000
001FC0000007E00000000007E000000FC00000000003F000001F800000000001F800003F
000000000000FC00007E0000000000007E0000FC0000000000003F0000F8000000000000
1F0001F00000000000000F8003F00000000000000FC003E000000000000007C007C00000
0000000003E007C000000000000003E00F8000000000000001F00F8000000000000001F0
1F0000000000000000F81F0000000000000000F81E0000000000000000783E0000000000
0000007C3E00000000000000007C3C00000000000000003C7C00000000000000003E7C00
000000000000003E7800000000000000001E7800000000000000001E7800000000000000
001EF800000000000000001FF800000000000000001FF000000000000000000FF0000000
00000000000FF000000000000000000FF000000000000000000FF000000000000000000F
F000000000000000000FF000000000000000000FF000000000000000000FF00000000000
0000000FF000000000000000000FF000000000000000000FF800000000000000001FF800
000000000000001F7800000000000000001E7800000000000000001E7800000000000000
001E7C00000000000000003E7C00000000000000003E3C00000000000000003C3E000000
00000000007C3E00000000000000007C1E0000000000000000781F0000000000000000F8
1F0000000000000000F80F8000000000000001F00F8000000000000001F007C000000000
000003E007C000000000000003E003E000000000000007C003F00000000000000FC001F0
0000000000000F8000F80000000000001F0000FC0000000000003F00007E000000000000
7E00003F000000000000FC00001F800000000001F800000FC00000000003F0000007E000
00000007E0000003F8000000001FC0000001FE000000007F800000007F80000001FE0000
00003FE0000007FC000000000FFC00003FF00000000003FFC003FFC00000000000FFFFFF
FF0000000000003FFFFFFC00000000000007FFFFE0000000000000007FFE000000005055
7BC05B>13 D<000FFC0000003FFF000000FFFFC00003FFFFF00007FFFFF8000FFFFFFC00
1FFFFFFE003FFFFFFF003FFFFFFF007FFFFFFF807FFFFFFF807FFFFFFF80FFFFFFFFC0FF
FFFFFFC0FFFFFFFFC0FFFFFFFFC0FFFFFFFFC0FFFFFFFFC0FFFFFFFFC0FFFFFFFFC0FFFF
FFFFC0FFFFFFFFC07FFFFFFF807FFFFFFF807FFFFFFF803FFFFFFF003FFFFFFF001FFFFF
FE000FFFFFFC0007FFFFF80003FFFFF00000FFFFC000003FFF0000000FFC000022227BA7
2D>15 D E /Fl 134[66 60 100 66 73 40 53 47 73 73 66 73
106 40 73 1[40 73 66 47 60 73 53 73 60 11[93 80 73 86
100 73 100 100 4[47 4[100 86 1[93 9[60 60 60 60 60 60
60 2[30 40 3[40 40 40[{ TeXBase1Encoding ReEncodeFont }47
119.999948 /Palatino-Bold rf /Fm 133[45 50 47 75 51 55
30 38 36 51 54 49 53 80 26 50 21 26 53 50 30 43 55 40
50 45 25 2[30 1[30 1[60 1[90 65 70 55 48 60 71 55 71
75 86 55 66 30 30 75 69 50 55 70 64 55 70 3[55 1[23 23
45 45 45 45 45 45 45 45 45 45 55 23 30 23 1[35 30 30
25 70 4[25 33[{ TeXBase1Encoding ReEncodeFont }76 90.833285
/Palatino-Roman rf /Fn 134[95 3[105 57 76 67 2[95 105
4[57 105 2[86 1[76 14[114 84[{ TeXBase1Encoding ReEncodeFont }12
171.999997 /Palatino-Bold rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 600dpi
TeXDict begin
%%PaperSize: a4

%%EndSetup
%%Page: 100 1
100 0 bop -150 2255 a Fn(The)43 b(chrony)f(suite)p -150
2367 4050 34 v 2546 2466 a Fm(This)24 b(manual)e(describes)j(how)e(to)g
(use)2484 2574 y(the)f(programs)i(chronyd)f(and)g(chronyc)-150
5535 y Fl(Richard)29 b(P.)h(Curnow)p -150 5587 4050 17
v eop
%%Page: 101 2
101 1 bop -150 5761 a Fm(Copyright)311 5758 y(c)285 5761
y Fk(\015)23 b Fm(1998)h(Richard)f(P.)f(Curnow)h Fj
(richard@curnow.demon.co)q(.uk)p eop
%%Page: 1 3
1 2 bop -150 -116 a Fm(Chapter)23 b(1:)f(Introduction)3061
b(1)-150 236 y Fi(1)71 b(Introduction)-150 698 y Fl(1.1)59
b(Overview)-25 923 y Fm(Chrony)25 b(is)i(a)f(software)h(package)h(for)e
(maintaining)g(the)f(accuracy)i(of)f(computer)g(system)g(clocks.)34
b(It)26 b(consists)-150 1023 y(of)d(a)g(pair)g(of)h(programs)f(:)-75
1247 y Fk(\017)60 b Fj(chronyd)p Fm(.)38 b(This)29 b(is)f(a)f(daemon)h
(which)g(runs)f(in)g(background)h(on)f(the)g(system.)37
b(It)28 b(obtains)g(measurements)30 1347 y(\(e.g.)23
b(via)h(the)e(network\))h(of)h(the)e(system's)i(offset)g(relative)g(to)
e(other)h(systems,)h(and)f(adjusts)g(the)f(system)i(time)30
1447 y(accordingly.)i(For)e(isolated)h(systems,)g(the)e(user)g(can)g
(periodically)k(enter)c(the)g(correct)g(time)h(by)f(hand)h(\(using)30
1546 y Fj(chronyc)p Fm(\).)f(In)d(either)g(case,)h Fj(chronyd)g
Fm(determines)g(the)e(rate)g(at)g(which)h(the)f(computer)h(gains)g(or)g
(loses)h(time,)30 1646 y(and)i(compensates)h(for)f(this.)-75
1771 y Fk(\017)60 b Fj(chronyc)p Fm(.)24 b(This)f(is)g(a)f
(command-line)i(driven)e(control)h(and)f(monitoring)g(program.)h(An)g
(administrator)f(can)30 1871 y(use)27 b(this)g(to)f(fine-tune)g
(various)i(parameters)f(within)g(the)f(daemon,)j(add)e(or)g(delete)h
(servers)f(etc)g(whilst)g(the)30 1970 y(daemon)c(is)h(running.)-150
2330 y Fl(1.2)59 b(Acknowledgements)-25 2555 y Fm(The)30
b Fj(chrony)h Fm(suite)e(makes)i(use)f(of)g(the)f(algorithm)h(known)g
(as)g Fh(RSA)g(Data)f(Security,)i(Inc.)43 b(MD5)29 b(Message-)-150
2655 y(Digest)24 b(Algorithm)k Fm(for)23 b(authenticating)f(messages)j
(between)e(different)g(machines)h(on)e(the)h(network.)-25
2879 y(In)18 b(writing)h(the)g Fj(chronyd)h Fm(program,)g(extensive)g
(use)f(has)g(been)g(made)g(of)g(RFC1305,)i(written)e(by)g(David)g
(Mills.)-150 2979 y(I)30 b(have)f(occasionally)j(referred)e(to)f(the)g
Fj(xntp)h Fm(suite's)g(source)g(code)g(to)f(check)h(details)h(of)e(the)
g(protocol)h(that)e(the)-150 3079 y(RFC)e(did)h(not)e(make)h
(absolutely)h(clear.)32 b(The)26 b(core)h(algorithms)f(in)g
Fj(chronyd)h Fm(are)f(all)g(completely)i(distinct)e(from)-150
3178 y Fj(xntp)p Fm(,)d(however.)-150 3538 y Fl(1.3)59
b(Availability)-150 3864 y Fg(1.3.1)c(Getting)39 b(the)e(software)-25
4089 y Fm(Links)28 b(on)f(the)g(chrony)g(home)g(page)i(\()p
Fj(http://www.curnow.demon)q(.co)q(.uk)q(/chr)q(ony)q(/ind)q(ex.)q(htm)
q(l)p Fm(\))-150 4188 y(describe)24 b(how)f(to)g(obtain)g(the)f
(software.)-150 4514 y Fg(1.3.2)55 b(Platforms)-25 4739
y Fm(Although)32 b(most)g(of)h(the)f(program)h(is)g(portable)h(between)
f(Unix-like)h(systems,)h(there)d(are)h(parts)f(that)g(have)-150
4838 y(to)c(be)h(tailored)h(to)e(each)h(specific)i(vendor's)f(system.)
40 b(These)30 b(are)f(the)f(parts)g(that)g(interface)h(with)f(the)g
(operating)-150 4938 y(system's)j(facilities)h(for)e(adjusting)h(the)e
(system)i(clock;)j(different)d(operating)g(systems)g(may)f(provide)h
(different)-150 5038 y(function)25 b(calls)j(to)e(achieve)h(this,)f
(and)h(even)f(where)h(the)e(same)i(function)f(is)g(used)h(it)f(may)g
(have)g(different)h(quirks)-150 5137 y(in)c(its)f(behaviour.)-25
5362 y(So)g(far,)g(the)h(software)g(is)h(able)f(to)g(run)e(in)i(the)f
(following)j(environments:)-75 5587 y Fk(\017)60 b Fm(Linux/i386.)36
b(The)28 b(software)g(can)f(be)h(compiled)h(on)e(Linux)g(v2.0.x)f
(kernels.)37 b(Linux)27 b(v2.1.x)f(kernels)i(should)30
5687 y(also)35 b(present)g(no)f(problem,)j(but)c(the)h
Fj(sys_linux.c)j Fm(file)e(needs)g(modifying)h(to)e(define)h(the)f
(patchlevel)30 5786 y(\(value)24 b(of)g('x'\))g(at)f(which)g(the)g
(change)h(to)f(the)g(kernel)h(time-keeping)i(equivalent)d(to)g(that)g
(applied)i(in)f(v2.0.32)p eop
%%Page: 2 4
2 3 bop -150 -116 a Fm(Chapter)23 b(1:)f(Introduction)3061
b(2)30 236 y(was)22 b(included.)g(Until)f(I)g(find)g(out)f(which)h
(version)g(this)g(was,)h(v2.1)e(kernels)i(are)f(limited)h(to)e
(patchlevels)i(prior)30 336 y(to)h(51.)-75 458 y Fk(\017)60
b Fm(Solaris)24 b(2.5/2.5.1)e(on)h(Sparc)g(20)g(and)f(Ultrasparc.)-75
579 y Fk(\017)60 b Fm(SunOS)21 b(4.1.4)i(on)f(Sparc)h(2)g(and)g
(Sparc20.)-25 825 y(Closely)h(related)g(systems)g(may)f(work)g(too,)g
(but)f(they)g(have)h(not)f(been)h(tested.)-25 1050 y(Porting)32
b(the)f(software)j(to)e(other)g(system)h(\(particularly)h(to)e(those)h
(supporting)g(an)f Fj(adjtime)j Fm(system)e(call\))-150
1149 y(should)23 b(not)f(be)h(difficult,)h(however)f(it)g(requires)f
(access)j(to)d(such)h(systems)h(to)e(test)g(out)h(the)f(driver.)-150
1500 y Fl(1.4)59 b(Relationship)40 b(to)g(other)f(software)g(packages)
-150 1818 y Fg(1.4.1)55 b(xntpd)-25 2043 y Fm(The)23
b(`reference')h(implementation)f(of)h(the)e(Network)i(Time)g(Protocol)f
(is)h(the)e(program)h Fj(xntpd)p Fm(,)h(available)h(via)-150
2142 y(The)e(NTP)g(home)g(page)h(\()p Fj(http://www.eecis.udel.)q(edu/)
q(~nt)q(p)p Fm(\).)-25 2366 y Fj(xntpd)e Fm(is)f(designed)i(to)e
(support)g(all)h(the)f(operating)g(modes)i(defined)f(by)f(RFC1305,)i
(and)e(has)g(driver)h(support)-150 2466 y(for)35 b(a)h(large)g(number)e
(of)h(reference)h(clocks)h(\(such)e(as)h(GPS)e(receivers\))j(that)d
(can)h(be)g(connected)h(directly)g(to)f(a)-150 2566 y(computer,)22
b(thereby)h(providing)h(a)f(so-called)i('stratum)d(1')h(server.)-25
2790 y(Things)g Fj(chronyd)i Fm(can)d(do)i(that)d Fj(xntpd)j
Fm(can't:)-75 3014 y Fk(\017)60 b Fj(chronyd)14 b Fm(can)g(perform)g
(usefully)g(in)g(an)g(environment)g(where)g(access)g(to)g(the)g(time)g
(reference)g(is)g(intermittent.)30 3114 y Fj(chronyd)25
b Fm(estimates)g Fh(both)32 b Fm(the)23 b(current)f(time)i(offset)g
Fh(and)31 b Fm(the)23 b(rate)g(at)g(which)h(the)f(computer's)g(clock)i
(gains)30 3213 y(or)19 b(loses)i(time,)e(and)g(can)g(use)g(that)f(rate)
g(estimate)i(to)e(trim)h(the)f(clock)i(after)f(the)f(reference)i
(disappears.)k Fj(xntpd)30 3313 y Fm(corrects)j(any)g(time)g(offset)h
(by)f(speeding)i(up)d(and)h(slowing)i(down)f(the)e(computer)h(clock,)i
(and)e(so)g(could)h(be)30 3412 y(left)21 b(with)f(a)h(significant)h
(rate)e(error)h(if)g(the)f(reference)i(disappears)h(whilst)e(it)f(is)i
(trying)e(to)h(correct)f(a)h(big)g(offset.)-75 3534 y
Fk(\017)60 b Fj(chronyd)36 b Fm(provides)g(support)e(for)h(isolated)g
(networks)g(whether)f(the)f(only)i(method)f(of)g(time)g(correction)30
3634 y(is)e(manual)f(entry)f(\(e.g.)48 b(by)31 b(the)g(administrator)g
(looking)i(at)e(a)g(clock\).)49 b Fj(chronyd)33 b Fm(can)e(look)h(at)f
(the)g(errors)30 3733 y(corrected)22 b(at)g(different)g(updates)h(to)e
(work)i(out)e(the)g(rate)h(at)f(which)h(the)f(computer)h(gains)h(or)f
(loses)h(time,)f(and)30 3833 y(use)h(this)f(estimate)i(to)e(trim)g(the)
g(computer)h(clock)h(subsequently.)-75 3955 y Fk(\017)60
b Fj(chronyd)26 b Fm(provides)g(support)f(to)f(work)h(out)f(the)f(gain)
i(or)f(loss)i(rate)e(of)g(the)g(`real-time)h(clock',)h(i.e.)h(the)d
(clock)30 4054 y(that)29 b(maintains)h(the)f(time)h(when)g(the)f
(computer)h(is)h(turned)e(off.)44 b(It)30 b(can)g(use)g(this)g(data)g
(when)g(the)f(system)30 4154 y(boots)24 b(to)f(set)h(the)f(system)h
(time)f(from)h(a)g(corrected)g(version)g(of)g(the)f(real-time)h(clock.)
i(These)e(real-time)h(clock)30 4254 y(facilities)g(are)e(only)g
(available)i(on)e(certain)f(releases)j(of)e(Linux,)f(so)h(far.)-75
4375 y Fk(\017)60 b Fm(The)27 b Fj(xntpd)h Fm(program)g(is)f(supported)
h(by)f(other)g(programs)g(to)g(carry)g(out)f(certain)h(functions.)34
b Fj(ntpdate)29 b Fm(is)30 4475 y(used)e(to)f(provide)i(an)e(initial)h
(correction)g(to)f(the)g(system)h(clock)h(based)g(on)e(a)h(`one-shot')g
(sampling)g(of)g(other)30 4574 y(NTP)34 b(servers.)56
b Fj(tickadj)35 b Fm(is)f(used)g(to)g(adjust)f(certain)h(operating)g
(system)h(parameters)f(to)f(make)i Fj(xntpd)30 4674 y
Fm(work)24 b(better.)d(All)j(this)e(functionality)h(is)h(integrated)f
(into)f Fj(chronyd)p Fm(.)-25 4920 y(Things)h Fj(xntpd)h
Fm(can)f(do)g(that)f Fj(chronyd)i Fm(can't:)-75 5144
y Fk(\017)60 b Fj(xntpd)38 b Fm(supports)g(a)f(range)h(of)f(different)h
(hardware)f(reference)h(clocks)h(\(GPS,)d(atomic)i(etc\))f(that)f(can)h
(be)30 5244 y(connected)32 b(to)f(a)h(computer)f(to)g(provide)i(a)f
(`stratum-1')e(server.)49 b Fj(chronyd)34 b Fm(does)e(not)f(support)h
(any)f(such)30 5344 y(hardware)f Fh(yet)9 b Fm(;)32 b(I)e(don't)f(have)
g(access)i(to)e(any)h(to)f(do)h(any)f(development)i(work.)43
b(However,)32 b(the)d(software)30 5443 y(architecture)22
b(should)h(allow)i(such)d(equipment)g(to)h(be)g(interfaced)g(at)g(a)g
(later)f(date.)-75 5565 y Fk(\017)60 b Fj(xntpd)25 b
Fm(supports)g(effectively)h(all)e(of)h(RFC1305,)g(including)g
(broadcast)g(/)e(multicast)h(clients,)h(leap)g(seconds,)30
5665 y(and)e(extra)f(encryption)h(schemes)h(for)f(authenticating)f
(data)g(packets.)-75 5786 y Fk(\017)60 b Fj(xntpd)24
b Fm(has)f(been)g(ported)g(to)g(more)g(types)g(of)h(computer)e(/)h
(operating)g(system)h(\(so)f(far\).)p eop
%%Page: 3 5
3 4 bop -150 -116 a Fm(Chapter)23 b(1:)f(Introduction)3061
b(3)-75 236 y Fk(\017)60 b Fm(xntpd)35 b(is)i(designed)h(to)e(work)g
(solely)i(with)e(integer)g(arithmetic)g(\(i.e.)62 b(does)38
b(not)d(require)h(floating)h(point)30 336 y(support)23
b(from)g(its)g(host\).)-150 689 y Fg(1.4.2)55 b(timed)-25
923 y Fj(timed)34 b Fm(is)g(a)f(program)g(that)f(is)i(part)f(of)g(the)f
(BSD)h(networking)h(suite.)53 b(It)33 b(uses)h(broadcast)g(packets)g
(to)f(find)-150 1023 y(all)e(machines)g(running)f(the)g(daemon)h
(within)f(a)h(subnet.)45 b(The)31 b(machines)g(elect)g(a)g(master)f
(which)h(periodically)-150 1122 y(measures)h(the)f(system)h(clock)h
(offsets)g(of)f(the)e(other)h(computers)h(using)g(ICMP)f(timestamps.)49
b(Corrections)33 b(are)-150 1222 y(sent)23 b(to)f(each)h(member)g(as)g
(a)g(result)g(of)g(this)f(process.)-25 1456 y(Problems)h(that)f(may)h
(arise)g(with)g Fj(timed)h Fm(are)f(:)-75 1690 y Fk(\017)60
b Fm(Because)33 b(it)e(uses)h(broadcasts,)j(it)c(is)h(not)f(possible)j
(to)d(isolate)i(its)f(functionality)f(to)g(a)h(particular)g(group)f(of)
30 1790 y(computers;)24 b(there)f(is)h(a)g(risk)h(of)f(upsetting)f
(other)g(computers)h(on)g(the)f(same)h(network)g(\(e.g.)i(where)e(a)g
(whole)30 1889 y(company)d(is)g(on)f(the)f(same)i(subnet)f(but)f
(different)i(departments)f(are)g(independent)h(from)f(the)g(point)g(of)
h(view)30 1989 y(of)i(administering)h(their)e(computers.\))-75
2123 y Fk(\017)60 b Fm(The)26 b(update)f(period)i(appears)g(to)e(be)g
(10)h(minutes.)k(Computers)25 b(can)g(build)h(up)f(significant)i
(offsets)f(relative)30 2223 y(to)c(each)h(other)g(in)f(that)g(time.)g
(If)h(a)g(computer)f(can)h(estimate)g(its)g(rate)f(of)h(drift)g(it)f
(can)h(keep)h(itself)f(closer)h(to)e(the)30 2322 y(other)f(computers)g
(between)g(updates)h(by)f(adjusting)h(its)f(clock)h(every)g(few)g
(seconds.)h Fj(timed)f Fm(does)h(not)d(seem)30 2422 y(to)j(do)g(this.)
-75 2556 y Fk(\017)60 b Fj(timed)38 b Fm(does)f(not)f(have)g(any)h
(integrated)f(capability)i(for)f(feeding)g(real-time)g(into)f(its)g
(estimates,)k(or)d(for)30 2656 y(estimating)26 b(the)f(average)i(rate)e
(of)h(time)g(loss/gain)h(of)f(the)f(machines)h(relative)h(to)e
(real-time)h(\(unless)h(one)e(of)30 2756 y(the)31 b(computers)h(in)f
(the)g(group)h(has)f(access)i(to)f(an)f(external)g(reference)i(and)e
(is)h(always)i(appointed)e(as)g(the)30 2855 y(`master'\).)-25
3124 y Fj(timed)k Fm(does)h(have)e(the)g(benefit)h(over)f
Fj(chronyd)j Fm(that)c(for)h(isolated)i(networks)f(of)g(computers,)j
(they)c(will)-150 3224 y(track)26 b(the)f(`majority)h(vote')g(time.)31
b(For)26 b(such)f(isolated)j(networks,)e Fj(chronyd)i
Fm(requires)e(one)g(computer)f(to)h(be)f(the)-150 3323
y(`master')31 b(with)f(the)g(others)g(slaved)i(to)f(it.)45
b(If)31 b(the)f(master)g(has)h(a)g(particular)f(defective)i(clock,)h
(the)d(whole)i(set)e(of)-150 3423 y(computers)23 b(will)h(tend)f(to)f
(slip)i(relative)g(to)e(real)i(time)e(\(but)g(they)h
Fh(will)33 b Fm(stay)23 b(accurate)g(relative)g(to)g(one)g(another\).)
-150 3819 y Fl(1.5)59 b(Distribution)39 b(rights)g(and)h(\(lack)g(of\))
f(warranty)-150 4053 y Ff(This)22 b(is)f(the)g(licence)h(for)f(the)h
(programs)h Fj(")p Ff(chronyd)p Fj(")g Ff(and)e Fj(")p
Ff(chronyc)p Fj(")p Ff(.)27 b(Their)21 b(source)h(code)g(files)g(which)
g(reference)-150 4153 y(this)39 b(licence,)k(object)c(files)g(/)f
(programs)i(\(binary)f(form\))g(built)g(from)g(such)g(source)h(code,)i
(and)d(the)f(supporting)-150 4253 y(documentation)29
b(are)d(collectively)h(referred)g(to)f(in)f(this)h(licence)h(as)f
Fj(")p Ff(the)g(Software)p Fj(")p Ff(.)-150 4486 y(Certain)f(source)g
(code)g(files)g(required)g(for)f(the)g(construction)j(of)d(the)g
(Software)i(may)e(be)h(included)g(under)g(different)-150
4586 y(licensing)h(arrangements;)i(you)d(should)h(refer)f(to)f(such)i
(source)f(code)h(files)f(directly)g(for)g(further)h(information.)h(Any)
-150 4686 y(such)f(files)g(are)g(outside)h(the)f(scope)h(of)e(this)h
(licence.)-150 4920 y(Person\(s\))37 b(and/or)g(organisation\(s\))h
(holding)f(the)e(copyright)j(to)d(any)h(part)g(of)f(the)h(source)g
(code)h(to)e(which)h(this)-150 5019 y(licence)27 b(applies)g(are)f
(referred)h(to)e(in)h(this)g(licence)g(as)g Fj(")p Ff(the)g(Copyright)i
(Holder\(s\))p Fj(")p Ff(.)-150 5253 y(Copying)41 b(and)f(use)f(of)h
(this)f(licence)i(itself,)i(with)d(or)f(without)i(modification,)k(are)
40 b(permitted)h(for)e(any)h(purpose)-150 5353 y(subject)27
b(only)f(to)g(condition)h(6)e(below.)-150 5587 y(Copying,)57
b(use)50 b(and)f(redistribution)j(of)d(the)h(Software)h(in)e(source)i
(and/or)f(binary)g(forms,)56 b(with)50 b(or)f(without)-150
5687 y(modification,)27 b(and)d(use)g(of)g(any)g(part)h(of)f(the)g
(Software)h(in)f(the)g(creation)i(of)d(another)j(work,)f(are)f
(permitted)h(without)-150 5786 y(fee)h(subject)h(to)e(the)h(following)i
(conditions)f(1)f(through)h(8)e(and)h(the)g(disclaimer)h(below)g(:)p
eop
%%Page: 4 6
4 5 bop -150 -116 a Fm(Chapter)23 b(1:)f(Introduction)3061
b(4)-105 236 y Ff(1.)60 b(Redistributions)33 b(of)e(the)f(Software)i
(as)f(source)g(code,)h(in)f(whole)g(or)f(in)g(part,)i(with)f(or)g
(without)g(modification,)30 336 y(must)23 b(retain)h(all)e(existing)i
(copyright)g(notices)g(and)f(references)h(to)f(this)g(licence,)h(and)f
(must)g(be)g(accompanied)30 435 y(by)d(a)f(copy)h(of)g(this)g(licence.)
25 b(You)20 b(may)g(rename)h(the)f(file)g(containing)h(this)f(licence)h
(and)f(change)h(all)f(references)30 535 y(to)30 b(it)g(accordingly)j
(if)d(you)g(need)h(to.)40 b(Such)31 b(redistributions)i(must)e(be)f
(under)h(terms)g(that)g(require)h(this)e(list)h(of)30
635 y(conditions)d(and)e(the)g(disclaimer)h(below)g(to)e(be)h(carried)h
(on)e(any)h(subsequent)i(redistribution.)-105 757 y(2.)60
b(Redistributions)47 b(in)d(binary)h(form)g(\(of)f(the)h(original)g
(version)g(of)g(the)f(Software,)51 b(a)44 b(modified)h(version)h(of)30
857 y(the)c(Software,)47 b(or)42 b(any)g(other)h(work)f(which)g
(incorporates)j(any)d(part)g(of)f(the)h(Software\),)48
b(must)42 b(carry)h(in)30 956 y(accompanying)e(documentation)g(and/or)e
(other)g(materials)g(a)f(notice)h(to)f(the)h(effect)f(of)g(either)h
(\(A\))f(or)g(\(B\))30 1056 y(below.)64 1179 y(A.)61
b(This)27 b(original)g(version)h(of)e(this)h(software)h(was)f(written)g
(by)g Fj(<)p Ff(name\(s\))h(of)e(Copyright)j(Holder\(s\))p
Fj(>)f Ff(and)f(is)210 1278 y(used)f(subject)h(to)f(the)g(disclaimer)h
(in)f(the)g(file)f Fj(<)p Ff(name)i(of)f(file)g(containing)h(the)f
(disclaimer)p Fj(>)p Ff(.)64 1401 y(B.)61 b(The)26 b(parts)h(of)f(this)
h(software)g(which)g Fj(<)p Ff(describe)h(their)e(role)h(in)f(your)g
(software)p Fj(>)i Ff(were)f(originally)g(written)210
1500 y(by)d Fj(<)p Ff(name\(s\))i(of)e(Copyright)i(Holder\(s\))p
Fj(>)g Ff(and)e(are)h(used)f(subject)i(to)e(the)g(disclaimer)i(in)e
(the)g(file)g Fj(<)p Ff(name)210 1600 y(of)i(file)f(containing)j(the)e
(disclaimer)p Fj(>)p Ff(.)30 1745 y(\(You)g(must)h(replace)f(each)h
Fj(<)p Ff(...)p Fj(>)f Ff(with)g(the)g(appropriate)i(information.\))30
1868 y(A)g(copy)h(of)g(the)g(disclaimer)h(below)f(must)g(also)g(be)g
(included.)35 b(Such)30 b(redistributions)h(must)e(be)f(under)i(terms)
30 1967 y(that)21 b(require)g(the)g(relevant)h(notice)f(\(A\))g(or)f
(\(B\))h(and)g(the)g(disclaimer)h(below)f(to)g(be)f(carried)i(on)e(any)
h(subsequent)30 2067 y(redistribution.)30 2189 y(As)34
b(an)g(exception,)k(if)c(all)g(recipients)h(of)f(your)h(distribution)h
(receive)f(additional)g(rights)g(under)g(condition)h(5,)30
2289 y(and)24 b(those)g(rights)g(supersede)i(the)d(disclaimer)j(in)d
(its)g(entirety,)j(then)e(you)f(need)i(not)e(include)i(the)f
(disclaimer,)30 2389 y(any)i(reference)h(to)f(it,)g(or)f(the)h
(requirement)i(for)e(further)h(redistributions)h(to)e(carry)g(it.)-105
2511 y(3.)60 b(Unless)34 b(modifications)i(to)e(the)f(original)i
(Software)g(are)e(retained)i(for)f(the)f(exclusive)i(personal)g(use)f
(of)f(the)30 2611 y(modifier,)22 b(each)f(source)f(code)h(file)f(that)g
(has)g(been)g(modified)h(must)g(identify)g(the)f(original)g(source)h
(version)g(and)30 2710 y(carry)29 b(a)g(notice)g(describing)i(the)e
(nature)h(and)f(purpose)h(of)f(all)f(modifications)j(and)f(the)e
(person)i(responsible)30 2810 y(for)36 b(them.)56 b(Where)36
b(modified)h(source)g(code)f(is)g(widely)g(redistributed)i(\(e.g.)56
b(outside)37 b(the)f(modifier's)h(own)30 2910 y(organisation\),)29
b(it)e(should)g(preferably)i(be)d(supplied)i(as)f(the)g(original)g
(version)h(plus)f(`patches')h(which)f(can)g(be)30 3009
y(applied)g(to)f(the)f(original)i(version)g(to)f(obtain)g(the)g
(modified)h(version.)-105 3132 y(4.)60 b(If)36 b(a)h(modified)h
(version)g(of)e(the)h(Software)i(is)d(distributed)j(in)d(any)h(form,)j
(it)d(must)g(not)g(be)f(misrepresented)30 3231 y(\(whether)23
b(by)f(the)f(method)i(of)f(distribution)h(or)f(by)f(any)h(related)h
(advertisement)h(or)d(documentation\))k(as)d(being)30
3331 y(the)29 b(original)g(version.)36 b(Both)29 b(the)g(documentation)
j(accompanying)f(the)e(software)h(and)f(any)g(advertisement)30
3430 y(related)23 b(to)f(the)g(distribution)i(must)e(expressly)h(state)
g(that)f(the)g(distributed)i(software)f(is)f(not)g(the)g(original)h
(work,)30 3530 y(and)k(must)h(identify)g(both)g(the)f(original)h(work)g
(\(by)f(name)g(and)h(version\))g(and)g(the)f(nature)h(and)f(purpose)i
(of)e(all)30 3630 y(modifications)h(made.)-105 3752 y(5.)60
b(You)23 b(may)g(offer)g(to)g(any)g(party)g(\(and)g(charge)h(a)f(fee)f
(for\))h(additional)i(warranty,)g(liability)e(rights)h(and/or)f
(support)30 3852 y(for)42 b(the)g(Software)h(\(or)f(a)f(work)h(derived)
h(from)f(it\).)74 b(Any)42 b(such)h(offer)f(made)g(must)h(be)e
(entirely)i(on)f(your)30 3951 y(own)28 b(behalf,)h(and)f(you)g(must)g
(indemnify)i(the)e(Copyright)h(Holder\(s\))g(and)f(all)g(other)g
(parties)h(through)f(whose)30 4051 y(redistributions)g(you)e(have)h
(received)g(the)f(Software)h(for)f(any)g(liability)h(arising)f(out)g
(of)g(such)g(an)g(offer.)-105 4174 y(6.)60 b(This)31
b(list)g(of)g(conditions)h(and)g(the)f(disclaimer)h(below,)h(when)f
(applied)g(either)f(to)g(the)g(Software)h(as)f(a)g(whole)30
4273 y(or)k(to)h(any)g(part)f(of)h(the)g(Software,)j(may)d(only)g(be)f
(modified)i(by)f(or)f(with)h(the)g(express)g(permission)i(of)d(the)30
4373 y(Copyright)27 b(Holder\(s\).)-105 4495 y(7.)60
b(The)30 b(Copyright)i(Holder\(s\))f(retain)f(all)g(rights)h(to)e(the)h
(Software,)j(including)e(without)g(limitation)g(the)f(rights)h(to)30
4595 y(use)e(the)g(Software)h(for)f(any)g(purpose,)i(to)d(create)i
(modified)g(and/or)g(enhanced)g(versions)g(of)f(the)g(Software,)30
4694 y(and)d(to)g(distibute)h(such)f(versions)h(under)g(terms)f
(different)h(to)f(those)g(in)g(this)g(licence.)-105 4817
y(8.)60 b(Except)35 b(as)f(required)h(by)f(this)g(licence,)j(the)e
(name\(s\))g(of)f(the)g(Copyright)h(Holder\(s\))h(may)e(not)g(be)g
(used)h(to)30 4917 y(endorse)24 b(or)e(promote)h(products)h(derived)f
(from)g(the)f(Software)i(without)f(their)f(express)i(permission)g
(obtained)30 5016 y(in)i(advance.)-150 5263 y(==)f(Start)h(of)g
(disclaimer)h(==)-150 5487 y(BECAUSE)52 b(THE)e(SOFTWARE)i(IS)d
(PROVIDED)j(FREE)f(OF)e(CHARGE,)j(THERE)f(IS)e(NO)h(WARRANTY)-150
5587 y(FOR)33 b(IT,)g(TO)g(THE)g(MAXIMUM)i(EXTENT)f(THAT)f(APPLICABLE)j
(LAW)d(ALLOWS.)i(UNLESS)f(OTHERWISE)-150 5687 y(STATED)51
b(IN)e(WRITING)h(OR)f(REQUIRED)j(BY)d(APPLICABLE)j(LAW,)d(THE)h
(COPYRIGHT)h(HOLDER\(S\))-150 5786 y(AND/OR)24 b(OTHER)f(PARTIES)h
(PROVIDE)g(THE)f(SOFTWARE)h(`AS)f(IS')f(AND)h(DISCLAIM)h(ALL)f
(WARRANTIES,)p eop
%%Page: 5 7
5 6 bop -150 -116 a Fm(Chapter)23 b(1:)f(Introduction)3061
b(5)-150 236 y Ff(EITHER)23 b(EXPRESSED)i(OR)d(IMPLIED,)i(INCLUDING)g
(WITHOUT)g(LIMITATION)g(WARRANTIES)h(THAT)e(THE)-150
336 y(SOFTWARE)33 b(IS)d(FREE)h(OF)g(DEFECTS,)i(MERCHANTABLE)h(OR)c
(FIT)h(FOR)g(A)f(PARTICULAR)j(PURPOSE.)-150 435 y(THE)18
b(USER)g(BEARS)h(THE)e(ENTIRE)i(RISK)f(AS)g(TO)f(THE)h(QUALITY,)h
(ACCURACY)h(AND)e(PERFORMANCE)i(OF)-150 535 y(THE)25
b(SOFTWARE)h(AND)e(THE)h(COST)g(OF)f(ANY)h(NECESSARY)h(SERVICING,)h
(REPAIR)e(OR)g(CORRECTION)-150 635 y(IN)h(THE)g(EVENT)h(THAT)f(THE)g
(SOFTWARE)i(SHOULD)f(PROVE)g(DEFECTIVE.)-150 859 y(IN)21
b(NO)g(EVENT)i(UNLESS)g(REQUIRED)g(BY)e(APPLICABLE)j(LAW)e(OR)f(AGREED)
i(TO)e(IN)g(WRITING)i(WILL)f(ANY)-150 959 y(COPYRIGHT)41
b(HOLDER,)g(OR)e(ANY)h(OTHER)g(PARTY)g(WHO)g(MAY)g(MODIFY)g(AND/OR)g
(REDISTRIBUTE)-150 1058 y(THE)h(SOFTWARE,)i(BE)e(LIABLE)h(TO)e(YOU)i
(OR)e(TO)h(ANY)g(OTHER)h(PARTY)g(FOR)f(DAMAGES)h(OF)f(ANY)-150
1158 y(CHARACTER,)h(INCLUDING)f(WITHOUT)g(LIMITATION)h(ANY)d(GENERAL,)j
(SPECIAL,)f(INCIDENTAL)g(OR)-150 1257 y(CONSEQUENTIAL)f(DAMAGES)f
(WHICH)e(ARISE)g(FROM)h(THE)e(USE)h(OF)g(OR)f(INABILITY)j(TO)d(USE)h
(THE)-150 1357 y(SOFTWARE)c(\(INCLUDING)h(WITHOUT)e(LIMITATION)h(LOSS)f
(OF)f(DATA)h(OR)f(DATA)h(BEING)g(RENDERED)-150 1457 y(INACCURATE)37
b(OR)e(LOSSES)i(SUSTAINED)g(BY)e(YOU)g(OR)g(THIRD)h(PARTIES)g(OR)f(A)g
(FAILURE)h(OF)f(THE)-150 1556 y(SOFTWARE)19 b(TO)e(OPERATE)i(WITH)e
(ANY)g(OTHER)h(SOFTWARE\),)i(EVEN)d(IF)g(SUCH)h(COPYRIGHT)h(HOLDER)-150
1656 y(OR)26 b(OTHER)h(PARTY)g(HAS)f(BEEN)g(ADVISED)i(OF)e(THE)g
(POSSIBILITY)i(OF)e(SUCH)h(DAMAGES.)-150 1880 y(==)e(End)h(of)g
(disclaimer)h(==)p eop
%%Page: 6 8
6 7 bop -150 -116 a Fm(Chapter)23 b(2:)f(Installation)3116
b(6)-150 236 y Fi(2)71 b(Installation)-25 560 y Fm(The)25
b(software)i(is)f(distributed)g(as)g(source)g(code)g(which)g(has)g(to)f
(be)h(compiled.)32 b(The)26 b(source)g(code)h(is)f(supplied)-150
660 y(in)c(the)g(form)h(of)f(a)h(gzipped)i(tar)c(file,)i(which)g
(unpacks)g(to)f(a)h(subdirectory)g(identifying)g(the)f(name)h(and)f
(version)h(of)-150 759 y(the)f(program.)-25 983 y(After)g(unpacking)i
(the)e(source)h(code,)g(change)g(directory)h(into)f(it,)f(and)g(type)90
1212 y Fj(./configure)-25 1436 y Fm(This)36 b(is)g(a)g(shell)h(script)f
(that)f(automatically)i(determines)f(the)g(system)g(type.)62
b(There)36 b(is)h(a)f(single)h(optional)-150 1536 y(parameter,)26
b Fj(--prefix)i Fm(which)e(indicates)h(the)e(directory)h(tree)f(where)i
(the)e(software)h(should)g(be)g(installed.)33 b(For)-150
1635 y(example,)90 1863 y Fj(./configure)58 b(--prefix=/opt/free)-25
2088 y Fm(will)45 b(install)g(the)e Fj(chronyd)j Fm(daemon)f(into)f
(/opt/free/sbin)h(and)f(the)f(chronyc)h(control)g(program)h(into)-150
2187 y(/opt/free/bin.)23 b(The)g(default)g(value)g(for)g(the)f(prefix)h
(is)h(/usr/local.)-25 2411 y(If)k(the)f(software)h(cannot)f(\(yet\))h
(be)g(built)f(on)h(your)f(system,)i(an)f(error)f(message)i(will)g(be)f
(shown.)37 b(Otherwise,)-150 2511 y(the)22 b(files)i(`)p
Fj(options.h)p Fm(')i(and)d(`)p Fj(Makefile)p Fm(')i(will)f(be)f
(generated.)-25 2735 y(Now)g(type)90 2963 y Fj(make)-25
3188 y Fm(to)f(build)h(the)f(programs.)-25 3412 y(Once)39
b(the)g(programs)i(have)f(been)f(successfully)j(compiled,)j(they)40
b(need)g(to)f(be)h(installed)h(in)e(their)g(target)-150
3511 y(locations.)56 b(This)34 b(step)h(normally)f(needs)g(to)g(be)g
(performed)g(by)g(the)f(superuser,)j(and)e(requires)g(the)f(following)
-150 3611 y(command)23 b(to)g(be)g(entered.)90 3839 y
Fj(make)55 b(install)-25 4064 y Fm(Now)39 b(that)f(the)g(software)h(is)
h(successfully)g(installed,)k(the)38 b(next)f(step)j(is)f(to)f(set)h
(up)f(a)h(configuration)g(file.)-150 4163 y(The)32 b(contents)e(of)i
(this)f(depend)h(on)g(the)e(network)i(environment)e(in)i(which)f(the)g
(computer)g(operates.)49 b(Typical)-150 4263 y(scenarios)24
b(are)f(described)i(in)d(the)h(following)i(section)e(of)g(the)f
(document.)p eop
%%Page: 7 9
7 8 bop -150 -116 a Fm(Chapter)23 b(3:)f(Typical)j(operating)f
(scenarios)2468 b(7)-150 236 y Fi(3)71 b(Typical)46 b(operating)g
(scenarios)-150 749 y Fl(3.1)59 b(Computers)40 b(connected)g(to)h(the)e
(internet)-25 981 y Fm(In)20 b(this)g(section)h(we)g(discuss)h(how)f
(to)f(configure)h(chrony)f(for)h(computers)f(that)g(have)g(permanent)g
(connections)-150 1080 y(to)g(the)f(internet)g(\(or)h(to)g(any)g
(network)h(containing)f(true)f(NTP)h(servers)h(which)f(ultimately)g
(derive)h(their)f(time)g(from)-150 1180 y(a)j(reference)g(clock\).)-25
1411 y(To)f(operate)g(in)f(this)g(mode,)i(you)e(will)i(need)f(to)f
(know)h(the)f(names)h(of)g(the)f(NTP)g(server)h(machines)g(you)g(wish)g
(to)-150 1511 y(use.)h(You)f(may)i(be)f(able)g(to)g(find)g(names)g(of)g
(suitable)g(servers)h(by)f(one)g(of)g(the)f(following)k(methods:)-75
1742 y Fk(\017)60 b Fm(Your)25 b(institution)f(may)i(already)g(operate)
h(servers)f(on)f(its)g(network.)30 b(Contact)25 b(your)g(system)h
(administrator)30 1842 y(to)d(find)g(out.)-75 1973 y
Fk(\017)60 b Fm(Your)23 b(ISP)f(probably)i(has)f(one)g(or)g(more)g(NTP)
g(servers)h(available)g(for)f(its)g(customers.)-75 2105
y Fk(\017)60 b Fm(Somewhere)31 b(under)f(the)g(NTP)g(homepage)i(there)e
(is)h(a)f(list)h(of)g(public)g(stratum)e(1)h(and)h(stratum)e(2)h
(servers.)30 2204 y(You)24 b(should)h(find)g(one)f(or)g(more)h(servers)
g(that)e(are)h(near)g(to)g(you)g(---)h(check)g(that)d(their)i(access)i
(policy)g(allows)30 2304 y(you)d(to)f(use)h(their)g(facilities.)-25
2567 y(Assuming)f(that)e(you)h(have)h(found)f(some)i(servers,)f(you)g
(need)f(to)h(set)f(up)g(a)h(configuration)g(file)g(to)f(run)f(chrony.)
-150 2667 y(The)37 b(\(compiled-in\))h(default)f(location)g(for)g(this)
f(file)h(is)g(`)p Fj(/etc/chrony.conf)p Fm('.)68 b(Assuming)37
b(that)e(your)h(ntp)-150 2767 y(servers)24 b(are)f(called)h
Fj(a.b.c)g Fm(and)f Fj(d.e.f)p Fm(,)h(your)e(`)p Fj(chrony.conf)p
Fm(')27 b(file)c(could)h(contain)e(as)i(a)e(minimum)90
3002 y Fj(server)56 b(a.b.c)90 3106 y(server)g(d.e.f)90
3209 y(server)g(g.h.i)-25 3441 y Fm(However,)39 b(you)d(will)g
(probably)h(want)e(to)g(include)h(some)g(of)f(the)g(other)g(directives)
i(described)g(later.)60 b(The)-150 3540 y(following)30
b(directives)g(will)g(be)e(particularly)h(useful)g(:)k
Fj(driftfile)p Fm(,)e Fj(commandkey)p Fm(,)h Fj(keyfile)p
Fm(.)41 b(The)29 b(smallest)-150 3640 y(useful)23 b(configuration)g
(file)h(would)g(look)g(something)f(like)90 3875 y Fj(server)56
b(a.b.c)90 3979 y(server)g(d.e.f)90 4083 y(server)g(g.h.i)90
4187 y(keyfile)g(/etc/chrony.keys)90 4290 y(commandkey)h(1)90
4394 y(driftfile)g(/etc/chrony.drift)-150 4780 y Fl(3.2)i(Infrequent)38
b(connection)j(to)f(true)f(NTP)g(servers)-25 5011 y Fm(In)22
b(this)f(section)i(we)g(discuss)g(how)g(to)f(configure)g(chrony)g(for)g
(computers)h(that)e(have)h(occasional)i(connections)-150
5110 y(to)f(the)f(internet.)-150 5455 y Fg(3.2.1)55 b(Setting)39
b(up)d(the)h(configuration)j(file)d(for)g(infrequent)i(connections)-25
5687 y Fm(As)24 b(in)g(the)f(previous)i(section,)g(you)f(will)h(need)f
(access)i(to)e(NTP)g(servers)g(on)g(the)g(internet.)g(The)h(same)f
(remarks)-150 5786 y(apply)g(for)f(how)g(to)g(find)g(them.)p
eop
%%Page: 8 10
8 9 bop -150 -116 a Fm(Chapter)23 b(3:)f(Typical)j(operating)f
(scenarios)2468 b(8)-25 236 y(In)25 b(this)h(case,)h(you)g(will)g(need)
f(some)h(additional)h(configuration)e(to)g(tell)g Fj(chronyd)i
Fm(when)e(the)f(connection)h(to)-150 336 y(the)g(internet)g(goes)i(up)f
(and)g(down.)35 b(This)28 b(saves)g(the)e(program)h(from)g
(continuously)g(trying)g(to)g(poll)h(the)e(servers)-150
435 y(when)d(they)f(are)h(inaccessible.)-25 667 y(Again,)38
b(assuming)e(that)d(your)i(ntp)g(servers)h(are)f(called)h
Fj(a.b.c)h Fm(and)e Fj(d.e.f)p Fm(,)k(your)34 b(`)p Fj(chrony.conf)p
Fm(')39 b(file)-150 766 y(would)24 b(need)f(to)g(contain)f(something)h
(like)90 1002 y Fj(server)56 b(a.b.c)90 1105 y(server)g(d.e.f)90
1209 y(server)g(g.h.i)-25 1440 y Fm(However,)24 b(the)e(following)j
(issues)f(need)f(to)f(be)h(addressed:)-98 1671 y(1.)60
b(Your)25 b(computer)h(probably)h(doesn't)f(have)g(DNS)f(access)i
(whilst)f(offline)g(to)g(turn)e(the)g(machine)i(names)g(into)30
1771 y(IP)d(addresses.)-98 1903 y(2.)60 b(Your)21 b(computer)g(will)h
(keep)g(trying)f(to)g(contact)g(the)f(servers)i(to)f(obtain)g
(timestamps,)g(even)h(whilst)f(offline.)i(If)30 2002
y(you)f(operate)g(a)g(dial-on-demand)i(system,)e(things)f(are)h(even)g
(worse,)g(because)h(the)e(link)h(to)f(the)g(internet)g(will)30
2102 y(keep)j(getting)f(established.)-25 2365 y(For)30
b(this)g(reason,)i(it)e(would)h(be)f(better)g(to)f(specify)j(this)e
(part)g(of)h(your)f(configuration)g(file)h(in)f(the)g(following)-150
2465 y(way:)90 2700 y Fj(server)56 b(1.2.3.4)g(offline)90
2804 y(server)g(5.6.7.8)g(offline)90 2907 y(server)g(9.10.11.12)h
(offline)-25 3139 y Fm(Because)41 b(numeric)f(IP)g(addresses)j(have)d
(been)h(used,)k(the)39 b(first)i(problem)g(is)g(overcome.)76
b(The)41 b Fj(offline)-150 3238 y Fm(keyword)24 b(indicates)g(that)d
(the)h(servers)h(start)f(in)g(an)h(offline)g(state,)f(and)h(that)e
(they)h(should)h(not)f(be)h(contacted)g(until)-150 3338
y Fj(chronyd)i Fm(receives)f(notification)f(that)f(the)g(link)h(to)g
(the)f(internet)g(is)h(present.)-25 3569 y(In)h(order)h(to)g(notify)g
Fj(chronyd)i Fm(of)e(the)f(presence)i(of)f(the)f(link,)i(you)f(will)h
(need)f(to)g(be)g(able)g(to)g(log)g(in)g(to)g(it)f(with)-150
3669 y(the)i(program)h(chronyc.)35 b(To)27 b(do)h(this,)f
Fj(chronyd)h Fm(needs)g(to)f(be)g(configured)g(with)g(an)f
(administrator)h(password.)-150 3768 y(To)e(set)f(up)g(an)g
(administrator)g(password,)i(you)e(can)g(create)g(a)g(file)h(`)p
Fj(/etc/chrony.keys)p Fm(')k(containing)c(a)f(single)-150
3868 y(line)90 4103 y Fj(1)55 b(xyzzy)-25 4334 y Fm(and)22
b(add)i(the)e(following)j(line)e(to)g(`)p Fj(/etc/chrony.conf)p
Fm(')28 b(\(the)22 b(order)h(of)g(the)f(lines)i(does)g(not)e(matter\))
90 4570 y Fj(commandkey)57 b(1)-25 4801 y Fm(The)23 b(smallest)h
(useful)f(configuration)g(file)h(would)f(look)h(something)f(like)90
5036 y Fj(server)56 b(1.2.3.4)g(offline)90 5140 y(server)g(5.6.7.8)g
(offline)90 5244 y(server)g(9.10.11.12)h(offline)90 5348
y(keyfile)f(/etc/chrony.keys)90 5451 y(commandkey)h(1)90
5555 y(driftfile)g(/etc/chrony.drift)-25 5786 y Fm(The)23
b(next)e(section)j(describes)h(how)e(to)f(tell)h Fj(chronyd)i
Fm(when)e(the)f(internet)g(link)h(goes)h(up)f(and)f(down.)p
eop
%%Page: 9 11
9 10 bop -150 -116 a Fm(Chapter)23 b(3:)f(Typical)j(operating)f
(scenarios)2468 b(9)-150 236 y Fg(3.2.2)55 b(How)38 b(to)f(tell)g
(chronyd)h(when)g(the)f(internet)h(link)f(is)g(available.)-25
463 y Fm(To)31 b(use)g(this)f(option,)j(you)e(will)h(need)f(to)f
(configure)i(a)e(command)i(key)f(in)g Fj(chronyd's)i
Fm(configuration)e(file)-150 562 y(`)p Fj(/etc/chrony.conf)p
Fm(',)c(as)d(described)g(in)f(the)f(previous)i(section.)-25
789 y(To)47 b(tell)h Fj(chronyd)g Fm(when)f(to)g(start)f(and)h(finish)h
(sampling)g(the)e(servers,)54 b(the)46 b Fj(online)j
Fm(and)e Fj(offline)-150 889 y Fm(commands)35 b(of)f(chronyc)g(need)g
(to)f(be)i(used.)55 b(To)35 b(give)g(an)e(example)i(of)f(their)g(use,)i
(we)e(assume)h(that)d Fj(pppd)j Fm(is)-150 988 y(the)28
b(program)g(being)h(used)g(to)f(connect)g(to)g(the)f(internet,)i(and)f
(that)f(chronyc)h(has)g(been)h(installed)g(at)f(its)h(default)-150
1088 y(location)j(`)p Fj(/usr/local/bin/chronyc)p Fm('.)52
b(We)32 b(also)f(assume)h(that)d(the)h(command)h(key)h(has)e(been)h
(set)g(up)f(as)-150 1188 y(described)25 b(in)d(the)g(previous)i
(section.)-25 1414 y(In)e(the)g(file)i(`)p Fj(/etc/ppp/ip-up)p
Fm(')j(we)d(add)f(the)f(command)i(sequence)90 1645 y
Fj(cat)55 b(<<EOF)h(|)f(/usr/local/bin/chronyc)90 1749
y(password)i(xyzzy)90 1852 y(online)90 1956 y(EOF)-25
2183 y Fm(and)22 b(in)h(the)f(file)i(`)p Fj(/etc/ppp/ip-down)p
Fm(')k(we)23 b(add)g(the)g(sequence)90 2414 y Fj(cat)55
b(<<EOF)h(|)f(/usr/local/bin/chronyc)90 2517 y(password)i(xyzzy)90
2621 y(offline)90 2725 y(EOF)-25 2952 y(chronyd's)25
b Fm(polling)g(of)f(the)e(servers)j(will)f(now)g(only)g(occur)f(whilst)
h(the)e(machine)i(is)g(actually)f(connected)h(to)-150
3051 y(the)e(Internet.)-150 3418 y Fl(3.3)59 b(Isolated)39
b(networks)-25 3645 y Fm(In)45 b(this)g(section)h(we)g(discuss)h(how)e
(to)g(configure)h(chrony)f(for)h(computers)f(that)g(never)g(have)h
(network)-150 3744 y(conectivity)24 b(to)e(any)h(computer)g(which)g
(ultimately)g(derives)h(its)f(time)f(from)h(a)g(reference)g(clock.)-25
3971 y(In)30 b(this)g(situation,)i(one)f(computer)f(is)h(selected)h(to)
f(be)f(the)g(master)h(timeserver.)46 b(The)31 b(other)f(computers)h
(are)-150 4070 y(either)23 b(direct)g(clients)g(of)g(the)f(master,)h
(or)f(clients)i(of)f(clients.)-25 4297 y(The)34 b(rate)g(value)h(in)f
(the)f(master's)i(drift)f(file)h(needs)g(to)f(be)h(set)f(to)g(the)g
(average)h(rate)f(at)g(which)g(the)g(master)-150 4397
y(gains)e(or)f(loses)j(time.)48 b Fj(chronyd)33 b Fm(includes)f
(support)g(for)f(this,)i(in)e(the)g(form)g(of)h(the)f
Fj(manual)i Fm(directive)f(in)f(the)-150 4496 y(configuration)23
b(file)h(and)f(the)f Fj(settime)j Fm(command)e(in)f(the)h
Fj(chronyc)h Fm(program.)-25 4723 y(If)19 b(the)f(master)g(is)i
(rebooted,)g Fj(chronyd)g Fm(can)f(re-read)h(the)e(drift)g(rate)h(from)
f(the)g(drift)h(file.)j(However,)f(the)d(master)-150
4822 y(has)24 b(no)g(accurate)g(estimate)h(of)f(the)g(current)e(time.)k
(To)f(get)f(around)g(this,)g(the)f(system)i(can)f(be)g(configured)h(so)
g(that)-150 4922 y(the)e(master)g(can)g(initially)i(set)e(itself)h(to)f
(a)h(`majority-vote')g(of)g(selected)h(clients')f(times;)f(this)g
(allows)j(the)c(clients)i(to)-150 5022 y(`flywheel')h(the)d(master)h
(across)h(its)f(outage.)-25 5248 y(A)30 b(typical)h(configuration)f
(file)h(for)e(the)h(master)f(\(called)j Fj(master)p Fm(\))f(might)f(be)
g(\(assuming)g(the)g(clients)g(are)g(in)-150 5348 y(the)22
b(192.168.165.x)i(subnet)e(and)g(that)g(the)g(master's)h(address)i(is)e
(192.168.169.170\))90 5579 y Fj(driftfile)57 b(/etc/chrony.drift)90
5682 y(commandkey)g(25)90 5786 y(keyfile)f(/etc/chrony.keys)p
eop
%%Page: 10 12
10 11 bop -150 -116 a Fm(Chapter)23 b(3:)f(Typical)j(operating)f
(scenarios)2423 b(10)90 236 y Fj(initstepslew)58 b(10)d(client1)h
(client3)g(client6)90 340 y(local)g(stratum)g(8)90 444
y(manual)90 548 y(allow)g(192.168.165)-25 772 y Fm(For)26
b(the)g(clients)g(that)f(have)i(to)f(resynchronise)h(the)e(master)i
(when)f(it)g(restarts,)g(the)g(configuration)g(file)h(might)-150
872 y(be)90 1100 y Fj(server)56 b(master)90 1204 y(driftfile)h
(/etc/chrony.drift)90 1308 y(logdir)f(/var/log/chrony)90
1411 y(log)f(measurements)j(statistics)f(tracking)90
1515 y(keyfile)f(/etc/chrony.keys)90 1619 y(commandkey)h(24)90
1723 y(local)f(stratum)g(10)90 1827 y(initstepslew)i(20)d(master)90
1930 y(allow)h(192.168.169.170)-25 2155 y Fm(The)34 b(rest)f(of)h(the)g
(clients)g(would)h(be)f(the)f(same,)k(except)d(that)e(the)h
Fj(local)i Fm(and)f Fj(allow)h Fm(directives)g(are)f(not)-150
2254 y(required.)-150 2612 y Fl(3.4)59 b(The)40 b(home)g(PC)g(with)f(a)
h(dial-up)f(connection)-150 2937 y Fg(3.4.1)55 b(Assumptions/how)40
b(the)d(software)i(works)-25 3161 y Fm(This)27 b(section)h(considers)g
(the)f(home)g(computer)g(which)g(has)g(a)g(dial-up)h(connection.)36
b(It)27 b(assumes)h(that)d(Linux)-150 3261 y(is)j(run)e(exclusively)k
(on)d(the)g(computer.)37 b(Dual-boot)28 b(systems)g(may)g(work;)j(it)c
(depends)i(what)e(\(if)h(anything\))f(the)-150 3360 y(other)22
b(system)i(does)g(to)e(the)g(system's)i(real-time)g(clock.)-25
3585 y(Much)c(of)j(the)e(configuration)h(for)g(this)g(case)h(is)f
(discussed)i(earlier)f(\(see)g(Section)f(3.2)g([Infrequent)f
(connection],)-150 3684 y(page)41 b(7\).)74 b(This)41
b(section)f(addresses)i(specifically)h(the)d(case)h(of)f(a)g(computer)g
(which)g(is)g(turned)f(off)h(between)-150 3784 y('sessions'.)-25
4008 y(In)23 b(this)g(case,)h Fj(chronyd)h Fm(relies)g(on)e(the)g
(computer's)h(real-time)g(clock)h(\(RTC\))f(to)f(maintain)g(the)g(time)
g(between)-150 4108 y(the)f(periods)j(when)d(it)h(is)g(powered)i(up.)d
(The)h(arrangement)f(is)i(shown)f(in)g(the)f(figure)h(below.)742
4336 y Fj(trim)55 b(if)g(required)1414 b(PSTN)416 4440
y(+----------------------)q(----)q(-+)821 b(+----------+)416
4544 y(|)1466 b(|)815 b(|)543 b(|)416 4648 y(v)1466 b(|)815
b(|)543 b(|)90 4751 y(+---------+)1089 b(+-------+)383
b(+-----+)273 b(+---+)90 4855 y(|)55 b(System's|)111
b(measure)56 b(error/)219 b(|chronyd|)383 b(|modem|)273
b(|ISP|)90 4959 y(|real-time|-----------)q(----)q(---)q(->|)387
b(|-------|)274 b(|)d(|)164 b(|)90 5063 y(|)109 b(clock)h(|)163
b(drift)56 b(rate)381 b(+-------+)i(+-----+)273 b(+---+)90
5166 y(+---------+)1252 b(^)1412 b(|)416 5270 y(|)1466
b(|)1412 b(|)416 5374 y(+----------------------)q(----)q(-+)984
b(--o-----o---)579 5478 y(set)55 b(time)g(at)g(boot)h(up)1466
b(|)2805 5582 y(+----------+)2805 5685 y(|NTP)55 b(server|)2805
5789 y(+----------+)p eop
%%Page: 11 13
11 12 bop -150 -116 a Fm(Chapter)23 b(3:)f(Typical)j(operating)f
(scenarios)2423 b(11)-25 236 y(When)25 b(the)g(computer)g(is)h
(connected)f(to)g(the)g(Internet)f(\(via)i(the)f(modem\),)i
Fj(chronyd)g Fm(has)e(access)i(to)e(external)-150 336
y(NTP)20 b(servers)g(which)g(it)f(makes)h(measurements)g(from.)h(These)
g(measurements)f(are)f(saved,)i(and)f(straight-line)g(fits)-150
435 y(are)i(performed)g(on)f(them)g(to)g(provide)i(an)e(estimate)h(of)g
(the)e(computer's)i(time)f(error)h(and)f(rate)g(of)h(gaining/losing)
-150 535 y(time.)-25 809 y(When)e(the)g(computer)h(is)g(taken)g
(offline)h(from)e(the)g(Internet,)g(the)g(best)h(estimate)g(of)g(the)f
(gain/loss)j(rate)d(is)h(used)-150 908 y(to)i(free-run)f(the)g
(computer)h(until)f(it)g(next)g(goes)i(online.)-25 1182
y(Whilst)j(the)g(computer)f(is)i(running,)f Fj(chronyd)i
Fm(makes)f(measurements)f(of)g(the)g(real-time)h(clock)g(\(RTC\))g
(\(via)-150 1281 y(the)e(`)p Fj(/dev/rtc)p Fm(')j(interface,)f(which)f
(must)e(be)i(compiled)i(into)d(the)g(kernel\).)35 b(An)26
b(estimate)h(is)h(made)f(of)g(the)f(RTC)-150 1381 y(error)k(at)g(a)h
(particular)g(RTC)g(second,)i(and)e(the)f(rate)g(at)g(which)h(the)e
(RTC)j(gains)f(or)g(loses)h(time)e(relative)i(to)e(true)-150
1481 y(time.)-25 1754 y(For)23 b(kernels)g(in)g(the)f(2.0)h(series)h
(prior)f(to)g(2.0.32,)g(the)f(kernel)h(was)h(set)f(up)f(to)h(trim)f
(the)g(RTC)i(every)g(11)f(minutes.)-150 1854 y(This)c(would)h(be)e
(disasterous)i(for)f Fj(chronyd)h Fm(--)f(there)f(is)h(no)f(reliable)i
(way)g(of)f(synchronising)g(with)f(this)h(trimming.)-150
1953 y(For)27 b(this)f(reason,)i Fj(chronyd)g Fm(only)g(supports)f(the)
f(RTC)h(in)f(2.0)h(kernels)h(from)e(v2.0.32)h(onwards.)35
b(\(I)27 b(don't)f(know)-150 2053 y(anything)c(about)h(the)f(kernel's)i
(RTC)f(behaviour)h(in)e(other)h(kernel)g(series\).)-25
2327 y(When)e(the)f(computer)i(is)f(powered)j(down,)d(the)g
(measurement)g(histories)h(for)g(all)g(the)f(NTP)g(servers)h(are)g
(saved)-150 2426 y(to)37 b(files)i(\(if)f(the)f Fj(dumponexit)j
Fm(directive)e(is)g(specified)i(in)e(the)e(configuration)i(file\),)k
(and)c(the)e(RTC)j(tracking)-150 2526 y(information)f(is)g(also)g
(saved)h(to)e(a)h(file)g(\(if)g(the)f Fj(rtcfile)j Fm(directive)e(has)g
(been)f(specified\).)70 b(These)38 b(pieces)h(of)-150
2625 y(information)34 b(are)g(also)i(saved)f(if)f(the)g
Fj(dump)h Fm(and)f Fj(writertc)i Fm(commands)f(respectively)h(are)e
(issued)h(through)-150 2725 y Fj(chronyc)p Fm(.)-25 2999
y(When)30 b(the)f(computer)h(is)g(rebooted,)j Fj(chronyd)f
Fm(reads)e(the)g(current)e(RTC)j(time)f(and)g(the)g(RTC)h(information)
-150 3098 y(saved)h(at)d(the)h(last)h(shutdown.)44 b(This)31
b(information)g(is)g(used)f(to)g(set)h(the)e(system)i(clock)h(to)e(the)
f(best)i(estimate)f(of)-150 3198 y(what)19 b(its)h(time)f(would)i(have)
f(been)f(now,)i(had)e(it)g(been)h(left)g(running)e(continuously.)k(The)
e(measurement)f(histories)-150 3297 y(for)k(the)f(servers)i(are)f(then)
e(reloaded.)-25 3571 y(The)g(next)e(time)i(the)f(computer)h(goes)h
(online,)f(the)f(previous)i(sessions')h(measurements)e(can)f
(contribute)g(to)g(the)-150 3671 y(line-fitting)j(process,)h(which)f
(gives)h(a)f(much)f(better)g(estimate)h(of)h(the)e(computer's)h
(gain/loss)h(rate.)-25 3944 y(One)35 b(problem)h(with)f(saving)h(the)f
(measurements)g(and)g(RTC)h(data)f(when)h(the)e(machine)i(is)f(shut)f
(down)i(is)-150 4044 y(what)26 b(happens)h(if)f(there)g(is)g(a)g(power)
i(failure;)f(the)f(most)g(recent)g(data)g(will)h(not)e(be)i(saved.)33
b(Although)26 b Fj(chronyd)-150 4143 y Fm(is)33 b(robust)f(enough)g(to)
g(cope)i(with)e(this,)j(some)e(performance)g(may)g(be)g(lost.)52
b(\(The)33 b(main)f(danger)h(arises)h(if)e(the)-150 4243
y(RTC)24 b(has)g(been)g(changed)g(during)f(the)g(session,)i(with)e(the)
g Fj(trimrtc)i Fm(command)f(in)g Fj(chronyc)p Fm(.)i(Because)f(of)f
(this,)-150 4343 y Fj(trimrtc)h Fm(will)f(make)f(sure)g(that)e(a)i
(meaningful)g(RTC)h(file)g(is)f(saved)h(out)e(after)h(the)f(change)h
(is)g(completed\).)-25 4616 y(The)29 b(easiest)h(protection)g(against)f
(power)i(failure)e(is)h(to)f(put)f(the)g Fj(dump)i Fm(and)f
Fj(writertc)j Fm(commands)e(in)e(the)-150 4716 y(same)e(place)h(as)e
(the)g Fj(offline)i Fm(command)f(is)g(issued)g(to)f(take)h
Fj(chronyd)h Fm(offline;)g(because)g Fj(chronyd)g Fm(free-runs)-150
4815 y(between)40 b(online)h(sessions,)46 b(no)40 b(parameters)g(will)i
(change)e(significantly)h(between)g(going)f(offline)i(from)d(the)-150
4915 y(Internet)22 b(and)h(any)g(power)h(failure.)-25
5188 y(A)29 b(final)h(point)f(regards)h(home)f(computers)g(which)h(are)
f(left)g(running)f(for)h(extended)h(periods)h(and)e(where)g(it)-150
5288 y(is)g(desired)i(to)d(spin)i(down)f(the)f(hard)h(disc)h(when)f(it)
f(is)i(not)e(in)h(use)g(\(e.g.)40 b(when)29 b(not)f(accessed)j(for)e
(15)h(minutes\).)-150 5388 y Fj(chronyd)j Fm(has)f(been)g(planned)g(so)
g(it)f(supports)h(such)f(operation;)37 b(this)31 b(is)h(the)f(reason)h
(why)f(the)g(RTC)i(tracking)-150 5487 y(parameters)25
b(are)g(not)f(saved)i(to)e(disc)i(after)e(every)h(update,)g(but)f(only)
h(when)f(the)g(user)h(requests)f(such)g(a)h(write,)g(or)-150
5587 y(during)e(the)g(shutdown)g(sequence.)i(The)e(only)h(other)f
(facility)i(that)d(will)j(generate)f(periodic)h(writes)f(to)f(the)g
(disc)h(is)-150 5687 y(the)h Fj(log)f(rtc)i Fm(facility)h(in)e(the)h
(configuration)g(file;)h(this)f(option)g(should)g(not)f(be)h(used)g(if)
g(you)g(want)g(your)f(disc)i(to)-150 5786 y(spin)c(down.)p
eop
%%Page: 12 14
12 13 bop -150 -116 a Fm(Chapter)23 b(3:)f(Typical)j(operating)f
(scenarios)2423 b(12)-150 236 y Fg(3.4.2)55 b(Typical)39
b(configuration)h(files.)-25 477 y Fm(To)29 b(illustrate)g(how)g(a)g
(dial-up)h(home)f(computer)g(might)f(be)h(configured,)i(example)f
(configuration)f(files)i(are)-150 577 y(shown)23 b(in)g(this)f
(section.)-25 818 y(For)i(the)f(`)p Fj(/etc/chrony.conf)p
Fm(')29 b(file,)c(the)f(following)i(can)e(be)g(used)h(as)f(an)g
(example.)j Fh(NOTE)e(:)f(The)g Fj(server)-150 918 y
Fh(directives)33 b(are)f(only)g(applicable)i(to)d(customers)h(of)g
(Demon)g(Internet;)i(users)e(of)g(other)f(ISPs)h(will)g(need)g(to)g
(use)-150 1017 y(their)22 b(own)h(ISP's)g(NTP)g(servers)h(or)f(public)g
(NTP)g(servers.)90 1263 y Fj(server)56 b(158.152.1.65)i(minpoll)e(5)f
(maxpoll)h(10)f(maxdelay)i(0.4)e(offline)90 1366 y(server)h
(158.152.1.76)i(minpoll)e(5)f(maxpoll)h(10)f(maxdelay)i(0.4)e(offline)
90 1470 y(server)h(194.159.253.2)i(minpoll)f(5)d(maxpoll)j(10)d
(maxdelay)j(0.4)e(offline)90 1574 y(logdir)h(/var/log/chrony)90
1678 y(log)f(statistics)i(measurements)h(tracking)90
1782 y(driftfile)f(/etc/chrony.drift)90 1885 y(keyfile)f
(/etc/chrony.keys)90 1989 y(commandkey)h(25)90 2093 y(maxupdateskew)h
(100.0)90 2197 y(dumponexit)90 2300 y(dumpdir)e(/var/log/chrony)90
2404 y(rtcfile)g(/etc/chrony.rtc)-25 2645 y Fm(I)68 b(use)h
Fj(pppd)h Fm(for)e(connecting)h(to)f(my)h(ISP.)f(This)h(runs)f(two)h
(scripts)g(`)p Fj(/etc/ppp/ip-up)p Fm(')k(and)-150 2745
y(`)p Fj(/etc/ppp/ip-down)p Fm(')28 b(when)22 b(the)h(link)g(goes)h
(online)f(and)g(offline)h(respectively.)-25 2986 y(The)f(relevant)g
(part)f(of)h(the)f(`)p Fj(/etc/ppp/ip-up)p Fm(')27 b(file)d(is)g
(\(with)e(a)h(dummy)g(password\))90 3231 y Fj(cat)55
b(<<EOF)h(|)f(/usr/local/bin/chronyc)90 3335 y(password)i(xxxxxxxx)90
3439 y(online)90 3543 y(EOF)-25 3784 y Fm(and)22 b(the)h(relevant)f
(part)h(of)g(the)f(`)p Fj(/etc/ppp/ip-down)p Fm(')28
b(script)23 b(is)90 4029 y Fj(cat)55 b(<<EOF)h(|)f
(/usr/local/bin/chronyc)90 4133 y(password)i(xxxxxxxx)90
4237 y(offline)90 4341 y(dump)90 4444 y(writertc)90 4548
y(EOF)-25 4789 y Fm(\(Because)26 b(they)f(have)h(to)f(contain)h(the)e
(administrator)i(password,)i(it)d(would)h(be)g(desirable)h(to)f(make)g
(the)e(files)-150 4889 y(readable)g(only)g(by)f(root)f(on)h(a)g
(multiuser)f(machine\).)-25 5130 y(To)g(start)e Fj(chronyd)j
Fm(during)f(the)e(boot)i(sequence,)f(I)h(have)g(the)e(following)k(in)d
(`)p Fj(/etc/rc.d/rc.local)p Fm(')27 b(\(this)-150 5230
y(is)c(a)g(Slackware)h(system\))90 5475 y Fj(if)55 b([)f(-f)h
(/usr/local/sbin/chron)q(yd)60 b(-a)55 b(-f)g(/etc/chrony.conf)k(];)c
(then)199 5579 y(/usr/local/sbin/chronyd)61 b(-r)55 b(-s)199
5682 y(echo)g("Start)h(chronyd")90 5786 y(fi)p eop
%%Page: 13 15
13 14 bop -150 -116 a Fm(Chapter)23 b(3:)f(Typical)j(operating)f
(scenarios)2423 b(13)-25 236 y(The)38 b(placement)h(of)f(this)g
(command)g(may)g(be)g(important)g(on)g(some)h(systems.)68
b(In)38 b(particular,)k Fj(chronyd)-150 336 y Fm(may)30
b(need)g(to)g(be)g(started)g(several)h(seconds)g(\(about)f(10)g(as)g(a)
g(minimum\))f(before)i(any)f(software)h(that)d(depends)-150
435 y(on)g(the)g(system)g(clock)i(not)d(jumping)i(or)f(moving)h
(backwards,)i(depending)e(on)f(the)g(directives)h(in)f
Fj(chronyd's)-150 535 y Fm(configuration)23 b(file.)-25
759 y(For)31 b(the)g(system)g(shutdown,)i Fj(chronyd)g
Fm(should)f(receive)g(a)g(SIGTERM)f(several)i(seconds)g(before)f(the)e
(final)-150 859 y(SIGKILL;)20 b(the)e(SIGTERM)i(causes)g(the)f
(measurement)g(histories)h(and)f(RTC)i(information)e(to)g(be)g(saved)i
(out.)f(There)-150 959 y(should)26 b(be)g(no)f(need)h(to)f(add)h
(anything)f(to)g(the)g(shutdown)g(sequence,)h(unless)g(\(as)g(my)f
(system)i(had\))e(there)g(is)h(no)-150 1058 y(pause)e(between)f(the)g
(SIGTERM)h(and)f(SIGKILL)g(being)h(delivered)h(to)e(the)f(remaining)i
(processes.)h(So)e(if)g(you)h(find)-150 1158 y(something)f(like)90
1386 y Fj(killall5)57 b(-15)90 1490 y(killall5)g(-9)-25
1714 y Fm(in)22 b(your)h Fj(/etc/rc.d/rc.0)k Fm(script,)22
b(you)h(will)h(need)g(to)e(insert)h(a)g(sleep,)h(e.g.)90
1942 y Fj(killall5)57 b(-15)90 2046 y(sleep)f(5)90 2150
y(killall5)h(-9)-25 2374 y Fm(Otherwise,)25 b Fj(chronyd)i
Fm(will)f(not)e(always)i(save)g(information)f(on)f(shutdown,)h(which)g
(could)g(be)g(a)g(problem)h(if)-150 2474 y(you)d(don't)g(use)f
Fj(dump)i Fm(and)f Fj(writertc)i Fm(when)e(you)g(go)g(offline.)-150
2831 y Fl(3.5)59 b(Other)39 b(important)g(configuration)h(options)-25
3055 y Fm(The)23 b(most)h(common)g(option)g(to)g(include)g(in)f(the)g
(configuration)h(file)h(is)f(the)f Fj(driftfile)j Fm(option.)g(One)d
(of)h(the)-150 3154 y(major)31 b(tasks)g(of)f Fj(chronyd)i
Fm(is)f(to)f(work)h(out)f(how)h(fast)f(or)g(how)h(slow)h(the)d(system)i
(clock)h(runs)d(relative)i(to)f(real)-150 3254 y(time)d(-)h(e.g.)37
b(in)27 b(terms)g(of)h(seconds)h(gained)g(or)e(lost)h(per)g(day.)38
b(Measurements)27 b(over)h(a)g(long)g(period)h(are)e(usually)-150
3354 y(required)34 b(to)f(refine)h(this)g(estimate)g(to)g(an)f
(acceptable)j(degree)f(of)f(accuracy.)56 b(Therefore,)37
b(it)d(would)g(be)g(bad)h(if)-150 3453 y Fj(chronyd)26
b Fm(had)d(to)h(work)h(the)e(value)h(out)f(each)h(time)g(it)f(is)h
(restarted,)g(because)h(the)e(system)h(clock)h(would)g(not)e(run)-150
3553 y(so)g(accurately)h(whilst)f(the)f(determination)h(is)g(taking)g
(place.)-25 3777 y(To)d(avoid)h(this)f(problem,)h Fj(chronyd)h
Fm(allows)g(the)d(gain)h(or)g(loss)i(rate)d(to)h(be)g(stored)g(in)g(a)g
(file,)h(which)f(can)g(be)g(read)-150 3877 y(back)j(in)f(when)h(the)f
(program)h(is)g(restarted.)f(This)h(file)h(is)f(called)h(the)e(drift)g
(file,)h(and)g(might)f(typically)i(be)f(stored)g(in)-150
3976 y(`)p Fj(/etc/chrony.drift)p Fm('.)28 b(By)23 b(specifying)i(an)d
(option)i(like)g(the)e(following)90 4205 y Fj(driftfile)57
b(/etc/chrony.drift)-25 4429 y Fm(in)22 b(the)g(configuration)h(file)h
(\(`)p Fj(/etc/chrony.conf)p Fm('\),)k(the)22 b(drift)h(file)g
(facility)h(will)g(be)f(activated.)p eop
%%Page: 14 16
14 15 bop -150 -116 a Fm(Chapter)23 b(4:)f(Usage)i(reference)2885
b(14)-150 236 y Fi(4)71 b(Usage)47 b(reference)-150 838
y Fl(4.1)59 b(Starting)39 b(chronyd)-25 1080 y Fm(If)24
b Fj(chronyd)i Fm(has)f(been)f(installed)i(to)e(its)g(default)g
(location)h(`)p Fj(/usr/local/sbin/chro)q(nyd)p Fm(')q(,)30
b(starting)23 b(it)h(is)-150 1179 y(simply)g(a)f(matter)f(of)h
(entering)g(the)f(command)90 1426 y Fj(/usr/local/sbin/chrony)q(d)-25
1668 y Fm(Information)h(messages)i(and)d(warnings)i(will)g(be)f(logged)
i(to)d(syslog.)-25 1910 y(The)h(command)g(line)g(options)h(supported)g
(are)e(as)i(follows:)-150 2196 y Fj(-d)372 b Fm(When)37
b(run)e(in)i(this)f(mode,)41 b(the)36 b(program)h(will)h(not)e(detach)h
(itself)h(from)f(the)f(terminal,)j(and)e(all)330 2295
y(messages)25 b(will)f(be)f(sent)g(to)f(the)g(terminal)h(instead)g(of)g
(to)g(syslog.)-150 2481 y Fj(-f)g(<conf-file>)330 2580
y Fm(This)j(option)h(can)e(be)h(used)h(to)e(specify)j(an)d(alternate)h
(location)h(for)e(the)h(configuration)g(file)g(\(default)330
2680 y(`)p Fj(/etc/chrony.conf)p Fm('\).)-150 2866 y
Fj(-r)372 b Fm(This)22 b(option)g(will)h(reload)g(sample)g(histories)f
(for)g(each)g(of)g(the)e(servers)j(being)f(used.)g(These)h(histories)
330 2965 y(are)37 b(created)g(by)g(using)g(the)f Fj(dump)i
Fm(command)f(in)g Fj(chronyc)p Fm(,)42 b(or)36 b(by)h(setting)g(the)f
Fj(dumponexit)330 3065 y Fm(directive)d(in)g(the)e(configuration)i
(file.)52 b(This)33 b(option)g(is)g(useful)f(if)h(you)f(want)g(to)g
(stop)h(and)g(restart)330 3165 y Fj(chronyd)h Fm(briefly)f(for)g(any)f
(reason,)i(e.g.)51 b(to)32 b(install)h(a)f(new)g(version.)52
b(However,)35 b(it)d(only)h(makes)330 3264 y(sense)j(on)f(systems)h
(where)g(the)e(kernel)i(can)f(maintain)g(clock)i(compensation)f(whilst)
g(not)e(under)330 3364 y Fj(chronyd's)g Fm(control.)50
b(The)32 b(only)g(version)g(where)h(this)e(happens)i(so)f(far)g(is)g
(Linux.)48 b(On)32 b(systems)330 3463 y(where)23 b(this)g(is)g(not)f
(the)g(case,)i(e.g.)e(Solaris)i(and)f(SunOS)e(the)h(option)h(should)g
(not)g(be)g(used.)-150 3649 y Fj(-s)372 b Fm(This)18
b(option)h(will)g(set)e(the)g(system)i(clock)g(from)e(the)g(computer's)
h(real-time)h(clock.)j(This)c(is)g(analogous)330 3749
y(to)k(supplying)h(the)e(`-s')h(flag)h(to)e(the)h(`)p
Fj(/sbin/clock)p Fm(')j(program)d(during)g(the)f(Linux)g(boot)h
(sequence.)330 3891 y(Support)i(for)h(real-time)g(clocks)h(is)f
(limited)h(at)e(present)h(-)f(the)g(criteria)h(are)g(described)h(in)e
(the)g(section)330 3991 y(on)f(the)f Fj(rtcfile)j Fm(directive)e(\(see)
h(Section)f(4.2.17)g([rtcfile)g(directive],)h(page)f(24\).)330
4133 y(If)30 b Fj(chronyd)h Fm(cannot)d(support)i(the)e(real)i(time)f
(clock)i(on)e(your)g(computer,)h(this)f(option)h(cannot)f(be)330
4233 y(used)23 b(and)g(a)g(warning)g(message)h(will)h(be)e(logged)h(to)
f(the)f(syslog.)330 4376 y(If)g(used)f(in)h(conjunction)e(with)h(the)g
(`-r')g(flag,)h Fj(chronyd)i Fm(will)e(attempt)f(to)g(preserve)h(the)f
(old)h(samples)330 4475 y(after)g(setting)f(the)g(system)i(clock)g
(from)f(the)f(real)h(time)g(clock.)h(This)g(can)f(be)g(used)g(to)f
(allow)j Fj(chronyd)330 4575 y Fm(to)19 b(perform)i(long)f(term)f
(averaging)i(of)f(the)f(gain)h(or)g(loss)h(rate)e(across)i(system)f
(reboots,)h(and)e(is)i(useful)330 4675 y(for)j(dial-up)g(systems)h
(that)d(are)i(shut)f(down)h(when)g(not)f(in)g(use.)i(For)f(this)f(to)h
(work)g(well,)h(it)e(relies)i(on)330 4774 y Fj(chronyd)h
Fm(having)f(been)f(able)h(to)f(determine)g(accurate)h(statistics)f(for)
h(the)e(difference)j(between)e(the)330 4874 y(real)f(time)g(clock)h
(and)f(system)g(clock)h(last)f(time)g(the)f(computer)h(was)h(on.)-150
5059 y Fj(-v)372 b Fm(This)23 b(option)h(displays)h Fj(chronyd's)g
Fm(version)f(number)e(to)g(the)h(terminal)f(and)h(exits.)-25
5345 y(On)29 b(systems)h(that)e(support)i(an)f(`)p Fj(/etc/rc.local)p
Fm(')34 b(file)c(for)g(starting)f(programs)h(at)g(boot)f(time,)i
Fj(chronyd)-150 5444 y Fm(can)23 b(be)g(started)f(from)h(there.)-25
5687 y(On)i(systems)j(with)e(a)g(System)g(V)h(style)g(initialisation)h
(\(e.g.)33 b(Solaris\),)28 b(a)e(suitable)h(start/stop)f(script)h
(might)f(be)-150 5786 y(as)d(shown)g(below.)h(This)g(might)e(be)h
(placed)i(in)d(the)g(file)i(`)p Fj(/etc/rc2.d/S83chrony)p
Fm('.)p eop
%%Page: 15 17
15 16 bop -150 -116 a Fm(Chapter)23 b(4:)f(Usage)i(reference)2885
b(15)90 236 y Fj(#!/bin/sh)90 340 y(#)55 b(This)g(file)h(should)g(have)
f(uid)g(root,)h(gid)f(sys)g(and)h(chmod)f(744)90 444
y(#)90 651 y(killproc\(\))i({)652 b(#)55 b(kill)g(the)g(named)h
(process\(es\))524 755 y(pid=`/usr/bin/ps)j(-e)c(|)796
859 y(/usr/bin/grep)j(-w)d($1)g(|)796 963 y(/usr/bin/sed)j(-e)d('s/^)
109 b(*//')56 b(-e)f('s/)g(.*//'`)524 1066 y([)g("$pid")h(!=)f("")g(])f
(&&)h(kill)h($pid)90 1170 y(})90 1378 y(case)f("$1")h(in)90
1585 y('start'\))253 1689 y(if)f([)f(-f)h(/opt/free/sbin/chronyd)61
b(-a)55 b(-f)g(/etc/chrony.conf)k(];)c(then)361 1793
y(/opt/free/sbin/chrony)q(d)253 1897 y(fi)253 2000 y(;;)90
2104 y('stop'\))253 2208 y(killproc)i(chronyd)253 2312
y(;;)90 2416 y(*\))253 2519 y(echo)e("Usage:)i(/etc/rc2.d/S83chrony)j
({)55 b(start)g(|)g(stop)g(}")253 2623 y(;;)90 2727 y(esac)-25
2955 y Fm(\(In)22 b(both)h(cases,)g(you)g(may)g(want)f(to)h(bear)g(in)f
(mind)h(that)e Fj(chronyd)k Fm(can)e(step)g(the)f(time)g(when)h(it)f
(starts.)g(There)-150 3055 y(may)j(be)h(other)e(programs)i(started)f
(at)g(boot)g(time)g(that)f(could)i(be)f(upset)g(by)g(this,)g(so)h(you)f
(may)g(need)h(to)f(consider)-150 3155 y(the)e(ordering)i(carefully.)j
(However,)d Fj(chronyd)h Fm(will)g(need)f(to)e(start)h(after)g(daemons)
h(providing)g(services)h(that)d(it)-150 3254 y(may)g(require,)f(e.g.)h
(the)f(domain)h(name)g(service.\))-150 3611 y Fl(4.2)59
b(The)40 b(chronyd)g(configuration)g(file)-25 3835 y
Fm(The)35 b(configuration)g(file)h(is)g(normally)g(called)h(`)p
Fj(/etc/chrony.conf)p Fm(';)45 b(in)35 b(fact,)j(this)d(is)g(the)g
(compiled-in)-150 3935 y(default.)23 b(However,)h(other)e(locations)i
(can)f(be)g(specified)i(with)e(a)g(command)g(line)g(option.)-25
4159 y(Each)c(command)g(in)g(the)f(configuration)h(file)h(is)g(placed)g
(on)f(a)g(separate)h(line.)i(The)d(following)i(sections)f(describe)-150
4259 y(each)j(of)g(the)f(commands)i(in)f(turn.)d(The)j(directives)i
(can)d(occur)h(in)g(any)g(order)g(in)f(the)g(file.)-150
4582 y Fg(4.2.1)55 b(allow)-25 4807 y Fm(The)23 b Fj(allow)h
Fm(command)g(is)f(used)h(to)e(designate)j(a)e(particular)g(subnet)f
(from)h(which)h(NTP)f(clients)g(are)h(allowed)-150 4906
y(to)f(access)h(the)e(computer)h(as)g(an)f(NTP)h(server.)-25
5130 y(The)i(default)g(is)g(that)f(no)g(clients)i(are)f(allowed)i
(access,)f(i.e.)j Fj(chronyd)e Fm(operates)f(purely)f(as)g(an)g(NTP)g
(client.)j(If)-150 5230 y(the)22 b Fj(allow)i Fm(directive)g(is)f
(used,)g Fj(chronyd)i Fm(will)f(be)f(both)f(a)h(client)g(of)g(its)g
(servers,)g(and)g(a)g(server)g(to)g(other)f(clients.)-25
5454 y(Examples)i(of)f(use)g(of)g(the)f(command)h(are)g(as)h(follows:)
90 5682 y Fj(allow)56 b(foo.bar.com)90 5786 y(allow)g(1.2)p
eop
%%Page: 16 18
16 17 bop -150 -116 a Fm(Chapter)23 b(4:)f(Usage)i(reference)2885
b(16)90 236 y Fj(allow)56 b(3.4.5)90 340 y(allow)-25
566 y Fm(The)38 b(first)g(command)g(allows)j(the)c(named)h(host)g(to)g
(be)g(an)g(NTP)h(client)f(of)g(this)g(computer.)68 b(The)39
b(second)-150 665 y(command)22 b(allows)i(any)d(host)h(with)f(an)h(IP)f
(address)j(of)e(the)f(form)g(1.2.x.y)g(\(with)h(x)f(and)h(y)f
(arbitrary\))h(to)f(be)h(an)g(NTP)-150 765 y(client)j(of)h(this)e
(computer.)30 b(Likewise,)d(the)e(third)f(command)i(allows)h(any)e
(host)g(with)g(an)f(IP)h(address)i(of)e(the)g(form)-150
865 y(3.4.5.x)d(to)g(have)h(client)g(NTP)g(access.)h(The)f(fourth)f
(form)h(allows)i(access)f(by)f(any)g(node)g(on)g(the)f(entire)h
(Internet.)-25 1090 y(A)35 b(second)g(form)g(of)g(the)g(directive,)j
Fj(allow)24 b(all)p Fm(,)38 b(has)d(a)g(greater)g(effect,)j(depending)e
(on)f(the)f(ordering)h(of)-150 1190 y(directives)24 b(in)f(the)f
(configuration)h(file.)g(To)h(illustrate)f(the)f(effect,)h(consider)h
(the)e(two)h(examples)90 1420 y Fj(allow)56 b(1.2.3.4)90
1524 y(deny)f(1.2.3)90 1628 y(allow)h(1.2)-25 1853 y
Fm(and)90 2083 y Fj(allow)g(1.2.3.4)90 2187 y(deny)f(1.2.3)90
2291 y(allow)h(all)f(1.2)-25 2517 y Fm(In)22 b(the)h(first)g(example,)g
(the)g(effect)g(is)h(the)e(same)i(regardles)g(of)g(what)e(order)i(the)e
(three)g(directives)j(are)e(given)g(in.)-150 2616 y(So)i(the)f(1.2.x.y)
h(subnet)f(is)i(allowed)h(access,)g(except)f(for)f(the)g(1.2.3.x)f
(subnet,)h(which)g(is)h(denied)g(access,)h(however)-150
2716 y(the)22 b(host)h(1.2.3.4)f(is)i(allowed)h(access.)-25
2942 y(In)20 b(the)f(second)i(example,)g(the)f Fj(allow)k(all)f(1.2)e
Fm(directives)h(overrides)f(the)f(effect)g(of)h Fh(any)26
b Fm(previous)21 b(directive)-150 3041 y(relating)48
b(to)f(a)h(subnet)f(within)g(the)g(specified)j(subnet.)96
b(Within)48 b(a)f(configuration)h(file)h(this)e(capability)i(is)-150
3141 y(probably)28 b(rather)e(moot;)i(however,)g(it)f(is)g(of)g
(greater)f(use)h(for)g(reconfiguration)g(at)f(run-time)g(via)h
Fj(chronyc)i Fm(\(see)-150 3240 y(Section)23 b(4.3.4.5)f([allow)j(all)e
(command],)g(page)h(29\).)-25 3466 y(Note,)f(if)h(the)f
Fj(initstepslew)k Fm(directive)e(\(see)f(Section)g(4.2.8)f
([initstepslew)j(directive],)e(page)h(18\))f(is)g(used)g(in)-150
3566 y(the)29 b(configuration)i(file,)h(each)e(of)h(the)e(computers)h
(listed)h(in)f(that)f(directive)i(must)e(allow)i(client)f(access)i(by)e
(this)-150 3665 y(computer)23 b(for)g(it)f(to)h(work.)-150
3994 y Fg(4.2.2)55 b(commandkey)-25 4220 y Fm(The)21
b(commandkey)i(command)e(is)h(used)g(to)f(set)g(the)g(key)h(number)e
(used)h(for)h(authenticating)e(user)h(commands)-150 4320
y(via)d(the)f(chronyc)g(program)h(at)f(run)f(time.)k(This)e(allows)i
(certain)d(actions)h(of)f(the)g(chronyc)g(program)h(to)f(be)h
(restricted)-150 4419 y(to)23 b(administrators.)-25 4645
y(An)f(example)i(of)f(the)f(commandkey)j(command)e(is)90
4875 y Fj(commandkey)57 b(20)-25 5101 y Fm(In)22 b(the)g(key)i(file)g
(\(see)g(the)e(keyfile)j(command\))e(there)f(should)h(be)g(a)g(line)h
(of)f(the)f(form)90 5331 y Fj(20)55 b(foobar)-25 5556
y Fm(When)22 b(running)g(the)g(chronyc)h(program)g(to)g(perform)g
(run-time)f(configuration,)h(the)f(command)90 5786 y
Fj(password)57 b(foobar)p eop
%%Page: 17 19
17 18 bop -150 -116 a Fm(Chapter)23 b(4:)f(Usage)i(reference)2885
b(17)-25 236 y(must)22 b(be)h(entered)f(before)i(any)f(commands)g
(affecting)h(the)e(operation)i(of)f(the)f(daemon)i(can)e(be)h(entered.)
-150 564 y Fg(4.2.3)55 b(cmdport)-25 790 y Fm(The)21
b Fj(cmdport)j Fm(directive)e(allows)i(the)d(port)g(that)f(is)i(used)g
(for)g(run-time)e(command)i(and)g(monitoring)f(\(via)h(the)-150
890 y(program)h Fj(chronyc)p Fm(\))i(to)e(be)g(altered)g(from)g(its)g
(default)g(\(323/udp\).)-25 1115 y(An)f(example)i(shows)g(the)e(syntax)
90 1345 y Fj(cmdport)56 b(257)-25 1571 y Fm(This)29 b(would)i(make)e
Fj(chronyd)i Fm(use)f(257/udp)g(as)f(its)g(command)h(port.)42
b(\()p Fj(chronyc)31 b Fm(would)f(need)g(to)f(be)g(run)-150
1671 y(with)23 b(the)f Fj(-p)h(257)g Fm(switch)h(to)e(inter-operate)h
(correctly\).)-150 1999 y Fg(4.2.4)55 b(deny)-25 2224
y Fm(This)31 b(is)g(similar)h(to)f(the)f Fj(allow)i Fm(directive)g
(\(see)g(Section)e(4.2.1)h([allow)h(directive],)i(page)e(15\),)h
(except)e(that)e(it)-150 2324 y(denies)24 b(NTP)f(client)g(access)h(to)
f(a)g(particular)g(subnet)f(or)g(host,)h(rather)f(than)f(allowing)k
(it.)-25 2550 y(The)e(syntax)f(is)h(identical.)-25 2775
y(There)g(is)g(also)h(a)f Fj(deny)h(all)f Fm(directive)h(with)f
(similar)h(behaviour)f(to)f(the)g Fj(allow)i(all)g Fm(directive.)-150
3104 y Fg(4.2.5)55 b(driftfile)-25 3329 y Fm(One)31 b(of)h(the)e(main)i
(activities)g(of)g(the)f Fj(chronyd)i Fm(program)f(is)g(to)f(work)h
(out)f(the)g(rate)g(at)g(which)g(the)g(system)-150 3429
y(clock)24 b(gains)g(or)e(loses)j(time)e(relative)g(to)g(real)g(time.)
-25 3655 y(Whenever)44 b Fj(chronyd)i Fm(computes)f(a)f(new)g(value)h
(of)f(the)f(gain/loss)j(rate,)j(it)43 b(is)i(desirable)h(to)e(record)g
(it)-150 3754 y(somewhere.)30 b(This)25 b(allows)i Fj(chronyd)f
Fm(to)f(begin)g(compensating)h(the)e(system)h(clock)h(at)f(that)e(rate)
i(whenever)g(it)f(is)-150 3854 y(restarted,)31 b(even)g(before)f(it)g
(has)g(had)g(a)g(chance)g(to)g(obtain)g(an)f(equally)i(good)g(estimate)
g(of)f(the)f(rate)h(during)f(the)-150 3953 y(new)23 b(run.)e(\(This)j
(process)g(may)f(take)g(many)g(minutes,)f(at)h(least\).)-25
4179 y(The)47 b(driftfile)h(command)g(allows)h(a)f(file)g(to)f(be)g
(specified)j(into)d(which)h Fj(chronyd)h Fm(can)e(store)h(the)e(rate)
-150 4279 y(information.)38 b(Two)29 b(parameters)g(are)f(recorded)h
(in)f(the)f(file.)39 b(The)29 b(first)f(is)g(the)f(rate)h(at)g(which)g
(the)f(system)i(clock)-150 4378 y(gains)k(or)e(loses)j(time,)f
(expressed)h(in)d(parts)h(per)g(million,)j(with)d(gains)g(positive.)51
b(Therefore,)35 b(a)d(value)g(of)g(100.0)-150 4478 y(indicates)f(that)d
(when)i(the)f(system)i(clock)g(has)f(advanced)h(by)f(a)f(second,)k(it)c
(has)h(gained)h(100)f(microseconds)i(on)-150 4578 y(reality)24
b(\(so)g(the)f(true)f(time)i(has)f(only)h(advanced)h(by)e(999900)i
(microseconds\).)i(The)c(second)i(is)f(an)f(estimate)h(of)f(the)-150
4677 y(error)g(bound)f(around)h(the)f(first)h(value)g(in)f(which)h(the)
g(true)e(rate)i(actually)g(lies.)-25 4903 y(An)f(example)i(of)f(the)f
(driftfile)i(command)f(is)90 5133 y Fj(driftfile)57 b
(/etc/chrony.drift)-150 5461 y Fg(4.2.6)e(dumpdir)-25
5687 y Fm(To)26 b(compute)f(the)g(rate)g(of)h(gain)g(or)f(loss)i(of)f
(time,)f Fj(chronyd)i Fm(has)f(to)f(store)h(a)f(measurement)g(history)h
(for)g(each)-150 5786 y(of)d(the)f(time)h(sources)h(it)e(uses.)p
eop
%%Page: 18 20
18 19 bop -150 -116 a Fm(Chapter)23 b(4:)f(Usage)i(reference)2885
b(18)-25 236 y(Certain)28 b(systems)i(\(so)f(far)g(only)g(Linux\))g
(have)g(operating)g(system)h(support)f(for)f(setting)h(the)f(rate)h(of)
g(gain)g(or)-150 336 y(loss)23 b(to)f(compensate)h(for)g(known)f
(errors.)g(\(On)g(other)g(systems,)g Fj(chronyd)i Fm(must)e(simulate)g
(such)g(a)g(capability)i(by)-150 435 y(periodically)i(slewing)f(the)d
(system)h(clock)i(forwards)f(or)f(backwards)h(by)f(a)g(suitable)h
(amount)e(to)h(compensate)h(for)-150 535 y(the)e(error)h(built)f(up)h
(since)g(the)f(previous)i(slew\).)-25 762 y(For)43 b(such)f(systems,)49
b(it)42 b(is)i(possible)h(to)d(save)i(the)e(measurement)h(history)g
(across)h(restarts)f(of)g Fj(chronyd)-150 861 y Fm(\(assuming)e(no)f
(changes)h(are)f(made)h(to)f(the)g(system)h(clock)g(behaviour)g(whilst)
f(it)g(is)h(not)f(running\).)73 b(If)41 b(this)-150 961
y(capability)21 b(is)e(to)g(be)g(used)g(\(via)h(the)e(dumponexit)h
(command)h(in)e(the)h(configuration)g(file,)h(or)f(the)f(dump)h
(command)-150 1061 y(in)29 b(chronyc\),)h(the)e(dumpdir)h(command)g
(should)h(be)f(used)g(to)f(define)i(the)e(directory)i(where)f(the)f
(measurement)-150 1160 y(histories)c(are)f(saved.)-25
1387 y(An)f(example)i(of)f(the)f(command)i(is)90 1618
y Fj(dumpdir)56 b(/var/log/chrony)-25 1844 y Fm(A)46
b(source)g(whose)h(IP)e(address)j(is)e(1.2.3.4)f(would)i(have)f(its)g
(measurement)f(history)h(saved)h(in)f(the)f(file)-150
1944 y(`)p Fj(/var/log/chrony/1.2.3.)q(4.d)q(at)p Fm('.)-150
2275 y Fg(4.2.7)55 b(dumponexit)-25 2501 y Fm(If)33 b(this)f(command)h
(is)g(present,)i(it)d(indicates)i(that)d Fj(chronyd)k
Fm(should)e(save)h(the)e(measurement)g(history)h(for)-150
2601 y(each)23 b(of)g(its)g(time)g(sources)g(recorded)h(whenever)g(the)
e(program)h(exits.)g(\(See)g(the)f(dumpdir)h(command)g(above\).)-150
2932 y Fg(4.2.8)55 b(initstepslew)-25 3159 y Fm(In)22
b(normal)g(operation,)g Fj(chronyd)i Fm(always)g(slews)g(the)e(time)f
(when)i(it)e(needs)i(to)f(adjust)g(the)f(system)i(clock.)h(For)-150
3258 y(example,)g(to)g(correct)f(a)h(system)g(clock)h(which)e(is)h(1)g
(second)h(slow,)f Fj(chronyd)i Fm(slightly)e(increases)h(the)e(amount)g
(by)-150 3358 y(which)g(the)f(system)h(clock)h(is)f(advanced)h(on)f
(each)g(clock)h(interrupt,)d(until)h(the)g(error)g(is)i(removed.)f
(\(Actually,)g(this)-150 3458 y(is)30 b(done)g(by)g(calling)h(the)e
Fj(adjtime\(\))j Fm(or)d(similar)i(system)f(function)f(which)g(does)i
(it)e(for)h(us.\))43 b(Note)30 b(that)e(at)h(no)-150
3557 y(time)23 b(does)h(time)e(run)g(backwards)j(with)d(this)h(method.)
-25 3784 y(On)g(most)h(Unix)g(systems)h(it)f(is)g(not)g(desirable)h(to)
f(step)h(the)e(system)h(clock,)i(because)f(many)e(programs)i(rely)g(on)
-150 3884 y(time)e(advancing)g(monotonically)i(forwards.)-25
4110 y(When)g(the)h Fj(chronyd)i Fm(daemon)e(is)h(initially)g(started,)
f(it)g(is)g(possible)j(that)24 b(the)h(system)i(clock)g(is)g
(considerably)-150 4210 y(in)c(error.)f(Attempting)g(to)h(correct)f
(such)h(an)f(error)h(by)g(slewing)h(may)f(not)g(be)f(sensible,)j(since)
e(it)f(may)h(take)g(several)-150 4309 y(hours)f(to)h(correct)g(the)f
(error)g(by)h(this)g(means.)-25 4536 y(The)k(purpose)i(of)f(the)f
Fj(initstepslew)k Fm(directive)d(is)h(to)e(allow)i Fj(chronyd)g
Fm(to)f(make)g(a)g(rapid)g(measurement)-150 4636 y(of)35
b(the)g(system)g(clock)i(error)d(at)h(boot)g(time,)j(and)d(to)f
(correct)h(the)g(system)g(clock)i(by)e(stepping)h(before)g(normal)-150
4735 y(operation)25 b(begins.)g(Since)f(this)f(would)i(normally)f(be)g
(performed)h(only)f(at)f(an)h(appropriate)h(point)f(in)f(the)g(system)
-150 4835 y(boot)g(sequence,)g(no)f(other)h(software)h(should)f(be)g
(adversely)i(affected)e(by)g(the)g(step.)-25 5061 y(If)29
b(the)g(correction)g(required)g(is)h(less)g(than)e(a)i(specified)h
(threshold,)g(a)e(slew)i(is)e(used)h(instead.)42 b(This)30
b(makes)g(it)-150 5161 y(easier)24 b(to)f(restart)f Fj(chronyd)i
Fm(whilst)g(the)e(system)h(is)h(in)e(normal)h(operation.)-25
5388 y(The)16 b Fj(initstepslew)k Fm(directive)d(takes)g(a)g(threshold)
f(and)h(a)f(list)h(of)g(NTP)f(servers)h(as)g(arguments.)j(A)c(maximum)
-150 5487 y(of)22 b(8)g(will)h(be)f(used.)g(Each)g(of)g(the)f(servers)h
(is)h(rapidly)g(polled)g(several)g(times,)f(and)g(a)f(majority)i
(voting)e(mechanism)-150 5587 y(used)26 b(to)g(find)g(the)f(most)h
(likely)i(range)e(of)g(system)h(clock)g(error)f(that)e(is)j(present.)32
b(A)26 b(step)g(\(or)g(slew\))i(is)e(applied)i(to)-150
5687 y(the)h(system)h(clock)h(to)f(correct)f(this)h(error.)43
b Fj(chronyd)31 b Fm(then)e(enters)h(its)f(normal)h(operating)h(mode)f
(\(where)g(only)-150 5786 y(slews)25 b(are)d(used\).)p
eop
%%Page: 19 21
19 20 bop -150 -116 a Fm(Chapter)23 b(4:)f(Usage)i(reference)2885
b(19)-25 236 y(An)22 b(example)i(of)f(use)g(of)g(the)f(command)i(is)90
480 y Fj(initstepslew)58 b(30)d(foo.bar.com)i(baz.quz.com)-25
719 y Fm(where)21 b(2)f(NTP)h(servers)h(are)f(used)g(to)g(make)g(the)f
(measurement.)h(The)h Fj(30)f Fm(indicates)h(that)d(if)i(the)f
(system's)i(error)-150 818 y(is)29 b(found)f(to)f(be)i(30)f(seconds)i
(or)e(less,)i(a)e(slew)i(will)f(be)f(used)h(to)e(correct)i(it;)h(if)e
(the)f(error)h(is)h(above)g(30)f(seconds,)j(a)-150 918
y(step)23 b(will)h(be)f(used.)-25 1157 y(The)h Fj(initstepslew)k
Fm(directive)d(can)f(also)h(be)g(used)f(in)h(an)e(isolated)j(LAN)f
(environment,)f(where)h(the)e(clocks)-150 1257 y(are)34
b(set)f(manually.)55 b(The)34 b(most)g(stable)g(computer)g(is)g(chosen)
g(as)g(the)f(master,)i(and)f(the)f(other)g(computers)h(are)-150
1356 y(slaved)26 b(to)e(it.)j(If)e(each)g(of)f(the)g(slaves)i(is)f
(configured)g(with)g(the)e(local)j(option)f(\(see)h(below\),)g(the)d
(master)i(can)f(be)h(set)-150 1456 y(up)j(with)g(an)f
Fj(initstepslew)32 b Fm(directive)d(which)f(references)h(some)g(or)f
(all)h(of)f(the)g(slaves.)39 b(Then,)29 b(if)g(the)e(master)-150
1556 y(machine)c(has)g(to)f(be)h(rebooted,)h(the)e(slaves)i(can)f(be)g
(relied)h(on)f(to)f('flywheel')j(the)d(time)h(for)g(the)f(master.)-150
1925 y Fg(4.2.9)55 b(keyfile)-25 2164 y Fm(This)21 b(command)h(is)g
(used)g(to)f(specify)i(the)d(location)j(of)e(the)g(file)h(containing)g
(ID/key)g(pairs)g(for)g(the)e(following)k(2)-150 2263
y(uses:)-75 2503 y Fk(\017)60 b Fm(Authentication)22
b(of)h(NTP)g(packets.)-75 2642 y Fk(\017)60 b Fm(Authentication)22
b(of)h(administrator)g(commands)h(entered)f(via)g(chronyc.)-25
2921 y(The)g(format)f(of)h(the)g(command)g(is)g(shown)g(in)g(the)f
(example)i(below)90 3165 y Fj(keyfile)56 b(/etc/chrony.keys)-25
3404 y Fm(The)26 b(argument)f(is)i(simply)h(the)d(name)h(of)h(the)e
(file)i(containing)g(the)e(ID/key)i(pairs.)34 b(The)26
b(format)g(of)h(the)e(file)i(is)-150 3503 y(shown)c(below)90
3747 y Fj(10)55 b(tulip)90 3850 y(11)g(hyacinth)90 3954
y(20)g(crocus)90 4058 y(25)g(iris)144 4162 y(...)-25
4401 y Fm(Each)31 b(line)i(consists)f(of)g(an)g(ID)f(and)h(a)g
(password.)51 b(The)32 b(ID)g(can)f(be)h(any)g(unsigned)g(integer)g(in)
f(the)g(range)h(0)-150 4501 y(through)21 b(2**32-1.)j(The)f(password)i
(can)e(be)g(any)g(string)f(of)i(characters)e(not)h(containing)g(a)f
(space.)-25 4740 y(For)38 b(NTP)f(use,)42 b(the)37 b(MD5)g
(authentication)g(scheme)h(is)h(always)g(used.)68 b(This)38
b(must)f(be)h(borne)g(in)g(mind)g(if)-150 4839 y Fj(chronyd)25
b Fm(is)e(to)g(inter-operate)g(in)g(authenticated)f(mode)h(with)g
Fj(xntpd)h Fm(running)d(on)i(other)f(computers.)-25 5079
y(The)c(ID)g(for)f(the)g(chronyc)h(authentication)f(key)h(is)g
(specified)j(with)c(the)g(commandkey)i(command)f(\(see)h(earlier\).)
-150 5447 y Fg(4.2.10)56 b(local)-25 5687 y Fm(The)42
b(local)i(keyword)h(is)e(used)g(to)f(allow)i Fj(chronyd)h
Fm(to)d(appear)i(synchronised)g(to)e(real)h(time)g(\(from)f(the)-150
5786 y(viewpoint)24 b(of)f(clients)h(polling)g(it\),)e(even)h(if)h(it)e
(has)h(no)g(current)e(synchronisation)i(source.)p eop
%%Page: 20 22
20 21 bop -150 -116 a Fm(Chapter)23 b(4:)f(Usage)i(reference)2885
b(20)-25 236 y(This)29 b(option)h(is)g(normally)g(used)f(on)g
(computers)h(in)f(an)g(isolated)i(network,)f(where)g(several)g
(computers)g(are)-150 336 y(required)c(to)g(synchronise)g(to)g(one)g
(other,)g(this)g(being)g(the)g Fj(")p Fm(master)p Fj(")g
Fm(which)g(is)h(kept)f(vaguely)h(in)f(line)h(with)e(real)-150
435 y(time)e(by)g(manual)f(input.)-25 660 y(An)g(example)i(of)f(the)f
(command)i(is)90 888 y Fj(local)56 b(stratum)g(10)-25
1112 y Fm(The)26 b(value)h(10)g(may)f(be)h(substituted)e(with)h(other)g
(values)h(in)f(the)g(range)h(1)f(through)f(15.)33 b(Stratum)24
b(1)j(indicates)-150 1212 y(a)34 b(computer)f(that)g(has)g(a)h(true)f
(real-time)h(reference)g(directly)h(connected)f(to)f(it)g(\(e.g.)56
b(GPS,)32 b(atomic)i(clock)h(etc\))-150 1311 y(&ndash;)g(such)30
b(computers)h(are)g(expected)h(to)e(be)h(very)g(close)i(to)d(real)h
(time.)46 b(Stratum)29 b(2)i(computers)g(are)g(those)-150
1411 y(which)23 b(have)g(a)g(stratum)e(1)i(server;)g(stratum)f(3)g
(computers)h(have)g(a)g(stratum)f(2)h(server)g(and)g(so)g(on.)-25
1635 y(A)29 b(large)i(value)f(of)g(10)g(indicates)h(that)d(the)h(clock)
i(is)f(so)g(many)g(hops)g(away)h(from)f(a)f(reference)i(clock)f(that)f
(its)-150 1735 y(time)24 b(is)g(fairly)g(unreliable.)i(Put)d(another)g
(way,)h(if)g(the)f(computer)h(ever)g(has)f(access)j(to)d(another)g
(computer)h(which)-150 1834 y(is)31 b(ultimately)g(synchronised)h(to)f
(a)g(reference)g(clock,)j(it)c(will)j(almost)e(certainly)g(be)g(at)g(a)
g(stratum)e(less)j(than)e(10.)-150 1934 y(Therefore,)d(the)e(choice)h
(of)g(a)f(high)h(value)g(like)g(10)g(for)g(the)f(local)h(command)g
(prevents)g(the)f(machine's)h(own)g(time)-150 2034 y(from)g(ever)g
(being)g(confused)h(with)e(real)i(time,)f(were)g(it)g(ever)g(to)f(leak)
i(out)e(to)h(clients)g(that)f(have)h(visibility)h(of)f(real)-150
2133 y(servers.)-150 2441 y Fg(4.2.11)56 b(log)-25 2665
y Fm(The)23 b(log)g(command)h(indicates)f(that)f(certain)h(information)
g(is)g(to)f(be)h(logged.)-150 2906 y Fj(measurements)330
3006 y Fm(This)41 b(option)g(logs)h(the)d(raw)i(NTP)g(measurements)f
(and)h(related)g(information)f(to)g(a)h(file)g(called)330
3106 y(measurements.log.)-150 3239 y Fj(statistics)330
3339 y Fm(This)23 b(option)h(logs)g(information)f(about)f(the)g
(regression)j(processing)f(to)f(a)g(file)h(called)g(statistics.log.)
-150 3472 y Fj(tracking)330 3572 y Fm(This)29 b(option)f(logs)i
(changes)e(to)g(the)g(estimate)g(of)h(the)e(system's)i(gain)g(or)f
(loss)h(rate,)g(and)f(any)g(slews)330 3672 y(made,)23
b(to)g(a)f(file)i(called)h(tracking.log.)-150 3805 y
Fj(rtc)318 b Fm(This)23 b(option)h(logs)g(information)f(about)f(the)g
(system's)i(real-time)g(clock.)-25 4046 y(The)f(files)h(are)f(written)f
(to)g(the)h(directory)g(specified)i(by)e(the)g(logdir)h(command.)-25
4270 y(An)e(example)i(of)f(the)f(command)i(is)90 4499
y Fj(log)55 b(measurements)j(statistics)f(tracking)-150
4807 y Fg(4.2.11.1)f(Measurements)38 b(log)f(file)g(format)-25
5031 y Fm(An)21 b(example)i(line)g(\(which)f(actually)g(appears)i(as)e
(a)g(single)h(line)g(in)f(the)f(file\))i(from)f(the)f(measurements)h
(log)h(file)-150 5130 y(is)g(shown)h(below.)90 5359 y
Fj(22Jul98)56 b(05:40:50)h(158.152.1.76)221 b(N)109 b(8)54
b(1111)i(11)f(1111)g(10)g(10)109 b(1)55 b(\\)253 5462
y(-4.966e-03)111 b(2.296e-01)h(1.577e-05)f(1.615e-01)g(7.446e-03)-25
5687 y Fm(The)24 b(columns)g(are)g(as)g(follows)j(\(the)c(quantities)g
(in)h(square)g(brackets)g(are)g(the)f(values)i(from)f(the)f(example)i
(line)-150 5786 y(above\))f(:)p eop
%%Page: 21 23
21 22 bop -150 -116 a Fm(Chapter)23 b(4:)f(Usage)i(reference)2885
b(21)-98 236 y(1.)60 b(Date)23 b([22Jul98])-98 359 y(2.)60
b(Hour:Minute:Second)27 b([05:40:50].)41 b(Note)29 b(that)e(the)h
(date/time)h(pair)g(is)g(expressed)h(in)f(UTC,)g(not)f(the)f(local)30
459 y(time)c(zone.)-98 582 y(3.)60 b(IP)23 b(address)h(of)f
(server/peer)h(from)f(which)g(measurement)g(comes)g([158.152.1.76])-98
705 y(4.)60 b(Leap)34 b(status)f(\()p Fj(N)h Fm(means)f(normal,)j
Fj(-)d Fm(means)h(that)e(the)h(last)g(minute)g(of)g(today)h(has)f(61)h
(seconds,)j Fj(+)c Fm(means)30 804 y(that)f(the)h(last)g(minute)g(of)h
(the)e(day)i(has)g(59)f(seconds,)k Fj(?)d Fm(means)g(the)e(remote)i
(computer)f(is)h(not)f(currently)30 904 y(synchronised.\))24
b([N])-98 1027 y(5.)60 b(Stratum)21 b(of)i(remote)g(computer.)f([2])-98
1150 y(6.)60 b(RFC1305)25 b(tests)d(1)h(through)f(4)g(\(1=pass,)i
(0=fail\))g([1111])-98 1273 y(7.)60 b(Tests)32 b(for)g(maximum)e(delay)
j(and)e(maximum)g(delay)h(ratio,)h(against)f(user)f(defined)i
(parameters)f(\(1=pass,)30 1373 y(0=fail\))24 b([11])-98
1496 y(8.)60 b(RFC1305)25 b(tests)d(5)h(through)f(8)g(\(1=pass,)i
(0=fail\))g([1111])-98 1619 y(9.)60 b(Local)24 b(poll)g([10])-143
1742 y(10.)60 b(Remote)24 b(poll)g([10])-143 1864 y(11.)60
b(`Score')30 b(\(an)g(internal)f(score)i(within)e(each)h(polling)h
(level)h(used)e(to)f(decide)i(when)f(to)g(increase)g(or)g(decrease)30
1964 y(the)21 b(polling)i(level.)h(This)e(is)g(adjusted)g(based)h(on)f
(changes)g(to)f(the)g(variance)h(of)g(the)f(measurements)h(obtained)30
2064 y(from)h(the)f(source\).)h([1])-143 2187 y(12.)60
b(The)23 b(estimated)g(local)h(clock)g(error)e(\(`theta')g(in)h
(RFC1305\).)h(Positive)f(indicates)h(that)d(the)h(local)i(clock)g(is)f
(slow.)30 2286 y([-4.966e-03].)-143 2409 y(13.)60 b(The)23
b(peer)h(delay)g(\(`delta')g(in)e(RFC1305\).)i([2.296e-01])-143
2532 y(14.)60 b(The)23 b(peer)h(dispersion)g(\(`epsilon')h(in)e
(RFC1305\).)h([1.577e-05])-143 2655 y(15.)60 b(The)23
b(root)g(delay)h(\(`Delta')f(in)g(RFC1305\).)h([1.615e-01])-143
2778 y(16.)60 b(The)23 b(root)g(dispersion)i(\(`E')e(in)g(RFC1305\).)h
([7.446e-03])-25 3026 y(A)f(banner)f(is)h(periodically)j(written)c(to)h
(the)f(log)i(file)f(to)g(indicate)g(the)g(meanings)g(of)g(the)f
(columns.)-150 3346 y Fg(4.2.11.2)56 b(Statistics)39
b(log)e(file)g(format)-25 3571 y Fm(An)21 b(example)i(line)g(\(which)f
(actually)g(appears)i(as)e(a)g(single)h(line)g(in)f(the)f(file\))i
(from)f(the)f(measurements)h(log)h(file)-150 3670 y(is)g(shown)h
(below.)90 3899 y Fj(22Jul98)56 b(05:40:50)h(158.152.1.76)275
b(6.261e-03)57 b(-3.247e-03)g(\\)361 4002 y(2.220e-03)112
b(1.874e-06)f(1.080e-06)57 b(7.8e-02)111 b(16)163 b(0)g(8)-25
4226 y Fm(The)24 b(columns)g(are)g(as)g(follows)j(\(the)c(quantities)g
(in)h(square)g(brackets)g(are)g(the)f(values)i(from)f(the)f(example)i
(line)-150 4326 y(above\))f(:)-98 4550 y(1.)60 b(Date)23
b([22Jul98])-98 4673 y(2.)60 b(Hour:Minute:Second)27
b([05:40:50].)41 b(Note)29 b(that)e(the)h(date/time)h(pair)g(is)g
(expressed)h(in)f(UTC,)g(not)f(the)f(local)30 4773 y(time)c(zone.)-98
4896 y(3.)60 b(IP)23 b(address)h(of)f(server/peer)h(from)f(which)g
(measurement)g(comes)g([158.152.1.76])-98 5019 y(4.)60
b(The)23 b(estimated)h(standard)f(deviation)g(of)h(the)e(measurements)h
(from)g(the)f(source)h(\(in)g(seconds\).)h([6.261e-03])-98
5142 y(5.)60 b(The)29 b(estimated)h(offset)g(of)g(the)e(source)i(\(in)f
(seconds,)j(positive)e(means)g(the)e(local)j(clock)f(is)g(estimated)g
(to)f(be)30 5241 y(fast,)23 b(in)f(this)h(case\).)g([-3.247e-03])-98
5364 y(6.)60 b(The)23 b(estimated)h(standard)f(deviation)g(of)h(the)e
(offset)h(estimate)g(\(in)g(seconds\).)h([2.220e-03])-98
5487 y(7.)60 b(The)35 b(estimated)g(rate)f(at)f(which)i(the)e(local)j
(clock)g(is)e(gaining)h(or)g(losing)g(time)f(relative)h(to)g(the)e
(source)i(\(in)30 5587 y(seconds)21 b(per)f(second,)h(positive)g(means)
f(the)f(local)i(clock)f(is)h(gaining\).)h(This)e(is)g(relative)g(to)g
(the)f(compensation)30 5687 y(currently)39 b(being)i(applied)h(to)e
(the)g(local)h(clock,)46 b Fh(not)i Fm(to)40 b(the)f(local)j(clock)f
(without)f(any)g(compensation.)30 5786 y([1.874e-06])p
eop
%%Page: 22 24
22 23 bop -150 -116 a Fm(Chapter)23 b(4:)f(Usage)i(reference)2885
b(22)-98 236 y(8.)60 b(The)23 b(estimated)h(error)e(in)h(the)f(rate)g
(value)i(\(in)e(seconds)j(per)e(second\).)g([1.080e-06].)-98
363 y(9.)60 b(The)30 b(ration)f(of)i Fj(|)p Fm(old)p
778 363 28 5 v 33 w(rate)f(-)g(new)p 1226 363 V 33 w(rate)p
Fj(|)f Fm(/)h(old)p 1711 363 V 33 w(rate)p 1898 363 V
33 w(error.)43 b(Large)30 b(values)h(indicate)f(the)f(statistics)i(are)
e(not)30 462 y(modelling)c(the)d(source)h(very)g(well.)h([7.8e-02])-143
589 y(10.)60 b(The)23 b(number)f(of)h(measurements)g(currently)f(being)
h(used)h(for)f(the)f(regression)i(algorithm.)f([16])-143
716 y(11.)60 b(The)36 b(new)g(starting)f(index)h(\(the)g(oldest)g
(sample)i(has)e(index)f(0;)42 b(this)36 b(is)g(the)f(method)h(used)g
(to)g(prune)f(old)30 815 y(samples)e(when)d(it)h(no)g(longer)g(looks)i
(like)f(the)e(measurements)h(fit)g(a)g(linear)g(model\).)48
b([0,)33 b(i.e.)46 b(no)31 b(samples)30 915 y(discarded)25
b(this)d(time])-143 1042 y(12.)60 b(The)23 b(number)e(of)i(runs.)e(The)
i(number)e(of)i(runs)f(of)g(regression)i(residuals)g(with)e(the)g(same)
h(sign)g(is)g(computed.)30 1141 y(If)28 b(this)f(is)i(too)e(small)i(it)
e(indicates)i(that)e(the)g(measurements)g(are)h(no)g(longer)g
(represented)h(well)g(by)f(a)f(linear)30 1241 y(model)d(and)f(that)e
(some)j(older)g(samples)g(need)g(to)e(be)h(discarded.)i(The)e(number)f
(of)h(runs)f(for)h(the)f(data)h(that)e(is)30 1340 y(being)h(retained)g
(is)g(tabulated.)g(Values)g(of)g(approximately)h(half)f(the)e(number)h
(of)h(samples)h(are)f(expected.)g([8])-25 1594 y(A)h(banner)f(is)h
(periodically)j(written)c(to)h(the)f(log)i(file)f(to)g(indicate)g(the)g
(meanings)g(of)g(the)f(columns.)-150 1924 y Fg(4.2.11.3)56
b(Tracking)39 b(log)e(file)g(format)-25 2150 y Fm(An)21
b(example)i(line)g(\(which)f(actually)g(appears)i(as)e(a)g(single)h
(line)g(in)f(the)f(file\))i(from)f(the)f(measurements)h(log)h(file)-150
2249 y(is)g(shown)h(below.)90 2480 y Fj(22Jul98)56 b(05:40:50)h
(158.152.1.76)275 b(3)218 b(340.529)327 b(1.606)110 b(1.046e-03)-25
2706 y Fm(The)24 b(columns)g(are)g(as)g(follows)j(\(the)c(quantities)g
(in)h(square)g(brackets)g(are)g(the)f(values)i(from)f(the)f(example)i
(line)-150 2806 y(above\))f(:)-98 3032 y(1.)60 b(Date)23
b([22Jul98])-98 3159 y(2.)60 b(Hour:Minute:Second)27
b([05:40:50].)41 b(Note)29 b(that)e(the)h(date/time)h(pair)g(is)g
(expressed)h(in)f(UTC,)g(not)f(the)f(local)30 3258 y(time)c(zone.)-98
3385 y(3.)60 b(The)23 b(IP)g(address)h(of)f(the)f(server/peer)i(to)f
(which)g(the)f(local)i(system)g(is)f(synchronised.)h([158.152.1.76])-98
3511 y(4.)60 b(The)23 b(stratum)f(of)h(the)f(local)i(system.)f([3])-98
3638 y(5.)60 b(The)23 b(local)h(system)g(frequency)e(\(in)h(ppm,)g
(positive)h(means)g(the)e(local)i(system)f(runs)f(fast)h(of)g(UTC\).)h
([340.529])-98 3765 y(6.)60 b(The)23 b(error)g(bounds)g(on)f(the)h
(frequency)f(\(in)h(ppm\))g([1.606])-98 3891 y(7.)60
b(The)25 b(estimated)h(local)g(offset)g(at)f(the)f(epoch)i(\(which)f
(is)h(rapidly)g(corrected)g(by)f(slewing)i(the)d(local)i(clock.)31
b(\(In)30 3991 y(seconds,)24 b(positive)g(indicates)g(the)e(local)i
(system)g(is)f(fast)g(of)g(UTC\).)h([1.046e-3])-25 4244
y(A)f(banner)f(is)h(periodically)j(written)c(to)h(the)f(log)i(file)f
(to)g(indicate)g(the)g(meanings)g(of)g(the)f(columns.)-150
4574 y Fg(4.2.11.4)56 b(Real-time)38 b(clock)f(log)h(file)f(format)-25
4800 y Fm(An)21 b(example)i(line)g(\(which)f(actually)g(appears)i(as)e
(a)g(single)h(line)g(in)f(the)f(file\))i(from)f(the)f(measurements)h
(log)h(file)-150 4900 y(is)g(shown)h(below.)90 5130 y
Fj(22Jul98)56 b(05:40:50)274 b(-0.037360)57 b(1)381 b(-0.037434\\)633
5234 y(-37.948)111 b(12)163 b(5)109 b(120)-25 5460 y
Fm(The)24 b(columns)g(are)g(as)g(follows)j(\(the)c(quantities)g(in)h
(square)g(brackets)g(are)g(the)f(values)i(from)f(the)f(example)i(line)
-150 5560 y(above\))f(:)-98 5786 y(1.)60 b(Date)23 b([22Jul98])p
eop
%%Page: 23 25
23 24 bop -150 -116 a Fm(Chapter)23 b(4:)f(Usage)i(reference)2885
b(23)-98 236 y(2.)60 b(Hour:Minute:Second)27 b([05:40:50].)41
b(Note)29 b(that)e(the)h(date/time)h(pair)g(is)g(expressed)h(in)f(UTC,)
g(not)f(the)f(local)30 336 y(time)c(zone.)-98 463 y(3.)60
b(The)32 b(measured)h(offset)f(between)h(the)e(system's)i(real)f(time)g
(clock)h(and)f(the)f(system)i(\()p Fj(gettimeofday\(\))p
Fm(\))30 563 y(time.)22 b(In)h(seconds,)h(positive)g(indicates)g(that)e
(the)g(RTC)i(is)f(fast)g(of)g(the)f(system)i(time.)e([-0.037360].)-98
690 y(4.)60 b(Flag)24 b(indicating)f(whether)g(the)f(regression)i(has)f
(produced)h(valid)g(coefficients.)g(\(1)f(for)g(yes,)g(0)g(for)g(no\).)
f([1])-98 817 y(5.)60 b(Offset)32 b(at)f(the)g(current)f(time)h
(predicted)i(by)e(the)g(regression)i(process.)50 b(A)31
b(large)h(difference)h(between)f(this)30 916 y(value)23
b(and)h(the)e(measured)i(offset)f(tends)g(to)g(indicate)h(that)d(the)i
(measurement)g(is)g(an)g(outlier)g(with)g(a)g(serious)30
1016 y(measurement)g(error.)f([-0.037434].)-98 1143 y(6.)60
b(The)31 b(rate)f(at)h(which)g(the)f(RTC)h(is)h(losing)g(or)e(gaining)i
(time)e(relative)i(to)e(the)h(system)g(clock.)47 b(In)31
b(ppm,)i(with)30 1243 y(positive)24 b(indicating)g(that)d(the)i(RTC)g
(is)h(gaining)f(time.)f([-37.948])-98 1370 y(7.)60 b(The)23
b(number)f(of)h(measurements)g(used)g(in)g(the)f(regression.)i([12])-98
1497 y(8.)60 b(The)26 b(number)f(of)h(runs)f(of)h(regression)h
(residuals)g(of)f(the)f(same)i(sign.)k(Low)c(values)g(indicate)f(that)f
(a)g(straight)30 1596 y(line)35 b(is)f(no)g(longer)h(a)f(good)h(model)g
(of)g(the)e(measured)i(data)f(and)g(that)f(older)i(measurements)f
(should)h(be)30 1696 y(discarded.)24 b([5])-98 1823 y(9.)60
b(The)23 b(measurement)g(interval)g(used)g(prior)g(to)g(the)f
(measurement)g(being)i(made)f(\(in)g(seconds\).)h([120])-25
2077 y(A)f(banner)f(is)h(periodically)j(written)c(to)h(the)f(log)i
(file)f(to)g(indicate)g(the)g(meanings)g(of)g(the)f(columns.)-150
2409 y Fg(4.2.12)56 b(logdir)-25 2636 y Fm(This)23 b(command)g(allows)i
(the)d(directory)i(where)f(log)h(files)g(are)f(written)f(to)g(be)h
(specified.)-25 2862 y(An)f(example)i(of)f(the)f(use)h(of)g(this)g
(command)g(is)90 3093 y Fj(logdir)56 b(/var/log/chrony)-150
3425 y Fg(4.2.13)g(manual)-25 3651 y Fm(The)37 b Fj(manual)h
Fm(directive)g(enables)g(support)f(at)f(run-time)g(for)h(the)f
Fj(settime)i Fm(command)f(in)g(chronyc)g(\(see)-150 3751
y(Section)26 b(4.3.4.31)g([settime)h(command],)g(page)g(37\).)33
b(If)27 b(no)f Fj(manual)i Fm(directive)f(is)g(included,)g(any)f
(attempt)g(to)g(use)-150 3851 y(the)c Fj(settime)j Fm(command)e(in)g
(chronyc)f(will)j(be)e(met)f(with)h(an)f(error)h(message.)-25
4077 y(Note)38 b(that)f(the)h Fj(settime)i Fm(command)e(can)h(be)f
(enabled)h(at)f(run-time)g(using)g(the)f Fj(manual)j
Fm(command)f(in)-150 4177 y(chronyc)32 b(\(see)g(Section)f(4.3.4.20)h
([manual)g(command],)h(page)g(32\).)49 b(\(The)32 b(idea)h(of)f(the)f
(two)h(commands)g(is)g(that)-150 4277 y(the)21 b Fj(manual)i
Fm(command)e(controls)h(the)f(manual)g(clock)h(driver's)h(behaviour,)e
(whereas)i(the)d Fj(settime)j Fm(command)-150 4376 y(allows)i(samples)f
(of)g(manually)f(entered)g(time)f(to)h(be)g(provided\).)-150
4708 y Fg(4.2.14)56 b(maxupdateskew)-25 4934 y Fm(One)33
b(of)g Fj(chronyd's)j Fm(tasks)e(is)f(to)g(work)h(out)f(how)g(fast)h
(or)f(slow)h(the)f(computer's)g(clock)i(runs)d(relative)i(to)-150
5034 y(its)28 b(reference)g(sources.)39 b(In)27 b(addition,)j(it)d
(computes)i(an)e(estimate)i(of)f(the)f(error)g(bounds)h(around)g(the)f
(estimated)-150 5134 y(value.)-25 5360 y(If)21 b(the)f(range)h(of)g
(error)g(is)g(too)g(large,)h(it)f(probably)h(indicates)g(that)d(the)h
(measurements)h(have)h(not)e(settled)h(down)-150 5460
y(yet,)h(and)h(that)f(the)g(estimated)h(gain)h(or)e(loss)i(rate)f(is)g
(not)f(very)i(reliable.)-25 5687 y(The)c Fj(maxupdateskew)k
Fm(parameter)c(allows)i(the)e(threshold)g(for)h(determining)f(whether)g
(an)g(estimate)g(may)h(be)-150 5786 y(so)i(unreliable)h(that)e(it)g
(should)h(not)f(be)h(used.)p eop
%%Page: 24 26
24 25 bop -150 -116 a Fm(Chapter)23 b(4:)f(Usage)i(reference)2885
b(24)-25 236 y(The)23 b(syntax)f(is)90 466 y Fj(maxupdateskew)58
b(<skew-in-ppm>)-25 692 y Fm(Typical)29 b(values)f(for)g
Fj(<)p Fm(skew-in-ppm)p Fj(>)i Fm(might)d(be)h(100)g(for)g(a)f(dial-up)
i(connection)e(to)h(servers)g(over)g(a)g(phone)-150 791
y(line,)23 b(and)g(5)g(or)f(10)i(for)e(a)h(computer)g(on)g(a)g(LAN.)-25
1017 y(It)i(should)g(be)h(noted)f(that)f(this)h(is)h(not)e(the)h(only)h
(means)f(of)h(protection)f(against)h(using)f(unreliable)h(estimates.)
-150 1116 y(At)e(all)i(times,)f Fj(chronyd)i Fm(keeps)f(track)e(of)h
(both)g(the)f(estimated)h(gain)g(or)g(loss)h(rate,)e(and)h(the)f(error)
g(bound)h(on)f(the)-150 1216 y(estimate.)d(When)e(a)g(new)g(estimate)g
(is)h(generated)f(following)i(another)d(measurement)h(from)f(one)h(of)h
(the)e(sources,)i(a)-150 1316 y(weighted)j(combination)f(algorithm)g
(is)g(used)g(to)f(update)h(the)f(master)g(estimate.)i(So)e(if)h
Fj(chronyd)h Fm(has)f(an)f(existing)-150 1415 y(highly-reliable)35
b(master)d(estimate)h(and)g(a)f(new)h(estimate)g(is)g(generated)g
(which)g(has)f(large)h(error)g(bounds,)h(the)-150 1515
y(existing)23 b(master)g(estimate)g(will)h(dominate)g(in)e(the)g(new)h
(master)g(estimate.)-150 1843 y Fg(4.2.15)56 b(peer)-25
2069 y Fm(The)26 b(syntax)h(of)f(this)h(directive)g(is)g(identical)h
(to)e(that)f(for)i(the)f Fj(server)i Fm(directive)g(\(see)f(Section)g
(4.2.19)f([server)-150 2168 y(directive],)e(page)g(25\),)e(except)h
(that)f(it)g(is)i(used)f(to)g(specify)h(an)f(NTP)g(peer)g(rather)f
(than)g(an)g(NTP)h(server.)-150 2496 y Fg(4.2.16)56 b(port)-25
2722 y Fm(This)23 b(option)g(allows)i(you)e(to)g(configure)g(the)f
(port)h(used)g(for)g(the)f(NTP)h(service)h(on)f(your)f(machine.)-25
2948 y(The)e(compiled)i(in)d(default)i(is)f(udp/123,)h(the)e(standard)h
(NTP)g(port.)h(It)f(is)h(unlikely)g(that)d(you)i(would)h(ever)f(need)
-150 3047 y(to)29 b(change)h(this)g(value.)43 b(A)30
b(possible)i(exception)e(would)g(be)g(if)g(you)g(wanted)g(to)f(operate)
i(strictly)e(in)h(client-only)-150 3147 y(mode)24 b(and)e(never)h(be)g
(available)i(as)e(a)g(server)h(to)e(xntpd)g(clients.)-25
3372 y(An)g(example)i(of)f(the)f(port)h(command)g(is)90
3602 y Fj(port)55 b(11123)-25 3828 y Fm(This)23 b(would)h(change)f(the)
f(NTP)h(port)g(served)g(by)g(chronyd)g(on)g(the)f(computer)h(to)f
(udp/11123.)-150 4156 y Fg(4.2.17)56 b(rtcfile)-25 4382
y Fm(The)43 b Fj(rtcfile)i Fm(directive)f(defines)h(the)d(name)h(of)h
(the)e(file)j(in)e(which)g Fj(chronyd)i Fm(can)e(save)h(parameters)-150
4481 y(associated)25 b(with)e(tracking)f(the)h(accuracy)g(of)g(the)f
(system's)i(real-time)g(clock)g(\(RTC\).)-25 4707 y(The)f(syntax)f(is)h
(illustrated)h(in)e(the)g(following)j(example)90 4937
y Fj(rtcfile)56 b(/etc/chrony.rtc)-25 5162 y(chronyd)27
b Fm(saves)f(information)f(in)g(this)g(file)h(when)f(it)g(exits)g(and)h
(when)f(the)f Fj(writertc)j Fm(command)f(is)g(issued)-150
5262 y(in)k Fj(chronyc)p Fm(.)47 b(The)31 b(information)f(saved)i(is)f
(the)e(RTC's)j(error)e(at)g(some)h(epoch,)i(that)c(epoch)i(\(in)f
(seconds)i(since)-150 5361 y(January)23 b(1)f(1970\),)i(and)f(the)f
(rate)g(at)h(which)g(the)f(RTC)h(gains)h(or)f(loses)h(time.)-25
5587 y(So)f(far,)g(the)g(support)h(for)f(real-time)h(clocks)i(is)e
(limited)g(-)f(their)g(code)i(is)f(even)g(more)g(system-specific)i
(than)c(the)-150 5687 y(rest)i(of)h(the)f(software.)29
b(You)c(can)f(only)h(use)g(the)f(real)h(time)f(clock)i(facilities)h
(\(the)d Fj(rtcfile)i Fm(directive)g(and)e(the)g Fj(-s)-150
5786 y Fm(command)f(line)h(option)f(to)f Fj(chronyd)p
Fm(\))j(if)e(the)f(following)j(three)e(conditions)h(apply:)p
eop
%%Page: 25 27
25 26 bop -150 -116 a Fm(Chapter)23 b(4:)f(Usage)i(reference)2885
b(25)-98 236 y(1.)60 b(You)23 b(are)g(running)f(Linux)g(v2.0.x)g(with)g
(x)p Fj(>)p Fm(=32.)-98 360 y(2.)60 b(You)24 b(have)g(compiled)i(the)d
(kernel)i(with)e(extended)h(real-time)h(clock)g(support)f(\(i.e.)i(the)
d(`)p Fj(/dev/rtc)p Fm(')j(device)30 460 y(is)d(capable)i(of)e(doing)h
(useful)e(things\).)-98 584 y(3.)60 b(You)23 b(don't)g(have)g(other)f
(applications)j(that)c(need)j(to)e(make)i(use)f(of)g(`)p
Fj(/dev/rtc)p Fm(')i(at)d(all.)-150 908 y Fg(4.2.18)56
b(rtconutc)-25 1132 y Fj(chronyd)45 b Fm(assumes)f(by)g(default)f(that)
f(the)h(real)h(time)f(clock)i(\(RTC\))f(keeps)h(local)g(time)e
(\(including)h(any)-150 1231 y(daylight)25 b(saving)h(changes\).)i
(This)d(is)g(convenient)f(on)h(PCs)f(running)f(Linux)h(which)h(are)f
(dual-booted)i(with)e(DOS)-150 1331 y(or)f(Windows.)-25
1555 y(An)f(alternative)h(is)h(for)e(the)h(RTC)g(to)g(keep)h(Universal)
g(Coordinated)g(Time)g(\(UTC\).)-25 1779 y(If)h(the)f
Fj(rtconutc)i Fm(directive)g(appears,)g(it)e(means)h(the)f(RTC)i(is)f
(required)f(to)h(keep)h(UTC.)f(The)g(directive)g(takes)-150
1879 y(no)e(arguments.)f(It)g(is)i(equivalent)e(to)h(specifying)i(the)d
Fj(-u)h Fm(switch)g(to)g(the)f(Linux)g(`)p Fj(/sbin/clock)p
Fm(')k(program.)-150 2202 y Fg(4.2.19)56 b(server)-25
2426 y Fm(The)24 b Fj(server)i Fm(directive)g(allows)g(NTP)f(servers)g
(to)f(be)h(specified.)k(The)c(client/server)g(relationship)h(is)f
(strictly)-150 2526 y(hierarchical)31 b(:)38 b(a)30 b(client)h(may)f
(synchronise)i(its)e(system)h(time)f(to)h(that)e(of)i(the)e(server,)k
(but)c(the)h(server's)h(system)-150 2626 y(time)23 b(will)h(never)f(be)
g(influenced)g(by)g(that)f(of)h(a)g(client.)-25 2850
y(The)28 b Fj(server)h Fm(directive)f(is)h(immediately)g(followed)h(by)
e(either)g(the)f(name)g(of)h(the)f(server,)i(or)f(its)g(IP)f(address)
-150 2949 y(in)k(dotted-quad)g(notation.)47 b(The)31
b(server)h(command)f(also)i(supports)e(a)h(number)e(of)h(subfields)i
(\(which)e(may)h(be)-150 3049 y(defined)24 b(in)f(any)g(order\):)-150
3298 y Fj(port)264 b Fm(This)34 b(option)h(allows)g(the)e(UDP)h(port)g
(on)f(which)h(the)f(server)h(understands)g(NTP)g(requests)f(to)h(be)330
3397 y(specified.)47 b(For)30 b(normal)g(servers)h(this)f(option)h
(should)f(not)g(be)g(required)g(\(the)f(default)i(is)f(123,)i(the)330
3497 y(standard)23 b(NTP)g(port\).)-150 3646 y Fj(minpoll)102
b Fm(Although)43 b Fj(chronyd)i Fm(will)f(trim)e(the)h(rate)g(at)f
(which)h(it)g(samples)i(the)d(server)i(during)f(normal)330
3746 y(operation,)31 b(the)d(user)g(may)h(wish)h(to)e(constrain)h(the)f
(minimum)g(polling)i(interval.)40 b(This)30 b(is)f(always)330
3845 y(defined)h(as)f(a)f(power)i(of)f(2,)h(so)f Fj(<)p
Fm(tt/minpoll)g(5/)f(would)i(mean)e(that)g(the)f(polling)k(interval)d
(cannot)330 3945 y(drop)23 b(below)i(32)e(seconds.)h(The)f(default)g
(is)g(6)g(\(64)g(seconds\).)-150 4094 y Fj(maxpoll)102
b Fm(In)20 b(a)h(similar)h(way,)f(the)f(user)g(may)h(wish)g(to)f
(constrain)g(the)g(maximum)g(polling)i(interval.)g(Again)f(this)330
4193 y(is)g(specified)i(as)e(a)g(power)h(of)f(2,)f(so)i
Fj(<)p Fm(tt/maxpoll)e(9/)h(indicates)h(that)d(the)h(polling)i
(interval)f(must)f(stay)330 4293 y(at)i(or)h(below)h(512)g(seconds.)g
(The)f(default)g(is)g(10)g(\(1024)h(seconds\).)-150 4442
y Fj(maxdelay)330 4541 y(chronyd)34 b Fm(uses)e(the)f(network)h
(round-trip)g(delay)h(to)f(the)f(server)h(to)g(determine)g(how)g
(accurate)g(a)330 4641 y(particular)c(measurement)f(is)h(likely)h(to)f
(be.)37 b(Long)28 b(round-trip)f(delays)i(indicate)g(that)d(the)h
(request,)330 4741 y(or)38 b(the)g(response,)43 b(or)38
b(both)f(were)i(delayed.)71 b(If)38 b(only)h(one)f(of)h(the)e(messages)
j(was)f(delayed)h(the)330 4840 y(measurement)23 b(error)f(is)i(likely)g
(to)f(be)g(substantial.)330 4965 y(For)48 b(small)g(variations)h(in)e
(round)g(trip)g(delay,)55 b Fj(chronyd)49 b Fm(uses)f(a)f(weighting)i
(scheme)f(when)330 5064 y(processing)19 b(the)e(measurements.)j
(However,)g(beyond)e(a)f(certain)g(level)i(of)f(delay)g(the)f
(measurements)330 5164 y(are)28 b(likely)i(to)e(be)h(so)g(corrupted)f
(as)g(to)g(be)h(useless.)40 b(\(This)29 b(is)g(particularly)g(so)g(on)f
(dial-up)h(or)f(other)330 5263 y(slow)j(links,)g(where)f(a)f(long)h
(delay)g(probably)h(indicates)f(a)f(highly)h(asymmetric)g(delay)h
(caused)f(by)330 5363 y(the)22 b(response)i(waiting)g(behind)f(a)g(lot)
g(of)g(packets)h(related)f(to)g(a)g(download)h(of)f(some)h(sort\).)330
5487 y(If)15 b(the)g(user)g(knows)g(that)g(round)g(trip)g(delays)g
(above)g(a)g(certain)g(level)g(should)g(cause)g(the)g(measurement)330
5587 y(to)40 b(be)h(ignored,)k(this)40 b(level)i(can)e(be)h(defined)g
(with)g(the)e(maxdelay)j(command.)75 b(For)41 b(example,)330
5687 y Fj(<)p Fm(tt/maxdelay)h(0.3/)f(would)h(indicate)h(that)d
(measurements)h(with)h(a)f(round-trip)g(delay)i(of)f(0.3)330
5786 y(seconds)24 b(or)f(more)g(should)g(be)g(ignored.)p
eop
%%Page: 26 28
26 27 bop -150 -116 a Fm(Chapter)23 b(4:)f(Usage)i(reference)2885
b(26)-150 236 y Fj(maxdelayratio)330 336 y Fm(This)38
b(option)g(is)g(similar)h(to)e(the)g(maxdelay)i(option)f(above.)67
b Fj(chronyd)40 b Fm(keeps)f(a)f(record)g(of)f(the)330
435 y(minimum)29 b(round-trip)h(delay)h(amongst)g(the)e(previous)i
(measurements)f(that)f(it)h(has)g(buffered.)44 b(If)330
535 y(a)32 b(measurement)h(has)f(a)h(round)e(trip)i(delay)g(that)f(is)g
(greater)h(than)e(the)h(maxdelayratio)i(times)e(the)330
635 y(minimum)22 b(delay,)i(it)e(will)j(be)e(rejected.)-150
791 y Fj(presend)102 b Fm(If)28 b(the)g(timing)g(measurements)g(being)g
(made)h(by)f Fj(chronyd)i Fm(are)e(the)f(only)i(network)f(data)g
(passing)330 891 y(between)k(two)f(computers,)i(you)e(may)g(find)h
(that)d(some)j(measurements)f(are)h(badly)g(skewed)h(due)330
990 y(to)27 b(either)h(the)f(client)h(or)f(the)g(server)h(having)g(to)f
(do)i(an)e(ARP)h(lookup)h(on)e(the)g(other)g(party)h(prior)g(to)330
1090 y(transmitting)21 b(a)g(packet.)i(This)g(is)f(more)g(of)g(a)g
(problem)h(with)e(long)h(sampling)i(intervals,)e(which)g(may)330
1190 y(be)h(similar)h(in)f(duration)f(to)g(the)h(lifetime)g(of)h
(entries)f(in)f(the)g(ARP)h(caches)h(of)f(the)f(machines.)330
1317 y(In)41 b(order)g(to)g(avoid)h(this)f(problem,)46
b(the)40 b Fj(presend)j Fm(option)f(may)f(be)g(used.)77
b(It)41 b(takes)h(a)f(single)330 1417 y(integer)29 b(argument,)h(which)
f(is)h(the)f(smallest)h(polling)h(interval)f(for)f(which)g(a)h(pair)f
(of)h(packets)h(will)330 1517 y(be)i(exchanged)g(between)h(the)e
(client)g(and)h(the)f(server)i(prior)f(to)f(the)g(actual)h(measurement)
f(being)330 1616 y(initiated)37 b(by)g(the)g(client.)65
b(For)37 b(example,)k(with)c(the)f(following)j(option)f(included)f(in)g
(a)g Fj(server)330 1716 y Fm(directive)24 b(:)570 1848
y Fj(presend)56 b(9)330 1976 y Fm(when)21 b(the)g(polling)i(interval)f
(is)g(512)g(seconds)h(or)e(more,)g(a)h(UDP)f(echo)h(datagram)g(will)h
(be)e(sent)g(to)g(the)330 2076 y(server)i(a)g(short)f(time)h
(\(currently)f(4)h(seconds\))i(before)e(the)f(NTP)h(client)g(mode)h
(datagram.)-150 2232 y Fj(key)318 b Fm(The)15 b(NTP)g(protocol)g
(supports)g(the)g(inclusion)g(of)g(checksums)g(in)g(the)g(packets,)i
(to)e(prevent)g(computers)330 2332 y(having)27 b(their)f(system)i(time)
f(upset)g(by)g(rogue)g(packets)h(being)f(sent)g(to)g(them.)34
b(The)27 b(checksums)h(are)330 2431 y(generated)23 b(as)h(a)f(function)
f(of)h(a)g(password,)h(using)f(the)f(MD5)h(algorithm.)330
2559 y(The)d(association)i(between)e(key)h(numbers)e(and)h(passwords)i
(is)f(contained)f(in)f(the)h(keys)h(file,)g(defined)330
2659 y(by)i(the)f(keyfile)j(command.)330 2787 y(If)36
b(the)e(key)i(option)g(is)g(present,)i Fj(chronyd)f Fm(will)g(attempt)e
(to)g(use)g(authenticated)f(packets)j(when)330 2886 y(communicating)24
b(with)f(this)h(server.)i(The)e(key)g(number)f(used)h(will)h(be)f(the)f
(single)i(argument)e(to)g(the)330 2986 y(key)33 b(option.)52
b(The)33 b(server)g(must)f(have)h(the)f(same)h(password)i(for)d(this)g
(key)i(number)d(configured,)330 3086 y(otherwise)24 b(no)f
(relationship)g(between)h(the)e(computers)h(will)h(be)f(possible.)-150
3242 y Fj(offline)102 b Fm(If)33 b(the)f(server)i(will)g(not)e(be)h
(reachable)h(when)e Fj(chronyd)j Fm(is)e(started,)i(the)d(offline)i
(option)g(may)f(be)330 3342 y(specified.)27 b Fj(chronyd)f
Fm(will)f(not)e(try)g(to)g(poll)i(the)e(server)h(until)f(it)g(is)h
(enabled)h(to)f(do)g(so)g(\(by)g(using)f(the)330 3441
y(online)g(option)h(of)f Fj(chronyc)p Fm(\).)-150 3812
y Fl(4.3)59 b(Running)41 b(chronyc)-25 4040 y Fm(Chronyc)35
b(is)i(the)e(program)h(that)f(can)h(be)g(used)g(to)g(reconfigure)g
(options)h(within)e(the)h Fj(chronyd)h Fm(program)-150
4139 y(whilst)i(it)f(is)h(running.)67 b(Chronyc)39 b(can)f(also)h(be)g
(used)g(to)f(generate)g(status)g(reports)h(about)f(the)f(operation)i
(of)-150 4239 y Fj(chronyd)p Fm(.)-150 4573 y Fg(4.3.1)55
b(Basic)38 b(use)-25 4800 y Fm(The)23 b(program)g(chronyc)g(is)g(run)f
(by)h(entering)90 5032 y Fj(chronyc)-25 5260 y Fm(at)29
b(the)f(command)i(line.)43 b(The)30 b(prompt)f Fj(chronyc)j
Fm(is)e(displayed)i(whilst)e(chronyc)f(is)h(expecting)g(input)f(from)
-150 5359 y(the)d(user,)i(when)f(it)f(is)i(being)f(run)f(from)h(a)g
(terminal.)34 b(If)28 b(chronyc's)f(input)g(or)f(output)g(are)h
(redirected)h(from/to)f(a)-150 5459 y(file,)c(the)g(prompt)f(is)i(ow)f
(shown.)-25 5687 y(When)40 b(you)h(are)g(finished)h(entering)f
(commands,)46 b(the)40 b(commands)h Fj(exit)h Fm(or)f
Fj(quit)h Fm(will)g(terminate)e(the)-150 5786 y(program.)23
b(\(Entering)645 5783 y Fe(h)p 669 5730 300 4 v 669 5786
a Fd(Control-D)p 669 5802 V 964 5783 a Fe(i)1017 5786
y Fm(will)h(also)g(terminate)e(the)g(program.\))p eop
%%Page: 27 29
27 28 bop -150 -116 a Fm(Chapter)23 b(4:)f(Usage)i(reference)2885
b(27)-150 236 y Fg(4.3.2)55 b(Command)38 b(line)f(options)-25
467 y Fm(Chronyc)22 b(supports)i(the)e(following)j(command)e(line)g
(options.)-150 729 y Fj(-v)372 b Fm(Displays)25 b(the)d(version)i
(number)e(of)h(chronyc)g(on)f(the)g(terminal,)h(and)g(exists.)-150
892 y Fj(-h)g(<host>)330 991 y Fm(This)j(option)g(allows)i(the)c(user)i
(to)f(specify)i(which)f(host)f(running)f(the)h Fj(chronyd)i
Fm(program)f(is)g(to)g(be)330 1091 y(contacted.)31 b(This)26
b(allows)i(for)d(remote)h(configuration,)g(without)f(having)h(to)f
(telnet)g(or)h(rlogin)g(to)f(the)330 1190 y(other)d(host)h(first.)330
1322 y(The)35 b(default)g(is)g(to)f(contact)h Fj(chronyd)h
Fm(running)e(on)g(the)g(same)i(host)e(as)h(that)f(where)h(chronyc)f(is)
330 1421 y(being)23 b(run.)-150 1584 y Fj(-p)g(<port>)330
1683 y Fm(This)i(option)f(allows)i(the)e(user)f(to)h(specify)i(the)d
(UDP)h(port)g(number)f(which)i(the)e(target)g Fj(chronyd)j
Fm(is)330 1783 y(using)19 b(for)f(its)h(command)g(&)g(monitoring)g
(connections.)i(This)f(defaults)f(to)f(the)g(compiled-in)j(default;)330
1883 y(there)h(would)i(rarely)f(be)g(a)g(need)g(to)g(change)g(this.)
-150 2226 y Fg(4.3.3)55 b(Security)39 b(with)e(chronyc)-25
2457 y Fm(Many)23 b(of)h(the)e(commands)j(available)g(through)d
(chronyc)i(have)g(a)f(fair)h(amount)f(of)g(power)i(to)e(reconfigure)h
(the)-150 2556 y(run-time)i(behaviour)i(of)g Fj(chronyd)p
Fm(.)38 b(Consequently,)29 b Fj(chronyc)g Fm(is)f(quite)f(dangerous)h
(for)g(the)e(integrity)i(of)f(the)-150 2656 y(target)e(system's)h
(clock)h(performance.)k(Having)26 b(access)g(to)f Fj(chronyd)j
Fm(via)d(chronyc)h(is)g(more)f(or)g(less)i(equivalent)-150
2756 y(to)20 b(being)g(able)h(to)f(modify)h Fj(chronyd's)i
Fm(configuration)d(file)h(\(typically)h(`)p Fj(/etc/chrony.conf)p
Fm('\))j(and)20 b(to)g(restart)-150 2855 y Fj(chronyd)p
Fm(.)-25 3086 y(Chronyc)30 b(also)h(provides)h(a)f(number)e(of)i
(monitoring)f(\(as)h(opposed)i(to)d(commanding\))h(commands,)i(which)
-150 3186 y(will)i(not)e(affect)i(the)e(behaviour)h(of)g
Fj(chronyd)p Fm(.)58 b(However,)38 b(you)c(may)g(still)g(want)g(to)f
(restrict)h(access)h(to)f(these)-150 3285 y(commands.)-25
3516 y(In)19 b(view)i(of)f(this,)g(access)h(to)e(some)i(of)f(the)f
(capabilities)j(of)e(chronyc)g(will)g(usually)h(be)f(tightly)f
(controlled.)j(There)-150 3616 y(are)h(two)g(mechanisms)h(supported:)
-98 3846 y(1.)60 b(The)41 b(set)g(of)g(hosts)g(from)g(which)g
Fj(chronyd)h Fm(will)g(accept)g(commands)f(can)g(be)g(restricted.)77
b(By)41 b(default,)30 3946 y(commands)24 b(will)g(only)f(be)g(accepted)
h(from)f(the)f(same)i(host)e(that)g Fj(chronyd)i Fm(is)g(running)d(on.)
-98 4077 y(2.)60 b(Any)39 b(command)h(that)d(actually)j(reconfigures)g
(some)g(aspect)f(of)h Fj(chronyd's)h Fm(behaviour)f(requires)e(the)30
4177 y(user)45 b(of)g(chronyc)f(to)h(know)g(a)g(password.)90
b(This)45 b(password)i(is)e(specified)i(in)e Fj(chronyd's)i
Fm(keys)f(file)30 4276 y(\(see)36 b(Section)e(4.2.9)h([keyfile)h
(directive],)j(page)d(19\))f(and)g(specified)i(via)e(the)f(commandkey)i
(option)f(in)g(its)30 4376 y(configuration)23 b(file)h(\(see)g(Section)
e(4.2.2)h([commandkey)h(directive],)g(page)g(16\).)-25
4638 y(Only)f(the)f(following)j(commands)e(can)g(be)g(used)g
Fh(without)31 b Fm(providing)24 b(a)f(password:)-75 4869
y Fk(\017)60 b Fj(exit)-75 5000 y Fk(\017)g Fj(help)-75
5131 y Fk(\017)g Fj(password)-75 5262 y Fk(\017)g Fj(quit)-75
5393 y Fk(\017)g Fj(rtcdata)-75 5524 y Fk(\017)g Fj(sources)-75
5655 y Fk(\017)g Fj(sourcestats)-75 5786 y Fk(\017)g
Fj(tracking)p eop
%%Page: 28 30
28 29 bop -150 -116 a Fm(Chapter)23 b(4:)f(Usage)i(reference)2885
b(28)-25 236 y(All)34 b(other)g(commands)h(require)e(a)i(password)h(to)
d(have)i(been)f(specified)j(previously,)h(because)d(they)e(affect)-150
336 y Fj(chronyd's)25 b Fm(operation.)-150 668 y Fg(4.3.4)55
b(Command)38 b(reference)-25 895 y Fm(This)20 b(section)h(describes)h
(each)e(of)g(the)g(commands)h(available)h(within)d(the)h(chronyc)g
(program.)i(Chronyc)e(offers)-150 994 y(the)i(user)h(a)g(simple)h
(command-line)g(driven)f(interface.)-150 1326 y Fg(4.3.4.1)56
b(accheck)-25 1553 y Fm(This)23 b(command)g(allows)i(you)e(to)f(check)i
(whether)e(client)h(NTP)g(access)h(is)g(allowed)h(from)e(a)f
(particular)h(host.)-25 1780 y(Examples)h(of)f(use,)f(showing)i(a)f
(named)g(host)g(and)g(a)g(numeric)f(IP)h(address,)h(are)f(as)g
(follows:)90 2011 y Fj(accheck)56 b(a.b.c)90 2115 y(accheck)g(1.2.3.4)
-25 2342 y Fm(This)23 b(command)f(can)h(be)f(used)h(to)f(examine)h(the)
e(effect)i(of)g(a)f(series)i(of)f Fj(allow)p Fm(,)g Fj(allow)h(all)p
Fm(,)f Fj(deny)g Fm(and)g Fj(deny)-150 2441 y(all)h Fm(commands)f
(specified)i(either)e(via)g(chronyc,)g(or)g(in)f Fj(chronyd's)j
Fm(configuration)f(file.)-150 2773 y Fg(4.3.4.2)56 b(add)37
b(peer)-25 3000 y Fm(The)23 b Fj(add)g(peer)h Fm(command)f(allows)i(a)e
(new)g(NTP)g(peer)g(to)g(be)g(added)h(whilst)f Fj(chronyd)i
Fm(is)e(running.)-25 3227 y(Following)j(the)e(words)i
Fj(add)d(peer)p Fm(,)j(the)e(syntax)g(of)h(the)f(following)i
(parameters)g(and)e(options)h(is)h(identical)f(to)-150
3327 y(that)d(for)g(the)h Fj(peer)g Fm(directive)h(in)f(the)f
(configuration)h(file)h(\(see)g(Section)e(4.2.15)h([peer)h(directive],)
f(page)h(24\).)-25 3554 y(An)e(example)i(of)f(using)g(this)g(command)g
(is)g(shown)g(below.)90 3785 y Fj(add)55 b(peer)h(foo.bar.com)h
(minpoll)g(6)d(maxpoll)j(10)d(authkey)j(25)-150 4116
y Fg(4.3.4.3)f(add)37 b(server)-25 4343 y Fm(The)23 b
Fj(add)g(server)i Fm(command)e(allows)i(a)d(new)i(NTP)f(server)g(to)f
(be)h(added)h(whilst)g Fj(chronyd)g Fm(is)g(running.)-25
4570 y(Following)i(the)d(words)j Fj(add)d(server)p Fm(,)j(the)d(syntax)
h(of)g(the)g(following)i(parameters)f(and)f(options)h(is)g(identical)
-150 4670 y(to)c(that)f(for)h(the)f Fj(server)j Fm(directive)f(in)f
(the)f(configuration)i(file)g(\(see)g(Section)f(4.2.19)g([server)g
(directive],)i(page)f(25\).)-25 4897 y(An)g(example)i(of)f(using)g
(this)g(command)g(is)g(shown)g(below.)90 5128 y Fj(add)55
b(server)h(foo.bar.com)i(minpoll)e(6)f(maxpoll)h(10)f(authkey)h(25)-150
5460 y Fg(4.3.4.4)g(allow)-25 5687 y Fm(The)29 b(effect)g(of)h(the)e
(allow)j(command)e(is)h(identical)g(to)f(the)f Fj(allow)i
Fm(directive)g(in)f(the)f(configuration)i(file)g(\(see)-150
5786 y(Section)23 b(4.2.1)f([allow)j(directive],)e(page)h(15\).)p
eop
%%Page: 29 31
29 30 bop -150 -116 a Fm(Chapter)23 b(4:)f(Usage)i(reference)2885
b(29)-25 236 y(The)23 b(syntax)f(is)h(illustrated)h(in)e(the)g
(following)j(examples:)90 466 y Fj(allow)56 b(foo.bar.com)90
569 y(allow)g(1.2)90 673 y(allow)g(3.4.5)-150 1000 y
Fg(4.3.4.5)g(allow)38 b(all)-25 1225 y Fm(The)29 b(effect)g(of)g(the)g
(allow)h(command)g(is)f(identical)h(to)f(the)f Fj(allow)c(all)30
b Fm(directive)g(in)e(the)h(configuration)g(file)-150
1325 y(\(see)24 b(Section)e(4.2.1)h([allow)i(directive],)e(page)h
(15\).)-150 1651 y Fg(4.3.4.6)56 b(burst)-25 1877 y Fm(The)33
b Fj(burst)h Fm(command)f(tells)h Fj(chronyd)h Fm(to)e(make)g(a)g(set)g
(of)g(measurements)g(to)g(each)g(of)h(its)f(sources)g(over)-150
1976 y(a)i(short)f(duration)h(\(rather)f(than)g(the)g(usual)g(periodic)
j(measurements)e(that)f(it)g(makes\).)60 b(After)35 b(such)f(a)h
(burst,)-150 2076 y Fj(chronyd)c Fm(will)f(revert)e(to)h(the)f
(previous)i(state)e(for)h(each)g(source.)41 b(This)29
b(might)f(be)h(either)g(online,)h(if)f(the)f(source)-150
2175 y(was)k(being)f(periodically)j(measured)e(in)e(the)h(normal)g
(way,)i(or)e(offline,)j(if)d(the)f(source)h(had)g(been)g(indicated)h
(as)-150 2275 y(being)24 b(offline.)g(\(Switching)f(a)g(source)h
(between)f(the)g(online)g(and)g(offline)i(states)e(is)g(described)i(in)
e(Section)g(4.3.4.27)-150 2375 y([online)h(command],)f(page)g(35,)g
(Section)g(4.3.4.26)f([offline)j(command],)e(page)g(34\).)-25
2600 y(The)g(syntax)f(of)h(the)f(burst)g(command)h(is)h(as)f(follows)90
2829 y Fj(burst)56 b(<n-good-measurements>/<)q(max-)q(mea)q(sur)q(emen)
q(ts>)61 b([<mask>/<masked-address)q(>])-25 3054 y Fm(The)20
b(mask)h(and)f(masked-address)k(arguments)c(are)g(optional,)i(in)e
(which)g(case)h Fj(chronyd)h Fm(will)g(initiate)e(a)h(burst)-150
3154 y(for)i(all)g(of)h(its)e(currently)g(defined)j(sources.)-25
3379 y(The)e(arguments)f(have)h(the)f(following)j(meaning)e(and)g
(format.)-150 3630 y Fj(n-good-measurements)330 3730
y Fm(This)30 b(defines)g(the)f(number)f(of)h(good)i(measurements)e
(that)f Fj(chronyd)j Fm(will)f(want)f(to)g(obtain)g(from)330
3829 y(each)c(source.)30 b(A)25 b(measurement)g(is)g(good)h(if)g(it)e
(passes)j(certain)e(tests,)g(for)g(example,)h(the)f(round)f(trip)330
3929 y(time)g(to)g(the)f(source)h(must)f(be)h(acceptable.)k(\(This)d
(allows)g Fj(chronyd)h Fm(to)e(reject)g(measurements)g(that)330
4029 y(are)f(likely)i(to)d(be)h(bogus.\))-150 4180 y
Fj(max-measurements)330 4280 y Fm(This)g(defines)h(the)d(maximum)h
(number)g(of)g(measurements)h(that)e Fj(chronyd)j Fm(will)g(attempt)d
(to)i(make,)330 4379 y(even)g(if)g(the)f(required)h(number)f(of)h(good)
h(measurements)f(has)g(not)f(been)h(obtained.)-150 4531
y Fj(mask)264 b Fm(This)23 b(is)g(a)f(dotted)g(quad)g(argument)f
(\(e.g.)i Fj(255.255.255.0)p Fm(\))j(with)21 b(which)i(the)e(IP)h
(address)i(of)f(each)330 4630 y(of)g Fj(chronyd)p Fm('s)i(sources)f(is)
f(to)g(be)g(masked.)-150 4782 y Fj(masked-address)330
4881 y Fm(This)34 b(is)g(a)g(dotted)g(quad)f(argument)g(\(e.g.)55
b Fj(1.2.3.0)p Fm(\).)h(If)34 b(the)f(masked)i(IP)f(address)h(of)f(a)f
(source)330 4981 y(matches)23 b(this)f(value)i(then)d(the)i(burst)e
(command)j(is)f(applied)i(to)d(that)g(source.)-25 5232
y(If)36 b(no)g(mask)g(or)g(masked)i(address)f(arguments)e(are)i
(provided,)j(the)35 b(default)i(is)f Fj(0.0.0.0)i Fm(and)e
Fj(0.0.0.0)-150 5332 y Fm(respectively,)25 b(which)e(will)h(match)e
(every)h(source.)-25 5557 y(An)f(example)i(of)f(the)f(two-argument)h
(form)g(of)g(the)f(command)h(is)90 5786 y Fj(burst)56
b(2/10)p eop
%%Page: 30 32
30 31 bop -150 -116 a Fm(Chapter)23 b(4:)f(Usage)i(reference)2885
b(30)-25 236 y(This)32 b(will)h(cause)f Fj(chronyd)i
Fm(to)e(attempt)f(to)g(get)h(two)g(good)h(measurements)f(from)g(each)g
(source,)i(stopping)-150 336 y(after)23 b(two)g(have)g(been)g
(obtained,)g(but)e(in)i(no)g(event)f(will)i(it)f(try)f(more)h(than)f
(ten)g(probes)i(to)e(the)h(source.)-25 565 y(An)f(example)i(of)f(the)f
(four-argument)g(form)h(of)g(the)f(command)i(is)90 797
y Fj(burst)56 b(2/10)f(255.255.0.0/1.2.0.0)-25 1026 y
Fm(In)24 b(this)g(case,)h(the)f(two)h(out)f(of)g(ten)g(sampling)i(will)
g(only)f(be)f(applied)j(to)d(sources)h(whose)h(IP)e(addresses)j(are)d
(of)-150 1126 y(the)e(form)h Fj(1.2.x.y)p Fm(,)h(where)f(x)g(and)g(y)g
(are)g(arbitrary.)-150 1463 y Fg(4.3.4.7)56 b(cmdaccheck)-25
1692 y Fm(This)42 b(command)h(is)f(similar)h(to)f(the)f
Fj(accheck)j Fm(command,)j(except)c(that)d(it)i(is)h(used)f(to)g(check)
g(whether)-150 1792 y(command)23 b(access)i(is)e(permitted)g(from)g(a)g
(named)g(host.)-25 2020 y(Examples)h(of)f(use)g(are)g(as)g(follows:)90
2253 y Fj(cmdaccheck)57 b(a.b.c)90 2357 y(cmdaccheck)g(1.2.3.4)-150
2695 y Fg(4.3.4.8)f(cmdallow)-25 2923 y Fm(This)23 b(is)g(similar)h(to)
f(the)f Fj(allow)i Fm(command,)f(except)g(that)f(it)g(is)i(used)f(to)f
(allow)j(particular)e(hosts)g(or)g(subnets)f(to)-150
3023 y(use)h(the)f(chronyc)h(program)g(to)g(interact)f(with)g
Fj(chronyd)j Fm(on)e(the)f(current)f(host.)-150 3361
y Fg(4.3.4.9)56 b(cmdallow)38 b(all)-25 3589 y Fm(This)18
b(is)g(similar)h(to)f(the)f Fj(allow)24 b(all)19 b Fm(command,)g
(except)f(that)e(it)i(is)g(used)g(to)g(allow)h(particular)f(hosts)g(or)
g(subnets)-150 3689 y(to)23 b(use)f(the)h(chronyc)f(program)i(to)e
(interact)g(with)h Fj(chronyd)i Fm(on)d(the)h(current)e(host.)-150
4026 y Fg(4.3.4.10)56 b(cmddeny)-25 4255 y Fm(This)26
b(is)g(similar)h(to)f(the)f Fj(deny)i Fm(command,)f(except)g(that)f(it)
g(is)i(used)f(to)g(allow)h(particular)f(hosts)g(or)g(subnets)f(to)-150
4355 y(use)e(the)f(chronyc)h(program)g(to)g(interact)f(with)g
Fj(chronyd)j Fm(on)e(the)f(current)f(host.)-150 4692
y Fg(4.3.4.11)56 b(cmddeny)38 b(all)-25 4921 y Fm(This)21
b(is)h(similar)g(to)f(the)f Fj(deny)k(all)e Fm(command,)f(except)h
(that)d(it)i(is)h(used)f(to)g(allow)i(particular)e(hosts)g(or)g
(subnets)-150 5021 y(to)i(use)f(the)h(chronyc)f(program)i(to)e
(interact)g(with)h Fj(chronyd)i Fm(on)d(the)h(current)e(host.)-150
5358 y Fg(4.3.4.12)56 b(cyclelogs)-25 5587 y Fm(The)33
b Fj(cyclelogs)i Fm(command)e(causes)h(all)g(of)f Fj(chronyd's)i
Fm(open)f(log)f(files)i(to)d(be)h(closed)i(and)e(re-opened.)-150
5687 y(This)d(allows)h(them)d(to)h(be)g(renamed)g(so)h(that)e(they)h
(can)g(be)g(periodically)j(purged.)42 b(An)29 b(example)h(of)f(how)h
(to)e(do)-150 5786 y(this)22 b(is)i(shown)f(below.)p
eop
%%Page: 31 33
31 32 bop -150 -116 a Fm(Chapter)23 b(4:)f(Usage)i(reference)2885
b(31)90 236 y Fj(\045)55 b(mv)f(/var/log/chrony/measu)q(rem)q(ents)q
(.lo)q(g)60 b(/var/log/chrony/measur)q(eme)q(nts)q(1.lo)q(g)90
340 y(\045)55 b(chronyc)90 444 y(chronyc>)i(password)f(aardvark)90
548 y(200)f(OK)90 651 y(chronyc>)i(cyclelogs)90 755 y(200)e(OK)90
859 y(chronyc>)i(exit)90 963 y(\045)e(ls)f(-l)h(/var/log/chrony)90
1066 y(-rw-r--r--)166 b(1)54 b(root)273 b(root)653 b(0)54
b(Jun)110 b(8)55 b(18:17)g(measurements.log)90 1170 y(-rw-r--r--)166
b(1)54 b(root)273 b(root)436 b(12345)55 b(Jun)110 b(8)55
b(18:17)g(measurements1.log)-150 1478 y Fg(4.3.4.13)h(delete)-25
1703 y Fm(The)20 b Fj(delete)h Fm(command)g(allows)g(an)f(NTP)g(server)
h(or)e(peer)i(to)f(be)g(removed)h(from)e(the)h(current)e(set)i(of)g
(sources.)-25 1927 y(The)j(syntax)f(is)h(illustrated)h(in)e(the)g
(examples)j(below.)90 2155 y Fj(delete)56 b(foo.bar.com)90
2259 y(delete)g(1.2.3.4)-25 2483 y Fm(There)23 b(is)g(one)g(parameter,)
g(the)f(name)h(or)g(IP)f(address)j(of)e(the)f(server)h(or)g(peer)g(to)g
(be)g(deleted.)-150 2791 y Fg(4.3.4.14)56 b(deny)-25
3015 y Fm(The)32 b(effect)h(of)g(the)f(allow)i(command)f(is)f
(identical)i(to)e(the)g Fj(deny)h Fm(directive)h(in)e(the)g
(configuration)g(file)i(\(see)-150 3115 y(Section)23
b(4.2.4)f([deny)i(directive],)f(page)h(17\).)-25 3339
y(The)f(syntax)f(is)h(illustrated)h(in)e(the)g(following)j(examples:)90
3567 y Fj(deny)55 b(foo.bar.com)90 3671 y(deny)g(1.2)90
3775 y(deny)g(3.4.5)-150 4083 y Fg(4.3.4.15)h(deny)38
b(all)-25 4307 y Fm(The)21 b(effect)g(of)g(the)f(allow)j(command)e(is)g
(identical)h(to)f(the)f Fj(deny)k(all)d Fm(directive)h(in)f(the)f
(configuration)h(file)h(\(see)-150 4407 y(Section)h(4.2.4)f([deny)i
(directive],)f(page)h(17\).)-150 4715 y Fg(4.3.4.16)56
b(dump)-25 4939 y Fm(The)28 b Fj(dump)h Fm(command)g(causes)g
Fj(chronyd)i Fm(to)d(write)g(its)h(current)d(history)j(of)g
(measurements)f(for)h(each)f(of)h(its)-150 5039 y(sources)24
b(to)e(dump)h(files,)h(either)e(for)h(inspection)h(or)f(to)f(support)h
(the)f Fj(-r)i Fm(option)f(when)g Fj(chronyd)h Fm(is)g(restarted.)-25
5263 y(The)i Fj(dump)h Fm(command)f(is)g(somewhat)h(equivalent)f(to)g
(the)f Fj(dumponexit)k Fm(directive)e(in)e(the)h(chrony)f(configu-)-150
5363 y(ration)e(file.)g(See)g(Section)f(4.2.7)h([dumponexit)g
(directive],)g(page)h(18.)-25 5587 y(To)j(use)f(the)g
Fj(dump)p Fm(,)i(you)e(probably)i(want)e(to)g(configure)h(the)f(name)g
(of)h(the)e(directory)j(into)e(which)g(the)g(dump)-150
5687 y(files)40 b(will)g(be)g(written.)70 b(This)39 b(can)g(only)h(be)f
(done)g(in)g(the)f(configuration)i(file,)j(see)d(Section)f(4.2.6)f
([dumpdir)-150 5786 y(directive],)24 b(page)g(17.)p eop
%%Page: 32 34
32 33 bop -150 -116 a Fm(Chapter)23 b(4:)f(Usage)i(reference)2885
b(32)-150 236 y Fg(4.3.4.17)56 b(exit)-25 466 y Fm(The)19
b(exit)h(command)g(exits)f(from)h(chronyc)g(and)f(returns)g(the)g(user)
g(to)g(the)g(shell)i(\(same)f(as)g(the)f(quit)g(command\).)-150
806 y Fg(4.3.4.18)56 b(help)-25 1035 y Fm(The)23 b(help)g(command)g
(displays)j(a)c(summary)h(of)g(the)f(commands)i(and)f(their)f
(arguments.)-150 1375 y Fg(4.3.4.19)56 b(local)-25 1605
y Fm(The)26 b Fj(local)h Fm(command)f(allows)i Fj(chronyd)g
Fm(to)d(be)h(told)h(that)d(it)i(is)g(to)g(appear)h(as)f(a)g(reference)h
(source,)f(even)h(if)-150 1705 y(it)d(is)h(not)f(itself)h(properly)h
(synchronised)g(to)e(an)g(external)g(source.)k(\(This)e(can)e(be)h
(used)f(on)h(isolated)h(networks,)f(to)-150 1804 y(allow)32
b(one)f(computer)f(to)h(be)f(a)h(master)g(time)f(server)h(with)f(the)g
(other)g(computers)h(slaving)h(to)e(it.\))46 b(The)31
b Fj(local)-150 1904 y Fm(command)d(is)g(somewhat)g(equivalent)f(to)g
(the)g Fj(local)i Fm(directive)f(in)g(the)e(configuration)i(file,)h
(see)g(Section)e(4.2.10)-150 2003 y([local)d(directive],)g(page)g(19.)
-25 2233 y(The)f(syntax)f(is)h(as)h(shown)f(in)f(the)h(following)i
(examples.)90 2467 y Fj(local)56 b(stratum)g(10)90 2571
y(local)g(off)-25 2800 y Fm(The)31 b(first)g(example)h(enables)g(the)f
(local)h(reference)g(mode)g(on)f(the)f(host,)j(and)e(sets)g(the)g
(stratum)e(at)i(which)g(it)-150 2900 y(should)23 b(claim)h(to)e(be)h
(synchronised.)-25 3129 y(The)g(second)h(example)f(disables)i(the)e
(local)h(reference)f(mode.)-150 3469 y Fg(4.3.4.20)56
b(manual)-25 3699 y Fm(The)33 b(manual)g(command)h(enables)g(and)f
(disables)j(use)d(of)g(the)g Fj(settime)i Fm(command)f(\(see)g(Section)
f(4.3.4.31)-150 3799 y([settime)23 b(command],)g(page)h(37\),)f(and)g
(is)g(used)g(to)g(modify)h(the)e(behaviour)h(of)g(the)f(manual)h(clock)
h(driver.)-25 4028 y(Examples)g(of)f(the)f(command)h(are)g(shown)g
(below.)90 4262 y Fj(manual)56 b(on)90 4366 y(manual)g(off)90
4469 y(manual)g(reset)-25 4699 y Fm(The)23 b(first)f(form)h(of)g(the)f
(command)i(enables)g(use)f(of)g(the)f Fj(settime)j Fm(command.)-25
4929 y(The)e(second)h(form)e(of)i(the)e(command)h(disables)i(use)e(of)g
(the)f Fj(settime)j Fm(command.)-25 5158 y(When)d(a)h(time)f(is)h
(entered)g(with)f(the)g Fj(settime)j Fm(command,)d(the)g(current)g
(time)g(and)h(machine)f(clock)i(error)f(are)-150 5258
y(stored)30 b(within)g Fj(chronyd)p Fm(.)45 b(When)30
b(another)f(time)h(is)g(entered)g(later,)h(the)e(rate)g(of)h(gain)h(or)
e(loss)i(of)g(the)e(machine)-150 5357 y(clock)24 b(is)f(computed)h(and)
e(used)i(to)e(adjust)h(the)f(running)g(speed)i(of)f(the)f(machine)h
(clock.)-25 5587 y(If)j(you)h(want)f(to)h(correct)f(the)g(machine)g
(time)h(without)f(this)g(rate)g(compensation)i(being)f(performed,)h
(use)e(the)-150 5687 y(third)g(form)g(of)h(the)e Fj(manual)j
Fm(command)f(first.)33 b(This)27 b(will)g(purge)g(any)f(previous)i
(measurements)e(stored)h(within)-150 5786 y Fj(chronyd)p
Fm(.)p eop
%%Page: 33 35
33 34 bop -150 -116 a Fm(Chapter)23 b(4:)f(Usage)i(reference)2885
b(33)-150 236 y Fg(4.3.4.21)56 b(maxdelay)-25 462 y Fm(This)40
b(allows)i(the)d Fj(maxdelay)j Fm(option)e(for)g(one)g(of)g(the)f
(sources)i(to)e(be)h(modified,)46 b(in)39 b(the)g(same)i(way)f(as)-150
561 y(specifying)28 b(the)d Fj(maxdelay)i Fm(option)f(for)g(the)f
Fj(server)i Fm(directive)f(in)g(the)f(configuration)g(file)i(\(see)f
(Section)g(4.2.19)-150 661 y([server)d(directive],)h(page)g(25\).)-25
886 y(The)f(following)i(examples)f(illustrate)f(the)f(syntax)90
1116 y Fj(maxdelay)57 b(foo.bar.com)g(0.3)90 1219 y(maxdelay)g(1.2.3.4)
f(0.0015)-25 1445 y Fm(The)45 b(first)g(example)h(sets)f(the)g(maximum)
f(network)h(delay)i(allowed)g(for)e(a)g(measurement)g(to)g(the)f(host)
-150 1544 y Fj(foo.bar.com)14 b Fm(to)g(0.3)g(seconds.)24
b(The)14 b(second)g(example)g(sets)g(the)g(maximum)g(network)g(delay)g
(for)g(a)g(measurement)-150 1644 y(to)23 b(the)f(host)g(with)h(IP)g
(address)h Fj(1.2.3.4)h Fm(to)d(1.5)h(milliseconds.)-25
1869 y(\(Any)g(measurement)f(whose)i(network)f(delay)h(exceeds)h(the)d
(specified)j(value)e(is)h(discarded.\))-150 2197 y Fg(4.3.4.22)56
b(maxdelayratio)-25 2422 y Fm(This)31 b(allows)h(the)e
Fj(maxdelayratio)35 b Fm(option)c(for)g(one)g(of)g(the)e(sources)j(to)e
(be)h(modified,)j(in)d(the)f(same)h(way)-150 2522 y(as)40
b(specifying)i(the)d Fj(maxdelayratio)44 b Fm(option)c(for)g(the)f
Fj(server)i Fm(directive)g(in)f(the)f(configuration)h(file)h(\(see)-150
2621 y(Section)23 b(4.2.19)f([server)i(directive],)f(page)h(25\).)-25
2847 y(The)f(following)i(examples)f(illustrate)f(the)f(syntax)90
3076 y Fj(maxdelayratio)58 b(foo.bar.com)g(1.5)90 3180
y(maxdelayratio)g(1.2.3.4)f(2.0)-25 3405 y Fm(The)18
b(first)g(example)i(sets)f(the)e(maximum)h(network)h(delay)h(for)e(a)h
(measurement)f(to)g(the)f(host)i Fj(foo.bar.com)i Fm(to)-150
3505 y(be)j(1.5)h(times)f(the)g(minimum)f(delay)j(found)e(amongst)h
(the)e(previous)j(measurements)e(that)f(have)h(been)h(retained.)-150
3605 y(The)f(second)g(example)h(sets)f(the)f(maximum)g(network)h(delay)
h(for)e(a)h(measurement)f(to)g(the)g(host)h(with)f(IP)g(address)-150
3704 y Fj(1.2.3.4)i Fm(to)d(be)h(double)h(the)e(retained)h(minimum.)-25
3929 y(As)g(for)g Fj(maxdelay)p Fm(,)h(any)f(measurement)g(whose)h
(network)f(delay)h(is)f(too)g(large)h(will)g(be)f(discarded.)-150
4257 y Fg(4.3.4.23)56 b(maxpoll)-25 4482 y Fm(The)23
b Fj(maxpoll)j Fm(command)e(is)g(used)g(to)f(modify)i(the)e(minimum)g
(polling)i(interval)f(for)g(one)g(of)g(the)f(current)f(set)-150
4582 y(of)f(sources.)h(It)e(is)h(equivalent)f(to)g(the)g
Fj(maxpoll)i Fm(option)f(in)f(the)g Fj(server)i Fm(directive)f(in)f
(the)g(configuration)h(file)g(\(see)-150 4681 y(Section)i(4.2.19)f
([server)i(directive],)f(page)h(25\).)-25 4907 y(The)f(syntax)f(is)h
(as)h(follows)90 5136 y Fj(maxpoll)56 b(<host>)g(<new-maxpoll>)-25
5362 y Fm(where)33 b(the)f(host)h(can)f(be)h(specified)j(as)d(either)g
(a)g(machine)g(name)g(or)f(dotted-quad)h(IP)g(address.)54
b(The)34 b(new)-150 5461 y(minimum)24 b(poll)i(is)f(specified)i(as)d(a)
h(base-2)h(logarithm)e(of)h(the)f(number)g(of)g(seconds)i(between)f
(polls)h(\(e.g.)i(specify)-150 5561 y(6)23 b(for)g(64)g(second)h
(sampling\).)-25 5786 y(An)e(example)i(is)p eop
%%Page: 34 36
34 35 bop -150 -116 a Fm(Chapter)23 b(4:)f(Usage)i(reference)2885
b(34)90 236 y Fj(maxpoll)56 b(foo.bar.com)i(10)-25 466
y Fm(which)22 b(sets)i(the)e(maximum)g(polling)i(interval)f(for)g(the)f
(host)h Fj(foo.bar.com)j Fm(to)c(1024)i(seconds.)-25
696 y(Note)d(that)e(the)h(new)i(maximum)e(polling)i(interval)f(only)h
(takes)f(effect)g(after)g(the)f(next)g(measurement)h(has)g(been)-150
796 y(made.)-150 1138 y Fg(4.3.4.24)56 b(maxupdateskew)-25
1368 y Fm(This)27 b(command)h(has)f(the)f(same)i(effect)g(as)f(the)g
Fj(maxupdateskew)j Fm(directive)e(in)f(the)g(configuration)g(file,)i
(see)-150 1467 y(Section)23 b(4.2.14)f([maxupdateskew)j(directive],)e
(page)h(23.)-150 1809 y Fg(4.3.4.25)56 b(minpoll)-25
2039 y Fm(The)23 b Fj(minpoll)j Fm(command)e(is)g(used)g(to)f(modify)i
(the)e(minimum)g(polling)i(interval)f(for)g(one)g(of)g(the)f(current)f
(set)-150 2139 y(of)f(sources.)h(It)e(is)h(equivalent)f(to)g(the)g
Fj(minpoll)i Fm(option)f(in)f(the)g Fj(server)i Fm(directive)f(in)f
(the)g(configuration)h(file)g(\(see)-150 2238 y(Section)i(4.2.19)f
([server)i(directive],)f(page)h(25\).)-25 2469 y(The)f(syntax)f(is)h
(as)h(follows)90 2703 y Fj(minpoll)56 b(<host>)g(<new-minpoll>)-25
2933 y Fm(where)33 b(the)f(host)h(can)f(be)h(specified)j(as)d(either)g
(a)g(machine)g(name)g(or)f(dotted-quad)h(IP)g(address.)54
b(The)34 b(new)-150 3033 y(minimum)24 b(poll)i(is)f(specified)i(as)d(a)
h(base-2)h(logarithm)e(of)h(the)f(number)g(of)g(seconds)i(between)f
(polls)h(\(e.g.)i(specify)-150 3132 y(6)23 b(for)g(64)g(second)h
(sampling\).)-25 3362 y(An)e(example)i(is)90 3597 y Fj(minpoll)56
b(foo.bar.com)i(5)-25 3827 y Fm(which)22 b(sets)i(the)e(minimum)g
(polling)i(interval)f(for)g(the)f(host)h Fj(foo.bar.com)j
Fm(to)c(32)i(seconds.)-25 4057 y(Note)e(that)e(the)h(new)h(minimum)f
(polling)i(interval)f(only)h(takes)f(effect)g(after)g(the)f(next)f
(measurement)i(has)g(been)-150 4156 y(made.)-150 4498
y Fg(4.3.4.26)56 b(offline)-25 4728 y Fm(The)22 b Fj(offline)h
Fm(command)g(is)f(used)g(to)g(warn)f Fj(chronyd)j Fm(that)d(the)g
(network)h(connection)g(to)f(a)h(particular)g(host)-150
4828 y(or)30 b(hosts)g(is)g(about)f(to)h(be)g(lost.)43
b(It)30 b(should)g(be)g(used)g(on)g(computers)g(with)f(a)h(dial-up)h
(or)e(similar)i(connection)f(to)-150 4927 y(their)22
b(time)h(sources,)g(to)g(warn)f Fj(chronyd)j Fm(that)d(the)g
(connection)h(is)g(about)g(to)f(be)h(broken.)-25 5158
y(An)30 b(example)i(of)f(how)g(to)f(use)h Fj(offline)i
Fm(in)d(this)h(case)g(is)h(shown)f(in)f(Section)h(3.2.2)f([Advising)j
(chronyd)d(of)-150 5257 y(internet)22 b(availability],)j(page)e(9.)-25
5487 y(Another)k(case)i(where)f Fj(offline)i Fm(could)e(be)g(used)h(is)
f(where)g(a)g(computer)g(serves)h(time)f(to)f(a)h(local)h(group)f(of)
-150 5587 y(computers,)f(and)f(has)g(a)g(permanant)f(connection)h(to)g
(true)f(time)h(servers)h(outside)f(the)g(organisation.)33
b(However,)-150 5687 y(the)26 b(external)g(connection)h(is)g(heavily)g
(loaded)h(at)e(certain)h(times)g(of)f(the)g(day)h(and)g(the)f
(measurements)g(obtained)-150 5786 y(are)f(less)i(reliable)g(at)e
(those)g(times.)31 b(In)25 b(this)g(case,)h(it)f(is)h(probably)h(most)e
(useful)h(to)f(determine)g(the)g(gain/loss)i(rate)p eop
%%Page: 35 37
35 36 bop -150 -116 a Fm(Chapter)23 b(4:)f(Usage)i(reference)2885
b(35)-150 236 y(during)26 b(the)f(quiet)h(periods)h(and)g(let)f(the)f
(whole)i(network)g(coast)f(through)f(the)h(loaded)h(periods.)35
b(The)26 b Fj(offline)-150 336 y Fm(and)d Fj(online)h
Fm(commands)g(can)f(be)g(used)g(to)f(achieve)i(this.)e(The)h(situation)
g(is)g(shown)g(in)g(the)f(figure)h(below.)633 617 y Fj(+----------+)633
721 y(|Ext)55 b(source|)633 825 y(+----------+)850 929
y(|)850 1033 y(|)850 1136 y(|/|)g(<--)h(Link)f(with)g(variable)959
1240 y(|)272 b(reliability)959 1344 y(|)416 1448 y
(+-------------------+)416 1551 y(|Local)56 b(master)g(server|)416
1655 y(+-------------------+)959 1759 y(|)199 1863 y
(+---+---+-----+-----+---)q(-+-)q(---+)199 1967 y(|)163
b(|)g(|)272 b(|)g(|)217 b(|)g(|)687 2070 y(Local)56 b(clients)-25
2352 y Fm(If)21 b(the)e(source)i(to)g(which)f Fj(chronyd)j
Fm(is)e(currently)f(synchronised)h(is)h(indicated)f(offline)h(in)e
(this)g(way,)i Fj(chronyd)-150 2452 y Fm(will)i(continue)e(to)h(treat)f
(it)g(as)i(the)e(synchronisation)h(source.)g(If)h(the)e(network)h
(connection)g(were)g(broken)h(without)-150 2551 y(the)30
b Fj(offline)i Fm(command)f(being)g(used,)h Fj(chronyd)h
Fm(would)e(assume)g(that)e(the)h(source)h(had)f(failed)i(and)f(would)
-150 2651 y(attempt)22 b(to)h(pick)g(another)g(synchronisation)g
(source.)-25 2928 y(There)i(are)g(two)g(forms)h(of)f(the)f
Fj(offline)j Fm(command.)j(The)25 b(first)g(form)g(is)g(a)g(wildcard,)i
(meaning)f(all)f(sources.)-150 3028 y(The)31 b(second)h(form)f(allows)i
(a)f(IP)f(address)h(mask)g(and)f(a)g(masked)h(address)h(to)d(be)i
(specified.)49 b(These)32 b(forms)g(are)-150 3128 y(illustrated)23
b(below.)90 3409 y Fj(offline)90 3513 y(offline)56 b
(255.255.255.0/1.2.3.0)-25 3790 y Fm(The)37 b(second)i(form)f(means)g
(that)e(the)h Fj(offline)j Fm(command)e(is)g(to)f(be)h(applied)i(to)d
(any)h(source)g(whose)h(IP)-150 3890 y(address)28 b(is)e(in)g(the)g
(1.2.3)f(subnet.)32 b(\(The)27 b(host's)f(address)i(is)e(logically)j
(and-ed)e(with)f(the)f(mask,)i(and)f(if)h(the)e(result)-150
3990 y(matches)e(the)f(masked-address)k(the)c(host)h(is)g(processed\).)
-25 4267 y(The)g(wildcard)h(form)f(of)g(the)f(address)j(is)e(actually)g
(equivalent)g(to)90 4549 y Fj(offline)56 b(0.0.0.0/0.0.0.0)-150
5032 y Fg(4.3.4.27)g(online)-25 5310 y Fm(The)35 b Fj(online)j
Fm(command)e(is)g(opposite)h(in)f(function)f(to)g(the)g
Fj(offline)i Fm(command.)61 b(It)36 b(is)g(used)g(to)f(advise)-150
5409 y Fj(chronyd)25 b Fm(that)c(network)i(connectivity)h(to)e(a)h
(particular)g(source)g(or)g(sources)g(has)g(been)g(restored.)-25
5687 y(The)29 b(syntax)f(is)i(identical)f(to)g(that)f(of)h(the)f
Fj(offline)j Fm(command,)f(see)g(Section)f(4.3.4.26)f([offline)j
(command],)-150 5786 y(page)24 b(34.)p eop
%%Page: 36 38
36 37 bop -150 -116 a Fm(Chapter)23 b(4:)f(Usage)i(reference)2885
b(36)-150 236 y Fg(4.3.4.28)56 b(password)-25 467 y Fm(The)24
b(password)j(command)e(is)g(used)g(to)f(allow)j(chronyc)d(to)g(send)h
(privileged)i(commands)f(to)e Fj(chronyd)p Fm(.)30 b(The)-150
567 y(password)d(can)e(either)g(be)g(entered)g(on)g(the)f(command)h
(line,)h(or)f(can)g(be)g(entered)g(without)f(echoing.)30
b(The)25 b(syntax)-150 667 y(for)e(entering)f(the)h(password)i(on)d
(the)g(command)i(line)f(is)g(as)g(follows)90 902 y Fj(password)57
b(xyzzy)-25 1133 y Fm(To)23 b(enter)f(the)g(password)j(without)d(it)h
(being)g(echoed,)h(enter)90 1369 y Fj(password)-25 1600
y Fm(The)g(computer)g(will)h(respond)g(with)f(a)g(`)p
Fj(Password:)p Fm(')j(prompt,)d(at)f(which)h(you)h(should)f(enter)f
(the)h(password)-150 1699 y(and)18 b(press)h(return.)g(\(Note)g(that)d
(the)i(no-echo)g(mode)h(is)g(limited)f(to)g(8)g(characters)g(on)g
(SunOS)e(4.1)i(due)g(to)g(limitations)-150 1799 y(in)23
b(the)f(system)h(library.)g(Other)f(systems)i(do)f(not)g(have)g(this)f
(restriction.\))-25 2030 y(The)28 b(password)j(is)e(any)g(string)g(of)g
(characters)f(not)g(containing)h(whitespace.)42 b(It)28
b(has)h(to)f(match)g Fj(chronyd's)-150 2130 y Fm(currently)22
b(defined)i(command)f(key)h(\(see)g(Section)e(4.2.2)h([commandkey)h
(directive],)g(page)g(16\).)-150 2475 y Fg(4.3.4.29)56
b(quit)-25 2706 y Fm(The)19 b(quit)g(command)h(exits)g(from)f(chronyc)h
(and)f(returns)g(the)g(user)g(to)h(the)e(shell)j(\(same)f(as)g(the)f
(exit)h(command\).)-150 3051 y Fg(4.3.4.30)56 b(rtcdata)-25
3282 y Fm(The)23 b Fj(rtcdata)h Fm(command)g(displays)h(the)d(current)f
(real)j(time)e(clock)i(RTC)g(parameters.)-25 3513 y(An)e(example)i
(output)e(is)h(shown)g(below.)90 3749 y Fj(RTC)55 b(ref)g(time)h
(\(GMT\))g(:)e(Sat)h(May)h(30)e(07:25:56)j(1998)90 3852
y(Number)f(of)f(samples)111 b(:)54 b(10)90 3956 y(Number)i(of)f(runs)
273 b(:)54 b(5)90 4060 y(Sample)i(span)g(period)g(:)109
b(549)90 4164 y(RTC)55 b(is)g(fast)h(by)272 b(:)217 b(-1.632736)57
b(seconds)90 4267 y(RTC)e(gains)h(time)f(at)110 b(:)f(-107.623)56
b(ppm)-25 4499 y Fm(The)23 b(fields)h(have)f(the)f(following)j(meaning)
-150 4762 y Fj(RTC)f(ref)f(time)h(\(GMT\))330 4861 y
Fm(This)f(is)h(the)e(RTC)i(reading)f(the)f(last)h(time)g(its)g(error)g
(was)g(measured.)-150 5025 y Fj(Number)h(of)g(samples)330
5125 y Fm(This)f(is)f(the)f(number)h(of)g(previous)h(measurements)f
(being)h(used)f(to)g(determine)g(the)f(RTC)i(gain/loss)330
5224 y(rate.)-150 5388 y Fj(Number)h(of)g(runs)330 5487
y Fm(This)31 b(is)g(the)e(number)g(of)i(runs)e(of)i(residuals)g(of)g
(the)f(same)g(sign)h(following)i(the)c(regression)j(fit)e(for)330
5587 y(\(RTC)g(error\))e(versus)h(\(RTC)h(time\).)40
b(A)29 b(value)h(which)e(is)i(small)f(indicates)h(that)e(the)g
(measurements)330 5687 y(are)h(not)g(well)i(approximated)f(by)g(a)f
(linear)h(model,)i(and)d(that)f(the)h(algorithm)g(will)i(tend)e(to)g
(delete)330 5786 y(the)22 b(older)i(measurements)f(to)f(improve)i(the)e
(fit.)p eop
%%Page: 37 39
37 38 bop -150 -116 a Fm(Chapter)23 b(4:)f(Usage)i(reference)2885
b(37)-150 236 y Fj(Sample)24 b(span)g(period)330 336
y Fm(This)i(is)f(the)f(period)i(that)e(the)g(measurements)h(span)g
(\(from)g(the)g(oldest)h(to)e(the)g(newest\).)30 b(Without)24
b(a)330 435 y(unit)i(the)h(value)h(is)g(in)f(seconds;)j(suffixes)e(`m')
g(for)f(minutes,)h(`h')f(for)g(hours,)h(`d')g(for)f(days)i(or)e(`y')h
(for)330 535 y(years)c(may)f(be)g(used.)-150 723 y Fj(RTC)h(is)f(fast)h
(by)330 823 y Fm(This)29 b(is)g(the)f(estimate)h(of)g(how)g(many)g
(seconds)h(fast)e(the)g(RTC)i(when)e(it)g(thought)f(the)h(time)h(was)g
(at)330 922 y(the)h(reference)h(time)f(\(above\).)47
b(If)31 b(this)g(value)f(is)i(large,)g(you)f(may)g(\(or)g(may)f(not\))g
(want)h(to)f(use)g(the)330 1022 y Fj(trimrtc)c Fm(command)f(to)f(bring)
g(the)g(RTC)h(into)g(line)f(with)h(the)e(system)i(clock.)k(\(Note,)24
b(a)h(large)g(error)330 1121 y(will)c(not)e(affect)h
Fj(chronyd's)i Fm(operation,)f(unless)f(it)g(becomes)h(so)f(big)g(as)g
(to)g(start)f(causing)h(rounding)330 1221 y(errors.)-150
1409 y Fj(RTC)k(gains)g(time)f(at)330 1509 y Fm(This)31
b(is)f(the)f(amount)g(of)i(time)f(gained)h(\(positive\))h(or)d(lost)i
(\(negative\))g(by)f(the)f(real)i(time)f(clock)h(for)330
1608 y(each)22 b(second)h(that)e(it)h(ticks.)g(It)g(is)h(measured)f(in)
g(parts)g(per)g(million.)i(So)e(if)g(the)f(value)i(shown)f(was)h
Fj(+)p Fm(1,)330 1708 y(suppose)j(the)d(RTC)i(was)h(exactly)e(right)g
(when)g(it)g(crosses)i(a)e(particular)g(second)h(boundary.)i(Then)d(it)
330 1807 y(would)g(be)f(1)g(microsecond)h(fast)f(when)g(it)f(crosses)j
(its)d(next)g(second)i(boundary.)-150 2189 y Fg(4.3.4.31)56
b(settime)-25 2432 y Fm(The)31 b Fj(settime)i Fm(command)e(allows)i
(the)d(current)g(time)h(to)g(be)g(entered)g(manually,)i(if)e(this)g
(option)g(has)h(been)-150 2532 y(configured)22 b(into)e
Fj(chronyd)p Fm(.)k(\(It)d(may)g(be)g(configured)g(either)g(with)f(the)
h Fj(manual)h Fm(directive)g(in)e(the)g(configuration)-150
2631 y(file)34 b(\(see)g(Section)f(4.2.13)g([manual)h(directive],)i
(page)e(23\),)i(or)d(with)g(the)g Fj(manual)i Fm(command)e(of)h
(chronyc)f(\(see)-150 2731 y(Section)23 b(4.3.4.20)f([manual)h
(command],)g(page)h(32\).)-25 2974 y(It)i(should)i(be)f(noted)g(that)f
(the)g(computer's)h(sense)h(of)f(time)g(will)i(only)e(be)g(as)h
(accurate)e(as)i(the)e(reference)i(you)-150 3074 y(use)35
b(for)f(providing)i(this)e(input)g(\(e.g.)58 b(your)34
b(watch\),)j(as)e(well)h(as)e(how)h(well)h(you)f(can)f(time)g(the)g
(press)i(of)e(the)-150 3174 y(return)23 b(key.)29 b(When)24
b(inputting)g(time)g(to)h(an)f(isolated)i(network,)f(I)g(have)g(a)f
(battery)h(operated)g(alarm)g(clock)h(that)d(is)-150
3273 y(synchronised)h(to)f(the)f(Rugby)h(MSF)f(time)h(signal)h(in)e
(the)g(UK.)-25 3517 y(Providing)35 b(your)g(computer's)g(time)g(zone)g
(is)h(set)f(up)g(properly,)k(you)c(will)h(be)f(able)h(to)e(enter)h(a)g
(local)h(time)-150 3616 y(\(rather)22 b(than)g(UTC\).)-25
3860 y(The)29 b(response)h(to)f(a)g(successful)h Fj(settime)h
Fm(command)e(indicates)h(the)e(amount)g(that)g(the)g(computer's)i
(clock)-150 3959 y(was)22 b(wrong.)h(It)e(should)h(be)g(apparent)g
(from)f(this)h(if)f(you)h(have)g(entered)f(the)g(time)h(wrongly,)g
(e.g.)g(with)g(the)e(wrong)-150 4059 y(time)j(zone.)-25
4302 y(The)39 b(software)i(always)g(allows)h(you)e(to)f(enter)g(the)g
(time)g(again,)44 b(replacing)d(the)e(measurement)h(you)f(just)-150
4402 y(entered,)22 b(for)h(example)h(if)f(you)g(realise)i(that)c(it)i
(was)g(wrong.)g(You)g(are)g(given)h(a)e(5)h(minute)f(period)i(for)f
(doing)h(this.)-25 4645 y(The)d(time)f(is)i(parsed)g(by)f(the)f(public)
h(domain)h(`)p Fj(getdate)p Fm(')h(algorithm.)f(Consequently,)f(you)g
(can)g(only)g(specify)-150 4745 y(time)i(to)f(the)g(nearest)h(second.)
-25 4988 y(Examples)h(of)f(inputs)f(that)g(are)h(valid)h(are)f(shown)g
(below.)90 5236 y Fj(settime)56 b(16:30)90 5339 y(settime)g(16:30:05)90
5443 y(settime)g(Nov)g(21,)f(1997)g(16:30:05)-25 5687
y Fm(For)28 b(a)g(full)g(description)h(of)f Fj(getdate)p
Fm(,)j(get)c(hold)i(of)f(the)f(getdate)h(documentation)g(\(bundled,)h
(for)f(example,)-150 5786 y(with)23 b(the)f(source)h(for)g(GNU)g
(tar\).)p eop
%%Page: 38 40
38 39 bop -150 -116 a Fm(Chapter)23 b(4:)f(Usage)i(reference)2885
b(38)-150 236 y Fg(4.3.4.32)56 b(sources)-25 461 y Fm(This)27
b(command)g(displays)i(information)e(about)g(the)f(current)f(time)i
(sources)g(that)f Fj(chronyd)j Fm(is)e(accessing.)36
b(It)-150 561 y(takes)23 b(no)g(arguments.)90 790 y Fj(210)55
b(Number)h(of)f(sources)i(=)d(3)90 894 y(MS)h(Name/IP)h(address)328
b(Str)110 b(Poll)55 b(LastRx)436 b(Last)56 b(sample)90
997 y(======================)q(====)q(===)q(====)q(===)q(===)q(====)q
(===)q(===)q(====)q(===)q(====)q(===)q(===)q(=)90 1101
y(^+)f(a.b.c)979 b(3)217 b(6)163 b(47m)110 b(-9491us[-6983us])59
b(+/-)109 b(159ms)90 1205 y(^+)55 b(d.e.f)979 b(3)217
b(6)163 b(47m)218 b(+32ms[)111 b(+35ms])56 b(+/-)109
b(274ms)90 1309 y(^*)55 b(g.h.i)979 b(2)217 b(6)163 b(47m)110
b(+8839us[)h(+11ms])56 b(+/-)109 b(214ms)-25 1538 y Fm(The)23
b(columns)g(are)g(as)g(follows:)-150 1788 y Fj(M)426
b Fm(This)24 b(indicates)h(the)e(mode)h(of)g(the)f(source.)i
Fj(^)e Fm(means)h(a)g(server,)g Fj(=)f Fm(means)h(a)g(peer)g(and)g
Fj(#)f Fm(indicates)i(a)330 1888 y(locally)g(connected)e(reference)g
(clock)1641 1855 y Fc(1)1680 1888 y Fm(.)-150 2039 y
Fj(S)426 b Fm(This)23 b(column)f(indicates)h(the)e(state)h(of)g(the)g
(sources.)g Fj(*)h Fm(indicates)g(the)e(source)i(to)e(which)h
Fj(chronyd)i Fm(is)330 2139 y(current)i(synchronised.)38
b Fj(+)28 b Fm(indicates)g(other)f(acceptable)i(sources.)38
b Fj(?)27 b Fm(indicates)i(sources)f(to)g(which)330 2238
y(connectivity)22 b(has)f(been)h(lost.)g Fj(x)f Fm(indicates)i(a)e
(clock)i(which)e Fj(chronyd)i Fm(thinks)e(is)h(is)g(a)f(falseticker)i
(\(i.e.)330 2338 y(its)j(time)f(is)h(inconsistent)g(with)f(a)h
(majority)g(of)g(other)f(sources\).)31 b Fj(~)26 b Fm(indicates)h(a)e
(source)h(whose)h(time)330 2438 y(appears)j(to)e(have)g(too)g(much)g
(variability.)40 b(The)28 b Fj(~)g Fm(condition)h(is)g(also)g(shown)g
(at)e(start-up,)i(until)e(at)330 2537 y(least)c(3)g(samples)i(have)e
(been)g(gathered)g(from)g(it.)-150 2688 y Fj(IP)g(address)330
2788 y Fm(This)g(shows)h(the)f(name)f(or)h(the)f(IP)h(address)h(of)f
(the)g(source.)-150 2939 y Fj(Str)318 b Fm(This)32 b(shows)h(the)e
(stratum)g(of)h(the)f(source,)j(as)e(reported)g(in)g(its)g(most)g
(recently)g(received)h(sample.)330 3038 y(Stratum)20
b(1)h(indicates)i(a)f(computer)g(with)f(a)h(locally)i(attached)d
(reference)i(clock.)g(A)f(computer)g(that)e(is)330 3138
y(synchronised)25 b(to)e(a)h(stratum)e(1)h(computer)h(is)g(at)f
(stratum)f(2.)j(A)f(computer)f(that)f(is)i(synchronised)h(to)330
3237 y(a)e(stratum)e(2)i(computer)g(is)g(at)g(stratum)e(3,)i(and)f(so)i
(on.)-150 3388 y Fj(Poll)264 b Fm(This)39 b(shows)g(the)e(rate)g(at)h
(which)g(the)f(source)i(is)f(being)g(polled,)44 b(as)38
b(a)g(base-2)h(logarithm)f(of)g(the)330 3488 y(interval)26
b(in)f(seconds.)32 b(Thus,)26 b(a)g(value)g(of)f(6)h(would)h(indicate)f
(that)e(a)i(measurement)f(is)h(being)g(made)330 3588
y(every)e(64)f(seconds.)330 3713 y Fj(chronyd)i Fm(automatically)e
(varies)h(the)e(polling)j(rate)d(in)h(response)h(to)f(prevailing)h
(conditions.)-150 3864 y Fj(LastRx)156 b Fm(This)30 b(column)f(shows)h
(how)f(long)h(ago)g(the)e(last)h(sample)i(was)f(received)g(from)g(the)e
(source.)42 b(This)29 b(is)330 3963 y(normally)24 b(in)e(seconds.)i
(The)f(letters)g Fj(m)p Fm(,)g Fj(h)p Fm(,)f Fj(d)h Fm(or)g
Fj(y)g Fm(indicate)g(minutes,)f(hours,)g(days)i(or)f(years.)-150
4114 y Fj(Last)h(sample)330 4214 y Fm(This)j(column)e(shows)i(the)f
(offset)g(between)h(the)e(local)i(clock)g(and)f(the)f(source)i(at)e
(the)g(last)h(measure-)330 4314 y(ment.)k(The)c(number)f(in)g(the)g
(square)g(brackets)i(shows)f(the)f(actual)h(measured)g(offset.)31
b(This)c(may)f(be)330 4413 y(suffixed)33 b(by)f Fj(us)h
Fm(\(indicating)g(microseconds\),)k Fj(ms)32 b Fm(\(indicating)h
(milliseconds\),)k(or)c Fj(s)f Fm(\(indicating)330 4513
y(seconds\).)g(The)25 b(number)g(to)g(the)f(left)i(of)f(the)g(square)g
(brackets)h(shows)g(the)f(original)h(measurement,)330
4613 y(adjusted)d(to)f(allow)i(for)f(any)f(slews)i(applied)h(to)d(the)f
(local)j(clock)g(since.)f(The)f(number)g(following)i(the)330
4712 y Fj(+/-)g Fm(indicator)f(shows)h(the)e(margin)h(of)g(error)g(in)f
(the)g(measurement.)330 4837 y(Positive)i(offsets)g(indicate)f(that)f
(the)g(local)i(clock)g(is)f(fast)g(of)g(the)f(source.)-150
5163 y Fg(4.3.4.33)56 b(sourcestats)-25 5388 y Fm(The)37
b Fj(sourcestats)j Fm(command)e(displays)i(information)d(about)g(the)g
(drift)g(rate)f(and)i(offset)g(estimatation)-150 5488
y(process)24 b(for)f(each)g(of)h(the)e(sources)h(currently)f(being)i
(examined)f(by)g Fj(chronyd)p Fm(.)p -150 5594 1200 4
v -108 5654 a Fc(1)-25 5687 y Fm(In)32 b(the)f(current)g(version)i
(this)f(will)h(never)g(be)f(shown,)j(because)e Fj(chronyd)h
Fm(has)e(no)g(support)h(for)f(reference)-25 5786 y(clocks)24
b(yet.)p eop
%%Page: 39 41
39 40 bop -150 -116 a Fm(Chapter)23 b(4:)f(Usage)i(reference)2885
b(39)-25 236 y(An)22 b(example)i(report)f(is)90 471 y
Fj(210)55 b(Number)h(of)f(sources)i(=)d(1)90 575 y(Name/IP)545
b(NP)164 b(NR)109 b(Span)381 b(Freq)327 b(Skew)g(S.D./us)90
679 y(======================)q(====)q(===)q(====)q(===)q(===)q(====)q
(===)q(===)q(====)q(===)q(====)q(===)q(=)90 783 y(abc.def.ghi)i(11)218
b(5)163 b(46m)327 b(-0.001)382 b(0.045)435 b(25)-25 1018
y Fm(The)23 b(columns)g(are)g(as)g(follows)-150 1280
y Fj(Name/IP)102 b Fm(This)27 b(is)g(the)f(name)g(or)h(dotted-quad)f
(IP)h(address)h(of)e(the)g(NTP)h(server)g(\(or)f(peer\))h(to)g(which)f
(the)g(rest)330 1380 y(of)d(the)f(line)i(relates.)-150
1543 y Fj(NP)372 b Fm(This)24 b(is)h(the)e(number)g(of)h(sample)h
(points)g(currently)e(being)h(retained)g(for)g(the)f(server.)j(The)f
(drift)e(rate)330 1643 y(and)g(current)e(offset)j(are)f(estimated)g(by)
g(performing)h(a)f(linear)g(regression)h(through)e(these)h(points.)-150
1805 y Fj(NR)372 b Fm(This)22 b(is)g(the)f(number)g(of)h(runs)e(of)i
(residuals)h(having)f(the)f(same)h(sign)g(following)i(the)d(last)h
(regression.)330 1905 y(If)30 b(this)f(number)f(starts)h(to)g(become)h
(too)f(small)h(relative)g(to)f(the)g(number)f(of)i(samples,)i(it)d
(indicates)330 2005 y(that)g(a)i(straight)e(line)i(is)g(no)f(longer)h
(a)g(good)g(fit)g(to)f(the)f(data.)46 b(If)30 b(the)g(number)g(of)g
(runs)g(is)h(too)f(low,)330 2104 y Fj(chronyd)39 b Fm(discards)g(older)
f(samples)h(and)e(re-runs)g(the)f(regression)j(until)d(the)h(number)f
(of)i(runs)330 2204 y(becomes)24 b(acceptable.)-150 2367
y Fj(Span)264 b Fm(This)26 b(is)f(the)g(interval)g(between)g(the)g
(oldest)h(and)f(newest)g(samples.)31 b(If)25 b(no)g(unit)f(is)i(shown)f
(the)f(value)330 2467 y(is)f(in)g(seconds.)h(In)f(the)f(example,)h(the)
f(interval)h(is)h(46)f(minutes.)-150 2629 y Fj(Freq)264
b Fm(This)29 b(is)g(the)e(estimated)i(residual)g(frequency)g(for)f(the)
f(server,)j(in)e(parts)h(per)f(million.)40 b(In)28 b(this)g(case,)330
2729 y(the)22 b(computer's)h(clock)h(is)g(estimated)f(to)g(be)g
(running)e(1)i(part)g(in)f(10**9)i(slow)g(relative)g(to)e(the)h
(server.)-150 2892 y Fj(Skew)264 b Fm(This)23 b(is)h(the)e(estimated)h
(error)g(bounds)g(on)g Fj(Freq)g Fm(\(again)h(in)f(parts)g(per)g
(million\).)-150 3055 y Fj(Var/us)156 b Fm(This)23 b(is)h(the)e
(estimated)h(sample)i(variance)e(in)g(microseconds.)-150
3399 y Fg(4.3.4.34)56 b(tracking)-25 3630 y Fm(The)23
b Fj(tracking)i Fm(command)f(displays)h(parameters)f(about)f(the)f
(system's)i(clock)h(performance.)f(An)f(example)-150
3729 y(of)g(the)f(output)g(is)h(shown)g(below.)90 3964
y Fj(Reference)57 b(ID)218 b(:)54 b(1.2.3.4)j(\(a.b.c\))90
4068 y(Stratum)491 b(:)54 b(3)90 4172 y(Ref)h(time)h(\(UTC\))110
b(:)54 b(Sun)i(May)f(17)g(06:13:11)h(1998)90 4276 y(System)g(time)273
b(:)54 b(0.000000)j(seconds)f(fast)g(of)f(NTP)g(time)90
4380 y(Frequency)383 b(:)54 b(331.898)j(ppm)e(fast)90
4483 y(Residual)i(freq)164 b(:)54 b(0.004)i(ppm)90 4587
y(Skew)653 b(:)54 b(0.154)i(ppm)90 4691 y(Root)f(delay)328
b(:)54 b(0.373169)j(seconds)90 4795 y(Root)e(dispersion)j(:)c(0.024780)
j(seconds)-25 5026 y Fm(The)23 b(fields)h(are)f(explained)h(as)g
(follows.)-150 5288 y Fj(Reference)h(ID)330 5388 y Fm(This)15
b(is)g(the)g(IP)g(address,)i(and)e(name)g(if)g(available,)i(of)e(the)g
(server)g(to)g(which)g(the)g(computer)g(is)g(currently)330
5487 y(synchronised.)36 b(If)27 b(this)g(is)g Fj(127.127.1.1)j
Fm(it)d(means)g(the)f(computer)h(is)h(not)e(synchronised)i(to)f(any)330
5587 y(external)c(source)g(and)g(that)f(you)h(have)g(the)f(`local')j
(mode)f(operating)f(\(via)h(the)e Fj(local)j Fm(command)e(in)330
5687 y Fj(chronyc)33 b Fm(\(see)f(Section)f(4.3.4.19)f([local)j
(command],)g(page)f(32\),)h(or)e(the)f Fj(local)j Fm(directive)f(in)e
(the)330 5786 y(`)p Fj(/etc/chrony.conf)p Fm(')e(file)23
b(\(see)h(Section)f(4.2.10)g([local)h(directive],)g(page)f(19\)\).)p
eop
%%Page: 40 42
40 41 bop -150 -116 a Fm(Chapter)23 b(4:)f(Usage)i(reference)2885
b(40)-150 236 y Fj(Stratum)102 b Fm(The)25 b(stratum)e(indicates)i(how)
g(many)f(hops)h(away)g(from)f(a)h(computer)f(with)g(an)g(attached)g
(reference)330 336 y(clock)g(we)e(are.)h(Such)e(a)h(computer)g(is)h(a)f
(stratum-1)g(computer,)g(so)h(the)e(computer)h(in)g(the)g(example)h(is)
330 435 y(two)g(hops)g(away)h(\(i.e.)f Fj(a.b.c)h Fm(is)f(a)g
(stratum-2)f(and)h(is)g(synchronised)h(from)f(a)g(stratum-1\).)-150
574 y Fj(Ref)h(time)78 b Fm(This)38 b(is)f(the)f(time)h(\(GMT\))h(at)e
(which)h(the)g(last)g(measurement)g(from)g(the)f(reference)h(source)h
(was)330 674 y(processed.)-150 812 y Fj(System)24 b(time)330
912 y Fm(In)35 b(normal)g(operation,)k Fj(chronyd)e Fh(never)k
Fm(steps)36 b(the)e(system)i(clock,)j(because)d(any)f(jump)g(in)g(the)
330 1011 y(timescale)30 b(can)e(have)g(adverse)h(consequences)g(for)g
(certain)f(application)i(programs.)39 b(Instead,)30 b(any)330
1111 y(error)22 b(in)f(the)h(system)g(clock)h(is)g(corrected)f(by)g
(slightly)h(speeding)h(up)e(or)g(slowing)h(down)g(the)e(system)330
1211 y(clock)29 b(until)e(the)g(error)g(has)h(been)g(removed,)i(and)d
(then)g(returning)f(to)i(the)f(system)h(clock's)i(normal)330
1310 y(speed.)25 b(A)f(consequence)g(of)g(this)e(is)i(that)e(there)h
(will)i(be)e(a)h(period)g(when)f(the)g(system)h(clock)h(\(as)e(read)330
1410 y(by)h(other)g(programs)h(using)f(the)g Fj(gettimeofday\(\))k
Fm(system)c(call,)h(or)g(by)f(the)f Fj(date)i Fm(command)g(in)330
1510 y(the)31 b(shell\))i(will)g(be)f(different)g(from)f
Fj(chronyd's)k Fm(estimate)d(of)g(the)f(current)f(true)h(time)g
(\(which)h(it)330 1609 y(reports)e(to)f(NTP)h(clients)g(when)g(it)f(is)
h(operating)h(in)e(server)h(mode\).)44 b(The)30 b(value)g(reported)h
(on)e(this)330 1709 y(line)23 b(is)h(the)e(difference)i(due)f(to)f
(this)h(effect.)330 1828 y(On)e(systems)i(such)e(as)h(Solaris)g(and)g
(SunOS,)d Fj(chronyd)k Fm(has)f(no)g(means)f(to)h(adjust)f(the)g
(fundamental)330 1927 y(rate)f(of)h(the)f(system)h(clock,)g(so)g(keeps)
h(the)e(system)h(time)f(correct)h(by)f(periodically)k(making)d(offsets)
g(to)330 2027 y(it)h(as)g(though)f(an)g(error)h(had)g(been)g(measured.)
h(The)f(build)g(up)g(of)g(these)g(offsets)h(will)g(be)g(observed)g(in)
330 2127 y(this)g(report.)f(On)h(systems)h(such)e(as)i(Linux)e(where)h
Fj(chronyd)i Fm(can)e(adjust)g(the)f(fundamental)h(rate)f(of)330
2226 y(the)i(system)i(clock,)h(this)d(value)i(will)g(show)g(zero)g
(unless)f(a)g(very)h(recent)e(measurement)h(has)g(shown)330
2326 y(the)d(system)i(to)e(be)h(error.)-150 2464 y Fj(Frequency)330
2564 y Fm(The)39 b(`frequency')f(is)h(the)e(rate)h(by)h(which)f(the)g
(system's)h(clock)h(would)f(be)f(would)h(be)g(wrong)g(if)330
2664 y Fj(chronyd)27 b Fm(was)e(not)f(correcting)h(it.)j(It)d(is)g
(expressed)i(in)d(ppm)h(\(parts)g(per)g(million\).)30
b(For)25 b(example,)h(a)330 2763 y(value)c(of)g(1ppm)g(would)g(mean)g
(that)e(when)i(the)e(system's)j(clock)g(thinks)e(it)g(has)h(advanced)h
(1)e(second,)330 2863 y(it)h(has)h(actually)h(advanced)g(by)f(1.000001)
h(seconds)g(relative)g(to)e(true)g(time.)330 2982 y(As)j(you)f(can)g
(see)h(in)f(the)g(example,)h(the)e(clock)j(in)e(the)f(computer)h(I)h
(developed)i Fj(chrony)e Fm(on)f(is)h(not)f(a)330 3082
y(very)j(good)g(one)f(-)h(it)e(gains)i(about)f(30)h(seconds)g(per)g
(day!)34 b(This)27 b(was)g(the)e(reason)i(I)g(started)f(to)g(write)330
3181 y Fj(chrony)e Fm(in)f(the)f(first)h(place.)-150
3320 y Fj(Residual)i(freq)330 3419 y Fm(This)42 b(shows)g(the)e
(`residual)j(frequency')e(for)g(the)g(currently)f(selected)j(reference)
e(source.)78 b(This)330 3519 y(reflects)20 b(any)g(difference)h
(between)g(what)e(the)g(measurements)h(from)g(the)f(reference)h(source)
g(indicate)330 3619 y(the)i(frequency)h(should)g(be)g(and)g(the)f
(frequency)h(currently)f(being)h(used.)330 3738 y(The)45
b(reason)h(this)f(is)h(not)e(always)j(zero)f(is)f(that)f(a)h(smoothing)
h(procedure)g(is)f(applied)j(to)c(the)330 3837 y(frequency.)53
b(Each)33 b(time)g(a)g(measurement)f(from)h(the)g(reference)g(source)h
(is)f(obtained)h(and)f(a)g(new)330 3937 y(residual)19
b(frequency)f(computed,)h(the)f(estimated)h(accuracy)g(of)f(this)g
(residual)h(is)g(compared)g(with)f(the)330 4037 y(estimated)25
b(accuracy)f(\(see)h(`skew')h(next\))d(of)h(the)g(existing)g(frequency)
g(value.)i(A)f(weighted)g(average)330 4136 y(is)30 b(computed)h(for)f
(the)f(new)h(frequency,)h(with)f(weights)g(depending)i(on)d(these)h
(accuracies.)45 b(If)30 b(the)330 4236 y(measurements)j(from)g(the)f
(reference)i(source)f(follow)i(a)e(consistent)g(trend,)h(the)e
(residual)i(will)h(be)330 4336 y(driven)23 b(to)g(zero)g(over)g(time.)
-150 4474 y Fj(Skew)264 b Fm(This)23 b(is)h(the)e(estimated)h(error)g
(bound)g(on)f(the)g(the)h(frequency.)-150 4613 y Fj(Root)h(delay)330
4712 y Fm(This)34 b(is)g(the)e(total)i(of)f(the)g(network)h(path)e
(delays)j(to)f(the)e(stratum-1)h(computer)g(from)g(which)g(the)330
4812 y(computer)23 b(is)g(ultimately)g(synchronised.)330
4931 y(In)30 b(certain)g(extreme)g(situations,)i(this)e(value)h(can)f
(be)g(negative.)46 b(\(This)31 b(can)f(arise)h(in)f(a)g(symmetric)330
5031 y(peer)f(arrangement)f(where)g(the)g(computers')h(frequencies)f
(are)h(not)f(tracking)g(each)g(other)g(and)g(the)330
5130 y(network)23 b(delay)h(is)g(very)f(short)f(relative)i(to)e(the)g
(turn-around)f(time)i(at)g(each)g(computer.\))-150 5269
y Fj(Root)h(dispersion)330 5368 y Fm(This)j(is)g(the)f(total)g
(dispersion)i(accumulated)f(through)e(all)i(the)e(computers)i(back)g
(to)f(the)g(stratum-1)330 5468 y(computer)39 b(from)g(which)h(the)e
(computer)h(is)h(ultimately)f(synchronised.)73 b(Dispersion)41
b(is)f(due)f(to)330 5568 y(system)23 b(clock)h(resolution,)f
(statistical)h(measurement)f(variations)g(etc.)330 5687
y(An)k(absolute)h(bound)e(on)h(the)g(computer's)g(clock)h(accuracy)g
(\(assuming)g(the)e(stratum-1)g(computer)330 5786 y(is)d(correct\))g
(is)h(given)f(by)p eop
%%Page: 41 43
41 42 bop -150 -116 a Fm(Chapter)23 b(4:)f(Usage)i(reference)2885
b(41)570 236 y Fj(clock_error)58 b(<=)c(root_dispersion)59
b(+)c(\(0.5)g(*)g(|root_delay|\))-150 560 y Fg(4.3.4.35)h(trimrtc)-25
784 y Fm(The)28 b Fj(trimrtc)i Fm(command)f(is)f(used)h(to)f(correct)g
(the)g(system's)h(real)g(time)f(clock)h(\(RTC\))h(to)d(the)h(main)g
(system)-150 884 y(clock.)35 b(It)27 b(has)g(no)f(effect)h(if)g(the)g
(error)f(between)h(the)f(two)h(clocks)i(is)e(currently)f(estimated)h
(at)f(less)i(than)e(a)h(second)-150 983 y(\(the)22 b(resolution)i(of)f
(the)f(RTC)i(is)f(only)g(1)g(second\).)-25 1208 y(The)35
b(command)g(takes)g(no)g(arguments.)57 b(It)35 b(performs)h(the)e
(following)j(steps)e(\(if)g(the)f(RTC)i(is)f(more)g(than)f(1)-150
1307 y(second)24 b(away)g(from)f(the)f(system)h(clock\):)-98
1531 y(1.)60 b(Remember)14 b(the)g(currently)g(estimated)g(gain/loss)g
(rate)g(of)g(the)g(RT)q(C)g(a)q(nd)g(flush)g(the)g(p)q(revio)q(us)g
(mea)q(surements.)-98 1656 y(2.)60 b(Step)22 b(the)h(real)g(time)g
(clock)h(to)e(bring)h(it)f(within)h(a)g(second)h(of)f(the)f(system)h
(clock.)-98 1780 y(3.)60 b(Make)34 b(several)i(measurements)e(to)f
(accurately)i(determine)f(the)f(new)h(offset)h(between)f(the)g(RTC)h
(and)e(the)30 1880 y(system)23 b(clock)h(\(i.e.)f(the)f(remaining)h
(fraction)g(of)g(a)g(second)h(error\))-98 2005 y(4.)60
b(Save)16 b(the)g(RTC)h(parameters)g(to)f(the)f(RTC)i(file)g
(\(specified)i(with)d(the)g Fj(rtcfile)i Fm(directive)f(in)f(the)f
(configuration)30 2104 y(file)24 b(\(see)g(Section)e(4.2.17)h([rtcfile)
g(directive],)h(page)g(24\).)-25 2353 y(The)j(last)h(step)f(is)h(done)g
(as)g(a)f(precaution)g(against)h(the)f(computer)g(suffering)g(a)h
(power)g(failure)g(before)g(either)-150 2453 y(the)22
b(daemon)i(exits)e(or)h(the)f Fj(writertc)j Fm(command)f(is)f(issued.)
-25 2677 y Fj(chronyd)31 b Fm(will)f(still)g(work)g(perfectly)h(well)f
(both)f(whilst)h(operating)g(and)f(across)i(machine)e(reboots)h(even)g
(if)-150 2777 y(the)i Fj(trimrtc)i Fm(command)f(is)g(never)g(used)g
(\(and)g(the)f(RTC)h(is)g(allowed)i(to)d(drift)h(away)h(from)e(true)g
(time\).)52 b(The)-150 2876 y Fj(trimrtc)32 b Fm(command)f(is)g
(provided)h(as)f(a)f(method)g(by)h(which)f(it)g(can)g(be)h(corrected,)h
(in)e(a)h(manner)e(compatible)-150 2976 y(with)23 b Fj(chronyd)h
Fm(using)f(it)g(to)f(maintain)h(accurate)f(time)h(across)h(machine)f
(reboots.)-150 3300 y Fg(4.3.4.36)56 b(writertc)-25 3524
y Fm(The)29 b Fj(writertc)i Fm(command)f(writes)g(the)e(currently)h
(estimated)h(error)f(and)g(gain/loss)i(rate)e(parameters)h(for)-150
3624 y(the)h(RTC)h(to)f(the)g(RTC)h(file)h(\(specified)h(with)d(the)g
Fj(rtcfile)i Fm(directive)g(\(see)f(Section)g(4.2.17)f([rtcfile)h
(directive],)-150 3723 y(page)37 b(24\)\).)61 b(This)37
b(information)f(is)g(also)h(written)e(automatically)h(when)g
Fj(chronyd)i Fm(is)e(killed)h(\(with)f(SIGHUP,)-150 3823
y(SIGINT,)23 b(SIGQUIT)i(or)d(SIGTERM\).)p eop
%%Page: 42 44
42 43 bop -150 -116 a Fm(Appendix)24 b(A:)f(Porting)f(guide)2868
b(42)-150 236 y Fi(Appendix)33 b(A)72 b(Porting)46 b(guide)-25
570 y Fm(This)25 b(appendix)g(discusses)i(issues)e(that)e(have)i
(arisen)g(in)f(writing)g(the)g(system-specific)k(parts)c(of)h(the)e
(existing)-150 670 y(ports.)g(This)g(will)h(provide)g(useful)f
(information)g(for)g(those)g(attempting)g(to)f(write)h(ports)g(to)g
(other)f(systems.)-150 1026 y Fl(A.1)59 b(System)41 b(driver)e(files)
-25 1250 y Fm(The)23 b(system)g(specific)i(parts)e(of)g(the)f(software)
i(are)f(contained)g(in)g(files)h(with)f(names)g(like)h
Fj(sys_linux.c)p Fm(.)-25 1474 y(The)f(following)i(functions)d(are)h
(required)g(in)f(a)h(system)h(driver)f(file:)-98 1699
y(1.)60 b(A)23 b(function)f(to)h(read)g(the)f(current)f(frequency)-98
1823 y(2.)60 b(A)23 b(function)f(to)h(set)f(the)h(current)e(frequency)
-98 1947 y(3.)60 b(A)23 b(function)f(to)h(slew)h(the)e(system)h(time)g
(by)g(a)g(specified)i(delta)-98 2071 y(4.)60 b(A)23 b(function)f(to)h
(step)g(the)f(system)h(time)g(by)g(a)g(specified)i(delta)-98
2195 y(5.)60 b(A)23 b(function)g(to)g(work)h(out)e(the)h(error)g(at)f
(a)i(particular)f(time)g(between)h(the)e(system's)j(clock)f(and)f
Fj(chronyd's)30 2295 y Fm(estimate)k(of)h(real)f(time.)35
b(\(This)28 b(is)g(required)f(because)h(some)g(systems)g(have)f(to)g
(track)g(real)g(time)g(by)g(making)30 2394 y(the)22 b(system)i(time)e
(follow)j(it)d(in)h(a)g('sawtooth')g(fashion\).)-25 2643
y(The)i Fh(frequency)30 b Fm(is)25 b(the)g(rate)f(at)g(which)h(the)f
(system)i(gains)f(or)g(loses)i(time,)d(measured)i(relative)g(to)e(the)g
(system)-150 2742 y(when)f(running)e(uncompensated.)-150
3099 y Fl(A.2)59 b(Quirks)39 b(of)h(particular)e(systems)-25
3323 y Fm(These)h(sections)h(describe)h(quirks)d(in)h(each)g(system)h
(type)f(that)e(needed)j(to)f(be)g(investigated)h(to)f(port)f(the)-150
3422 y(software)24 b(to)e(each)h(system)h(type.)-150
3745 y Fg(A.2.1)56 b(Linux)-25 3969 y Fm(The)23 b(following)i(quirks)d
(have)h(been)g(found)g(in)g(developing)i(the)d(Linux)g(port.)-98
4194 y(1.)60 b(In)30 b(order)h(to)f(avoid)h(floating)g(point)f
(arithmetic,)h(the)f(kernel)h(uses)f(shifting)h(and)f(adding)h(to)f
(approximate)30 4293 y(a)k(scaling)i(of)f(100/128.)58
b(This)35 b(approximation)h(implies)g(that)d(the)h(frequency)g(set)g
(via)h(the)f Fj(adjtimex\(\))30 4393 y Fm(system)d(call)g(is)g(not)f
(the)g(frequency)g(that)f(is)i(actually)g(obtained.)46
b(The)31 b(method)f(of)h(approximation)h(varies)30 4492
y(between)h(kernel)f(versions)h(and)f(must)f(be)i(determined)f(by)g
(examining)h(the)e(kernel)i(source.)50 b(An)32 b(inverse)30
4592 y(factor)23 b(must)f(be)h(included)g(in)g(the)f(driver)h(to)g
(compensate.)-98 4716 y(2.)60 b(In)23 b(some)g(kernel)h(versions,)f(an)
g Fj(adjtimex\(\))i Fm(system)f(call)f(with)g(the)f(flags)i(bits)f(all)
g(zeroed)h(will)g(return)d(the)30 4816 y(amount)k(of)h(offset)h(still)f
(to)g(be)g(corrected.)32 b(In)26 b(others)g(\(e.g.)32
b(the)25 b(2.0)h(series)h(beyond)f(2.0.32\),)h(the)e(offset)i(must)30
4915 y(be)c(changed)g(in)g(order)g(to)g(get)f(the)h(old)g(offset)h
(returned)e(\(similar)i(to)e Fj(adjtime\(\))j Fm(on)e(other)f
(systems\).)-150 5238 y Fg(A.2.2)56 b(Solaris)38 b(2.5)-25
5462 y Fm(The)23 b(following)i(quirks)d(have)h(been)g(found)g(in)g
(developing)i(the)d(Solaris)i(port.)-98 5687 y(1.)60
b(The)41 b Fj(adjtime\(\))i Fm(system)e(call)g(with)f(a)h(zero)g
(argument)e(does)j(not)e(cancel)h(an)f(adjustment)g(that)f(is)i(in)30
5786 y(progress)24 b(-)f(it)g(just)f(reports)h(the)f(remaining)h
(adjustment.)p eop
%%Page: 43 45
43 44 bop -150 -116 a Fm(Appendix)24 b(A:)f(Porting)f(guide)2868
b(43)-98 236 y(2.)60 b(The)18 b Fj(settimeofday\(\))k
Fm(system)d(call)g(only)f(observes)h(the)f(seconds)h(part)f(of)g(the)f
(argument)g(-)h(any)g(fractional)30 336 y(seconds)24
b(part)f(is)g(lost.)g(second.)-98 460 y(3.)60 b(The)24
b(kernel)h(variable)g Fj(dosynctodr)h Fm(has)e(to)g(be)g(set)g(to)f
(zero,)i(otherwise)g(the)e(system)h(clock)h(is)g(periodically)30
560 y(reset)e(to)f(the)h(real-time)g(clock.)-150 884
y Fg(A.2.3)56 b(SunOS)38 b(4.1.4)-25 1108 y Fm(The)23
b(following)i(quirks)d(have)h(been)g(found)g(in)g(developing)i(the)d
(SunOS)f(port.)-98 1332 y(1.)60 b(The)44 b Fj(adjtime\(\))i
Fm(system)e(call)h(truncates)d(its)i(argument)e(to)i(a)f(multiple)h(of)
g(the)f(system's)i Fj(tickadj)30 1432 y Fm(variable.)22
b(\()p Fj(chronyd)g Fm(sets)d(that)f(to)h(100,)h(giving)g(a)f(1)g(part)
g(in)f(100)i(slewing)h(capability)g(for)e(correcting)g(offsets.\))-98
1556 y(2.)60 b(The)24 b(kernel)h(variable)g Fj(dosynctodr)h
Fm(has)e(to)g(be)g(set)g(to)f(zero,)i(otherwise)g(the)e(system)h(clock)
h(is)g(periodically)30 1656 y(reset)e(to)f(the)h(real-time)g(clock.)p
eop
%%Page: -1 46
-1 45 bop 3874 -116 a Fm(i)-150 236 y Fi(Table)46 b(of)i(Contents)-150
568 y Fl(1)119 b(Introduction)35 b Fb(.)20 b(.)f(.)h(.)g(.)g(.)g(.)f(.)
h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g
(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)
g(.)g(.)f(.)h(.)g(.)g(.)64 b Fl(1)149 693 y Fm(1.1)90
b(Overview)21 b Fa(.)c(.)e(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g
(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)43
b Fm(1)149 792 y(1.2)90 b(Acknowledgements)9 b Fa(.)18
b(.)c(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)
g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)g(.)30 b Fm(1)149 892 y(1.3)90 b(Availability)21 b
Fa(.)d(.)d(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)
f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)43 b Fm(1)448
992 y(1.3.1)90 b(Getting)23 b(the)f(software)j Fa(.)15
b(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)
g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)46 b Fm(1)448 1091 y(1.3.2)90
b(Platforms)12 b Fa(.)j(.)g(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g
(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)34 b Fm(1)149 1191 y(1.4)90
b(Relationship)25 b(to)e(other)f(software)i(packages)j
Fa(.)15 b(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)46
b Fm(2)448 1291 y(1.4.1)90 b(xntpd)12 b Fa(.)i(.)h(.)g(.)g(.)g(.)f(.)h
(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)
h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h
(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)
34 b Fm(2)448 1390 y(1.4.2)90 b(timed)14 b Fa(.)h(.)g(.)g(.)g(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)
h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)
f(.)36 b Fm(3)149 1490 y(1.5)90 b(Distribution)23 b(rights)g(and)f
(\(lack)i(of\))f(warranty)13 b Fa(.)j(.)e(.)h(.)g(.)g(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
g(.)g(.)f(.)h(.)g(.)35 b Fm(3)-150 1722 y Fl(2)119 b(Installation)15
b Fb(.)k(.)h(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)g(.)f(.)h(.)g(.)
g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)g
(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)44
b Fl(6)-150 1980 y(3)119 b(Typical)30 b(operating)g(scenarios)e
Fb(.)19 b(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)g(.)f
(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)g(.)f(.)58
b Fl(7)149 2104 y Fm(3.1)90 b(Computers)24 b(connected)f(to)f(the)g
(internet)17 b Fa(.)d(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)g(.)g(.)f(.)39 b Fm(7)149 2204 y(3.2)90 b(Infrequent)22
b(connection)h(to)g(true)f(NTP)h(servers)c Fa(.)d(.)e(.)h(.)g(.)g(.)f
(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)g(.)g(.)f(.)h(.)41 b Fm(7)448 2303 y(3.2.1)90
b(Setting)22 b(up)h(the)f(configuration)h(file)h(for)f(infrequent)e
(connections)14 b Fa(.)i(.)f(.)f(.)36 b Fm(7)448 2403
y(3.2.2)90 b(How)24 b(to)f(tell)g(chronyd)g(when)f(the)h(internet)e
(link)j(is)f(available.)9 b Fa(.)16 b(.)f(.)g(.)f(.)h(.)g(.)g(.)30
b Fm(9)149 2503 y(3.3)90 b(Isolated)25 b(networks)14
b Fa(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
g(.)g(.)f(.)h(.)g(.)35 b Fm(9)149 2602 y(3.4)90 b(The)24
b(home)f(PC)f(with)h(a)f(dial-up)i(connection)j Fa(.)15
b(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)48
b Fm(10)448 2702 y(3.4.1)90 b(Assumptions/how)25 b(the)d(software)i
(works)11 b Fa(.)16 b(.)f(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h
(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)33 b Fm(10)448
2802 y(3.4.2)90 b(Typical)25 b(configuration)e(files.)k
Fa(.)14 b(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h
(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)
g(.)g(.)47 b Fm(12)149 2901 y(3.5)90 b(Other)23 b(important)f
(configuration)h(options)10 b Fa(.)16 b(.)f(.)g(.)f(.)h(.)g(.)g(.)f(.)h
(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)
h(.)g(.)g(.)g(.)f(.)h(.)g(.)32 b Fm(13)-150 3134 y Fl(4)119
b(Usage)30 b(reference)16 b Fb(.)i(.)i(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)g
(.)f(.)h(.)g(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)
h(.)g(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)46
b Fl(14)149 3258 y Fm(4.1)90 b(Starting)22 b(chronyd)11
b Fa(.)k(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)
h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)
h(.)g(.)g(.)g(.)f(.)33 b Fm(14)149 3358 y(4.2)90 b(The)24
b(chronyd)e(configuration)i(file)c Fa(.)15 b(.)g(.)g(.)g(.)f(.)h(.)g(.)
g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)42
b Fm(15)448 3457 y(4.2.1)90 b(allow)16 b Fa(.)h(.)e(.)f(.)h(.)g(.)g(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g
(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)38
b Fm(15)448 3557 y(4.2.2)90 b(commandkey)26 b Fa(.)15
b(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)
g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)46
b Fm(16)448 3657 y(4.2.3)90 b(cmdport)12 b Fa(.)j(.)g(.)g(.)g(.)f(.)h
(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)
h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)34
b Fm(17)448 3756 y(4.2.4)90 b(deny)28 b Fa(.)14 b(.)h(.)g(.)g(.)f(.)h
(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)
h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)
49 b Fm(17)448 3856 y(4.2.5)90 b(driftfile)14 b Fa(.)i(.)f(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)
g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)36
b Fm(17)448 3956 y(4.2.6)90 b(dumpdir)22 b Fa(.)16 b(.)f(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)44
b Fm(17)448 4055 y(4.2.7)90 b(dumponexit)14 b Fa(.)h(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)36 b Fm(18)448
4155 y(4.2.8)90 b(initstepslew)18 b Fa(.)f(.)d(.)h(.)g(.)g(.)g(.)f(.)h
(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)
g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h
(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)40 b Fm(18)448 4254
y(4.2.9)90 b(keyfile)11 b Fa(.)17 b(.)e(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)
f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)33
b Fm(19)448 4354 y(4.2.10)90 b(local)11 b Fa(.)17 b(.)e(.)f(.)h(.)g(.)g
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
33 b Fm(19)448 4454 y(4.2.11)90 b(log)23 b Fa(.)16 b(.)f(.)g(.)g(.)f(.)
h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)
h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)45 b Fm(20)747 4553 y(4.2.11.1)90 b(Measurements)23
b(log)h(file)f(format)11 b Fa(.)k(.)g(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)33
b Fm(20)747 4653 y(4.2.11.2)90 b(Statistics)23 b(log)g(file)h(format)18
b Fa(.)d(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)
g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)40 b
Fm(21)747 4753 y(4.2.11.3)90 b(Tracking)24 b(log)g(file)g(format)15
b Fa(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)37 b
Fm(22)747 4852 y(4.2.11.4)90 b(Real-time)24 b(clock)g(log)g(file)g
(format)18 b Fa(.)d(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h
(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)40 b Fm(22)448 4952 y(4.2.12)90
b(logdir)21 b Fa(.)c(.)d(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)43 b Fm(23)448 5051 y(4.2.13)90
b(manual)10 b Fa(.)15 b(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h
(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)
g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h
(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)31 b Fm(23)448 5151 y(4.2.14)90
b(maxupdateskew)20 b Fa(.)c(.)f(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)
g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)41
b Fm(23)448 5251 y(4.2.15)90 b(peer)16 b Fa(.)h(.)d(.)h(.)g(.)g(.)f(.)h
(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)
h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)38
b Fm(24)448 5350 y(4.2.16)90 b(port)20 b Fa(.)c(.)e(.)h(.)g(.)g(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)
h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)42
b Fm(24)448 5450 y(4.2.17)90 b(rtcfile)28 b Fa(.)15 b(.)f(.)h(.)g(.)g
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)49
b Fm(24)448 5550 y(4.2.18)90 b(rtconutc)15 b Fa(.)f(.)g(.)h(.)g(.)g(.)f
(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)
f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)36
b Fm(25)448 5649 y(4.2.19)90 b(server)19 b Fa(.)d(.)f(.)f(.)h(.)g(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)
g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g
(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)41
b Fm(25)149 5749 y(4.3)90 b(Running)23 b(chronyc)e Fa(.)15
b(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g
(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g
(.)g(.)f(.)43 b Fm(26)p eop
%%Page: -2 47
-2 46 bop 3847 -116 a Fm(ii)448 83 y(4.3.1)90 b(Basic)24
b(use)d Fa(.)15 b(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h
(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)
h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)43 b Fm(26)448 183 y(4.3.2)90
b(Command)23 b(line)h(options)j Fa(.)15 b(.)f(.)h(.)g(.)g(.)g(.)f(.)h
(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)
g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)48
b Fm(27)448 282 y(4.3.3)90 b(Security)22 b(with)h(chronyc)10
b Fa(.)15 b(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h
(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)
h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)32 b Fm(27)448 382 y(4.3.4)90
b(Command)23 b(reference)e Fa(.)16 b(.)f(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)
h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)43
b Fm(28)747 482 y(4.3.4.1)90 b(accheck)15 b Fa(.)h(.)e(.)h(.)g(.)g(.)f
(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g
(.)f(.)h(.)g(.)g(.)f(.)37 b Fm(28)747 581 y(4.3.4.2)90
b(add)23 b(peer)12 b Fa(.)k(.)f(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)34
b Fm(28)747 681 y(4.3.4.3)90 b(add)23 b(server)14 b Fa(.)i(.)f(.)g(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)
g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g
(.)f(.)h(.)g(.)g(.)36 b Fm(28)747 780 y(4.3.4.4)90 b(allow)22
b Fa(.)16 b(.)f(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)43
b Fm(28)747 880 y(4.3.4.5)90 b(allow)24 b(all)18 b Fa(.)e(.)f(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)
f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)g(.)g(.)f(.)h(.)40 b Fm(29)747 980 y(4.3.4.6)90
b(burst)10 b Fa(.)k(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)
g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h
(.)32 b Fm(29)747 1079 y(4.3.4.7)90 b(cmdaccheck)21 b
Fa(.)c(.)d(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h
(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)
g(.)g(.)g(.)f(.)h(.)g(.)g(.)43 b Fm(30)747 1179 y(4.3.4.8)90
b(cmdallow)9 b Fa(.)17 b(.)e(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)31
b Fm(30)747 1279 y(4.3.4.9)90 b(cmdallow)25 b(all)g Fa(.)15
b(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)
f(.)h(.)g(.)g(.)f(.)47 b Fm(30)747 1378 y(4.3.4.10)90
b(cmddeny)16 b Fa(.)g(.)f(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)
g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)38
b Fm(30)747 1478 y(4.3.4.11)90 b(cmddeny)24 b(all)13
b Fa(.)i(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g
(.)g(.)f(.)h(.)g(.)g(.)f(.)35 b Fm(30)747 1577 y(4.3.4.12)90
b(cyclelogs)22 b Fa(.)c(.)d(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)44
b Fm(30)747 1677 y(4.3.4.13)90 b(delete)9 b Fa(.)16 b(.)f(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)
g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)31 b Fm(31)747 1777 y(4.3.4.14)90
b(deny)10 b Fa(.)15 b(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g
(.)31 b Fm(31)747 1876 y(4.3.4.15)90 b(deny)23 b(all)j
Fa(.)15 b(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)
g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)47 b Fm(31)747
1976 y(4.3.4.16)90 b(dump)26 b Fa(.)15 b(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)
g(.)f(.)h(.)48 b Fm(31)747 2076 y(4.3.4.17)90 b(exit)19
b Fa(.)14 b(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)
g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)40
b Fm(32)747 2175 y(4.3.4.18)90 b(help)22 b Fa(.)16 b(.)f(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)44 b Fm(32)747 2275 y(4.3.4.19)90
b(local)17 b Fa(.)f(.)f(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h
(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)
h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)38
b Fm(32)747 2374 y(4.3.4.20)90 b(manual)15 b Fa(.)g(.)g(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)g(.)g(.)f(.)h(.)37 b Fm(32)747 2474 y(4.3.4.21)90
b(maxdelay)9 b Fa(.)16 b(.)f(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)
f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)30
b Fm(33)747 2574 y(4.3.4.22)90 b(maxdelayratio)10 b Fa(.)17
b(.)d(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g
(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)32 b Fm(33)747 2673 y(4.3.4.23)90 b(maxpoll)22
b Fa(.)16 b(.)f(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g
(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)44 b Fm(33)747
2773 y(4.3.4.24)90 b(maxupdateskew)27 b Fa(.)15 b(.)g(.)f(.)h(.)g(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)
g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)47 b
Fm(34)747 2873 y(4.3.4.25)90 b(minpoll)9 b Fa(.)17 b(.)d(.)h(.)g(.)g(.)
g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)g(.)31 b Fm(34)747 2972 y(4.3.4.26)90
b(offline)19 b Fa(.)d(.)f(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)
g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)41
b Fm(34)747 3072 y(4.3.4.27)90 b(online)23 b Fa(.)16
b(.)e(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g
(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)45 b Fm(35)747
3171 y(4.3.4.28)90 b(password)9 b Fa(.)17 b(.)e(.)f(.)h(.)g(.)g(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)
f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f
(.)31 b Fm(36)747 3271 y(4.3.4.29)90 b(quit)11 b Fa(.)j(.)h(.)g(.)f(.)h
(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)
h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h
(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)33 b Fm(36)747
3371 y(4.3.4.30)90 b(rtcdata)27 b Fa(.)14 b(.)h(.)g(.)g(.)f(.)h(.)g(.)g
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g
(.)g(.)f(.)49 b Fm(36)747 3470 y(4.3.4.31)90 b(settime)22
b Fa(.)15 b(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)44 b
Fm(37)747 3570 y(4.3.4.32)90 b(sources)17 b Fa(.)f(.)f(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)
g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)g(.)g(.)f(.)h(.)39 b Fm(38)747 3670 y(4.3.4.33)90
b(sourcestats)21 b Fa(.)16 b(.)f(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)43
b Fm(38)747 3769 y(4.3.4.34)90 b(tracking)21 b Fa(.)15
b(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h
(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)
h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)43 b Fm(39)747 3869
y(4.3.4.35)90 b(trimrtc)10 b Fa(.)k(.)g(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)
g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g
(.)f(.)32 b Fm(41)747 3968 y(4.3.4.36)90 b(writertc)9
b Fa(.)15 b(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)31 b
Fm(41)-150 4201 y Fl(Appendix)e(A)120 b(Porting)30 b(guide)21
b Fb(.)f(.)g(.)g(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)
f(.)h(.)g(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h
(.)51 b Fl(42)149 4325 y Fm(A.1)91 b(System)22 b(driver)h(files)d
Fa(.)c(.)f(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g
(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g
(.)g(.)41 b Fm(42)149 4425 y(A.2)91 b(Quirks)23 b(of)g(particular)g
(systems)14 b Fa(.)i(.)e(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)36
b Fm(42)448 4525 y(A.2.1)90 b(Linux)16 b Fa(.)f(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)
f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)38
b Fm(42)448 4624 y(A.2.2)90 b(Solaris)24 b(2.5)i Fa(.)15
b(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)
g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)48
b Fm(42)448 4724 y(A.2.3)90 b(SunOS)21 b(4.1.4)9 b Fa(.)15
b(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)
g(.)g(.)f(.)h(.)g(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)g(.)30
b Fm(43)p eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
